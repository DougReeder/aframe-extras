{"version":3,"file":"aframe-extras.min.js","mappings":"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","sources":["webpack://aframe-extras/webpack/universalModuleDefinition","webpack://aframe-extras/./lib/ColladaLoader.js","webpack://aframe-extras/./lib/FBXLoader.js","webpack://aframe-extras/./lib/GamepadButton.js","webpack://aframe-extras/./lib/GamepadButtonEvent.js","webpack://aframe-extras/./lib/fetch-script.js","webpack://aframe-extras/./lib/keyboard.polyfill.js","webpack://aframe-extras/./node_modules/nipplejs/dist/nipplejs.js","webpack://aframe-extras/./node_modules/three-pathfinding/dist/three-pathfinding.module.js","webpack://aframe-extras/./src/controls/checkpoint-controls.js","webpack://aframe-extras/./src/controls/gamepad-controls.js","webpack://aframe-extras/./src/controls/index.js","webpack://aframe-extras/./src/controls/keyboard-controls.js","webpack://aframe-extras/./src/controls/movement-controls.js","webpack://aframe-extras/./src/controls/nipple-controls.js","webpack://aframe-extras/./src/controls/touch-controls.js","webpack://aframe-extras/./src/controls/trackpad-controls.js","webpack://aframe-extras/./src/loaders/animation-mixer.js","webpack://aframe-extras/./src/loaders/collada-model-legacy.js","webpack://aframe-extras/./src/loaders/fbx-model.js","webpack://aframe-extras/./src/loaders/gltf-model-legacy.js","webpack://aframe-extras/./src/loaders/index.js","webpack://aframe-extras/./src/loaders/object-model.js","webpack://aframe-extras/./src/misc/checkpoint.js","webpack://aframe-extras/./src/misc/cube-env-map.js","webpack://aframe-extras/./src/misc/grab.js","webpack://aframe-extras/./src/misc/index.js","webpack://aframe-extras/./src/misc/normal-material.js","webpack://aframe-extras/./src/misc/sphere-collider.js","webpack://aframe-extras/./src/pathfinding/index.js","webpack://aframe-extras/./src/pathfinding/nav-agent.js","webpack://aframe-extras/./src/pathfinding/nav-mesh.js","webpack://aframe-extras/./src/pathfinding/system.js","webpack://aframe-extras/./src/primitives/a-grid.js","webpack://aframe-extras/./src/primitives/a-ocean.js","webpack://aframe-extras/./src/primitives/a-tube.js","webpack://aframe-extras/./src/primitives/index.js","webpack://aframe-extras/external umd \"THREE\"","webpack://aframe-extras/webpack/bootstrap","webpack://aframe-extras/webpack/runtime/compat get default export","webpack://aframe-extras/webpack/runtime/define property getters","webpack://aframe-extras/webpack/runtime/hasOwnProperty shorthand","webpack://aframe-extras/webpack/runtime/make namespace object","webpack://aframe-extras/./index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"THREE\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"THREE\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"THREE\")) : factory(root[\"THREE\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, (__WEBPACK_EXTERNAL_MODULE__824__) => {\nreturn ","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nmodule.exports = THREE.ColladaLoader = function ( manager ) {\n\n  this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ColladaLoader.prototype = {\n\n  constructor: THREE.ColladaLoader,\n\n  crossOrigin: 'anonymous',\n\n  load: function ( url, onLoad, onProgress, onError ) {\n\n    var scope = this;\n\n    var path = ( scope.path === undefined ) ? THREE.LoaderUtils.extractUrlBase( url ) : scope.path;\n\n    var loader = new THREE.FileLoader( scope.manager );\n    loader.setPath( scope.path );\n    loader.load( url, function ( text ) {\n\n      onLoad( scope.parse( text, path ) );\n\n    }, onProgress, onError );\n\n  },\n\n  setPath: function ( value ) {\n\n    this.path = value;\n    return this;\n\n  },\n\n  setResourcePath: function ( value ) {\n\n    this.resourcePath = value;\n    return this;\n\n  },\n\n  options: {\n\n    set convertUpAxis( value ) {\n\n      console.warn( 'THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.' );\n\n    }\n\n  },\n\n  setCrossOrigin: function ( value ) {\n\n    this.crossOrigin = value;\n    return this;\n\n  },\n\n  parse: function ( text, path ) {\n\n    function getElementsByTagName( xml, name ) {\n\n      // Non recursive xml.getElementsByTagName() ...\n\n      var array = [];\n      var childNodes = xml.childNodes;\n\n      for ( var i = 0, l = childNodes.length; i < l; i ++ ) {\n\n        var child = childNodes[ i ];\n\n        if ( child.nodeName === name ) {\n\n          array.push( child );\n\n        }\n\n      }\n\n      return array;\n\n    }\n\n    function parseStrings( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parts[ i ];\n\n      }\n\n      return array;\n\n    }\n\n    function parseFloats( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parseFloat( parts[ i ] );\n\n      }\n\n      return array;\n\n    }\n\n    function parseInts( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parseInt( parts[ i ] );\n\n      }\n\n      return array;\n\n    }\n\n    function parseId( text ) {\n\n      return text.substring( 1 );\n\n    }\n\n    function generateId() {\n\n      return 'three_default_' + ( count ++ );\n\n    }\n\n    function isEmpty( object ) {\n\n      return Object.keys( object ).length === 0;\n\n    }\n\n    // asset\n\n    function parseAsset( xml ) {\n\n      return {\n        unit: parseAssetUnit( getElementsByTagName( xml, 'unit' )[ 0 ] ),\n        upAxis: parseAssetUpAxis( getElementsByTagName( xml, 'up_axis' )[ 0 ] )\n      };\n\n    }\n\n    function parseAssetUnit( xml ) {\n\n      if ( ( xml !== undefined ) && ( xml.hasAttribute( 'meter' ) === true ) ) {\n\n        return parseFloat( xml.getAttribute( 'meter' ) );\n\n      } else {\n\n        return 1; // default 1 meter\n\n      }\n\n    }\n\n    function parseAssetUpAxis( xml ) {\n\n      return xml !== undefined ? xml.textContent : 'Y_UP';\n\n    }\n\n    // library\n\n    function parseLibrary( xml, libraryName, nodeName, parser ) {\n\n      var library = getElementsByTagName( xml, libraryName )[ 0 ];\n\n      if ( library !== undefined ) {\n\n        var elements = getElementsByTagName( library, nodeName );\n\n        for ( var i = 0; i < elements.length; i ++ ) {\n\n          parser( elements[ i ] );\n\n        }\n\n      }\n\n    }\n\n    function buildLibrary( data, builder ) {\n\n      for ( var name in data ) {\n\n        var object = data[ name ];\n        object.build = builder( data[ name ] );\n\n      }\n\n    }\n\n    // get\n\n    function getBuild( data, builder ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      data.build = builder( data );\n\n      return data.build;\n\n    }\n\n    // animation\n\n    function parseAnimation( xml ) {\n\n      var data = {\n        sources: {},\n        samplers: {},\n        channels: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        var id;\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            id = child.getAttribute( 'id' );\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'sampler':\n            id = child.getAttribute( 'id' );\n            data.samplers[ id ] = parseAnimationSampler( child );\n            break;\n\n          case 'channel':\n            id = child.getAttribute( 'target' );\n            data.channels[ id ] = parseAnimationChannel( child );\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      library.animations[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseAnimationSampler( xml ) {\n\n      var data = {\n        inputs: {},\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var id = parseId( child.getAttribute( 'source' ) );\n            var semantic = child.getAttribute( 'semantic' );\n            data.inputs[ semantic ] = id;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseAnimationChannel( xml ) {\n\n      var data = {};\n\n      var target = xml.getAttribute( 'target' );\n\n      // parsing SID Addressing Syntax\n\n      var parts = target.split( '/' );\n\n      var id = parts.shift();\n      var sid = parts.shift();\n\n      // check selection syntax\n\n      var arraySyntax = ( sid.indexOf( '(' ) !== - 1 );\n      var memberSyntax = ( sid.indexOf( '.' ) !== - 1 );\n\n      if ( memberSyntax ) {\n\n        //  member selection access\n\n        parts = sid.split( '.' );\n        sid = parts.shift();\n        data.member = parts.shift();\n\n      } else if ( arraySyntax ) {\n\n        // array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.\n\n        var indices = sid.split( '(' );\n        sid = indices.shift();\n\n        for ( var i = 0; i < indices.length; i ++ ) {\n\n          indices[ i ] = parseInt( indices[ i ].replace( /\\)/, '' ) );\n\n        }\n\n        data.indices = indices;\n\n      }\n\n      data.id = id;\n      data.sid = sid;\n\n      data.arraySyntax = arraySyntax;\n      data.memberSyntax = memberSyntax;\n\n      data.sampler = parseId( xml.getAttribute( 'source' ) );\n\n      return data;\n\n    }\n\n    function buildAnimation( data ) {\n\n      var tracks = [];\n\n      var channels = data.channels;\n      var samplers = data.samplers;\n      var sources = data.sources;\n\n      for ( var target in channels ) {\n\n        if ( channels.hasOwnProperty( target ) ) {\n\n          var channel = channels[ target ];\n          var sampler = samplers[ channel.sampler ];\n\n          var inputId = sampler.inputs.INPUT;\n          var outputId = sampler.inputs.OUTPUT;\n\n          var inputSource = sources[ inputId ];\n          var outputSource = sources[ outputId ];\n\n          var animation = buildAnimationChannel( channel, inputSource, outputSource );\n\n          createKeyframeTracks( animation, tracks );\n\n        }\n\n      }\n\n      return tracks;\n\n    }\n\n    function getAnimation( id ) {\n\n      return getBuild( library.animations[ id ], buildAnimation );\n\n    }\n\n    function buildAnimationChannel( channel, inputSource, outputSource ) {\n\n      var node = library.nodes[ channel.id ];\n      var object3D = getNode( node.id );\n\n      var transform = node.transforms[ channel.sid ];\n      var defaultMatrix = node.matrix.clone().transpose();\n\n      var time, stride;\n      var i, il, j, jl;\n\n      var data = {};\n\n      // the collada spec allows the animation of data in various ways.\n      // depending on the transform type (matrix, translate, rotate, scale), we execute different logic\n\n      switch ( transform ) {\n\n        case 'matrix':\n\n          for ( i = 0, il = inputSource.array.length; i < il; i ++ ) {\n\n            time = inputSource.array[ i ];\n            stride = i * outputSource.stride;\n\n            if ( data[ time ] === undefined ) data[ time ] = {};\n\n            if ( channel.arraySyntax === true ) {\n\n              var value = outputSource.array[ stride ];\n              var index = channel.indices[ 0 ] + 4 * channel.indices[ 1 ];\n\n              data[ time ][ index ] = value;\n\n            } else {\n\n              for ( j = 0, jl = outputSource.stride; j < jl; j ++ ) {\n\n                data[ time ][ j ] = outputSource.array[ stride + j ];\n\n              }\n\n            }\n\n          }\n\n          break;\n\n        case 'translate':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n        case 'rotate':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n        case 'scale':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n      }\n\n      var keyframes = prepareAnimationData( data, defaultMatrix );\n\n      var animation = {\n        name: object3D.uuid,\n        keyframes: keyframes\n      };\n\n      return animation;\n\n    }\n\n    function prepareAnimationData( data, defaultMatrix ) {\n\n      var keyframes = [];\n\n      // transfer data into a sortable array\n\n      for ( var time in data ) {\n\n        keyframes.push( { time: parseFloat( time ), value: data[ time ] } );\n\n      }\n\n      // ensure keyframes are sorted by time\n\n      keyframes.sort( ascending );\n\n      // now we clean up all animation data, so we can use them for keyframe tracks\n\n      for ( var i = 0; i < 16; i ++ ) {\n\n        transformAnimationData( keyframes, i, defaultMatrix.elements[ i ] );\n\n      }\n\n      return keyframes;\n\n      // array sort function\n\n      function ascending( a, b ) {\n\n        return a.time - b.time;\n\n      }\n\n    }\n\n    var position = new THREE.Vector3();\n    var scale = new THREE.Vector3();\n    var quaternion = new THREE.Quaternion();\n\n    function createKeyframeTracks( animation, tracks ) {\n\n      var keyframes = animation.keyframes;\n      var name = animation.name;\n\n      var times = [];\n      var positionData = [];\n      var quaternionData = [];\n      var scaleData = [];\n\n      for ( var i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        var keyframe = keyframes[ i ];\n\n        var time = keyframe.time;\n        var value = keyframe.value;\n\n        matrix.fromArray( value ).transpose();\n        matrix.decompose( position, quaternion, scale );\n\n        times.push( time );\n        positionData.push( position.x, position.y, position.z );\n        quaternionData.push( quaternion.x, quaternion.y, quaternion.z, quaternion.w );\n        scaleData.push( scale.x, scale.y, scale.z );\n\n      }\n\n      if ( positionData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.position', times, positionData ) );\n      if ( quaternionData.length > 0 ) tracks.push( new THREE.QuaternionKeyframeTrack( name + '.quaternion', times, quaternionData ) );\n      if ( scaleData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.scale', times, scaleData ) );\n\n      return tracks;\n\n    }\n\n    function transformAnimationData( keyframes, property, defaultValue ) {\n\n      var keyframe;\n\n      var empty = true;\n      var i, l;\n\n      // check, if values of a property are missing in our keyframes\n\n      for ( i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] === undefined ) {\n\n          keyframe.value[ property ] = null; // mark as missing\n\n        } else {\n\n          empty = false;\n\n        }\n\n      }\n\n      if ( empty === true ) {\n\n        // no values at all, so we set a default value\n\n        for ( i = 0, l = keyframes.length; i < l; i ++ ) {\n\n          keyframe = keyframes[ i ];\n\n          keyframe.value[ property ] = defaultValue;\n\n        }\n\n      } else {\n\n        // filling gaps\n\n        createMissingKeyframes( keyframes, property );\n\n      }\n\n    }\n\n    function createMissingKeyframes( keyframes, property ) {\n\n      var prev, next;\n\n      for ( var i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] === null ) {\n\n          prev = getPrev( keyframes, i, property );\n          next = getNext( keyframes, i, property );\n\n          if ( prev === null ) {\n\n            keyframe.value[ property ] = next.value[ property ];\n            continue;\n\n          }\n\n          if ( next === null ) {\n\n            keyframe.value[ property ] = prev.value[ property ];\n            continue;\n\n          }\n\n          interpolate( keyframe, prev, next, property );\n\n        }\n\n      }\n\n    }\n\n    function getPrev( keyframes, i, property ) {\n\n      while ( i >= 0 ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] !== null ) return keyframe;\n\n        i --;\n\n      }\n\n      return null;\n\n    }\n\n    function getNext( keyframes, i, property ) {\n\n      while ( i < keyframes.length ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] !== null ) return keyframe;\n\n        i ++;\n\n      }\n\n      return null;\n\n    }\n\n    function interpolate( key, prev, next, property ) {\n\n      if ( ( next.time - prev.time ) === 0 ) {\n\n        key.value[ property ] = prev.value[ property ];\n        return;\n\n      }\n\n      key.value[ property ] = ( ( key.time - prev.time ) * ( next.value[ property ] - prev.value[ property ] ) / ( next.time - prev.time ) ) + prev.value[ property ];\n\n    }\n\n    // animation clips\n\n    function parseAnimationClip( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'id' ) || 'default',\n        start: parseFloat( xml.getAttribute( 'start' ) || 0 ),\n        end: parseFloat( xml.getAttribute( 'end' ) || 0 ),\n        animations: []\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'instance_animation':\n            data.animations.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n        }\n\n      }\n\n      library.clips[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildAnimationClip( data ) {\n\n      var tracks = [];\n\n      var name = data.name;\n      var duration = ( data.end - data.start ) || - 1;\n      var animations = data.animations;\n\n      for ( var i = 0, il = animations.length; i < il; i ++ ) {\n\n        var animationTracks = getAnimation( animations[ i ] );\n\n        for ( var j = 0, jl = animationTracks.length; j < jl; j ++ ) {\n\n          tracks.push( animationTracks[ j ] );\n\n        }\n\n      }\n\n      return new THREE.AnimationClip( name, duration, tracks );\n\n    }\n\n    function getAnimationClip( id ) {\n\n      return getBuild( library.clips[ id ], buildAnimationClip );\n\n    }\n\n    // controller\n\n    function parseController( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'skin':\n            // there is exactly one skin per controller\n            data.id = parseId( child.getAttribute( 'source' ) );\n            data.skin = parseSkin( child );\n            break;\n\n          case 'morph':\n            data.id = parseId( child.getAttribute( 'source' ) );\n            console.warn( 'THREE.ColladaLoader: Morph target animation not supported yet.' );\n            break;\n\n        }\n\n      }\n\n      library.controllers[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseSkin( xml ) {\n\n      var data = {\n        sources: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'bind_shape_matrix':\n            data.bindShapeMatrix = parseFloats( child.textContent );\n            break;\n\n          case 'source':\n            var id = child.getAttribute( 'id' );\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'joints':\n            data.joints = parseJoints( child );\n            break;\n\n          case 'vertex_weights':\n            data.vertexWeights = parseVertexWeights( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseJoints( xml ) {\n\n      var data = {\n        inputs: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var semantic = child.getAttribute( 'semantic' );\n            var id = parseId( child.getAttribute( 'source' ) );\n            data.inputs[ semantic ] = id;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseVertexWeights( xml ) {\n\n      var data = {\n        inputs: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var semantic = child.getAttribute( 'semantic' );\n            var id = parseId( child.getAttribute( 'source' ) );\n            var offset = parseInt( child.getAttribute( 'offset' ) );\n            data.inputs[ semantic ] = { id: id, offset: offset };\n            break;\n\n          case 'vcount':\n            data.vcount = parseInts( child.textContent );\n            break;\n\n          case 'v':\n            data.v = parseInts( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildController( data ) {\n\n      var build = {\n        id: data.id\n      };\n\n      var geometry = library.geometries[ build.id ];\n\n      if ( data.skin !== undefined ) {\n\n        build.skin = buildSkin( data.skin );\n\n        // we enhance the 'sources' property of the corresponding geometry with our skin data\n\n        geometry.sources.skinIndices = build.skin.indices;\n        geometry.sources.skinWeights = build.skin.weights;\n\n      }\n\n      return build;\n\n    }\n\n    function buildSkin( data ) {\n\n      var BONE_LIMIT = 4;\n\n      var build = {\n        joints: [], // this must be an array to preserve the joint order\n        indices: {\n          array: [],\n          stride: BONE_LIMIT\n        },\n        weights: {\n          array: [],\n          stride: BONE_LIMIT\n        }\n      };\n\n      var sources = data.sources;\n      var vertexWeights = data.vertexWeights;\n\n      var vcount = vertexWeights.vcount;\n      var v = vertexWeights.v;\n      var jointOffset = vertexWeights.inputs.JOINT.offset;\n      var weightOffset = vertexWeights.inputs.WEIGHT.offset;\n\n      var jointSource = data.sources[ data.joints.inputs.JOINT ];\n      var inverseSource = data.sources[ data.joints.inputs.INV_BIND_MATRIX ];\n\n      var weights = sources[ vertexWeights.inputs.WEIGHT.id ].array;\n      var stride = 0;\n\n      var i, j, l;\n\n      // procces skin data for each vertex\n\n      for ( i = 0, l = vcount.length; i < l; i ++ ) {\n\n        var jointCount = vcount[ i ]; // this is the amount of joints that affect a single vertex\n        var vertexSkinData = [];\n\n        for ( j = 0; j < jointCount; j ++ ) {\n\n          var skinIndex = v[ stride + jointOffset ];\n          var weightId = v[ stride + weightOffset ];\n          var skinWeight = weights[ weightId ];\n\n          vertexSkinData.push( { index: skinIndex, weight: skinWeight } );\n\n          stride += 2;\n\n        }\n\n        // we sort the joints in descending order based on the weights.\n        // this ensures, we only procced the most important joints of the vertex\n\n        vertexSkinData.sort( descending );\n\n        // now we provide for each vertex a set of four index and weight values.\n        // the order of the skin data matches the order of vertices\n\n        for ( j = 0; j < BONE_LIMIT; j ++ ) {\n\n          var d = vertexSkinData[ j ];\n\n          if ( d !== undefined ) {\n\n            build.indices.array.push( d.index );\n            build.weights.array.push( d.weight );\n\n          } else {\n\n            build.indices.array.push( 0 );\n            build.weights.array.push( 0 );\n\n          }\n\n        }\n\n      }\n\n      // setup bind matrix\n\n      if ( data.bindShapeMatrix ) {\n\n        build.bindMatrix = new THREE.Matrix4().fromArray( data.bindShapeMatrix ).transpose();\n\n      } else {\n\n        build.bindMatrix = new THREE.Matrix4().identity();\n\n      }\n\n      // process bones and inverse bind matrix data\n\n      for ( i = 0, l = jointSource.array.length; i < l; i ++ ) {\n\n        var name = jointSource.array[ i ];\n        var boneInverse = new THREE.Matrix4().fromArray( inverseSource.array, i * inverseSource.stride ).transpose();\n\n        build.joints.push( { name: name, boneInverse: boneInverse } );\n\n      }\n\n      return build;\n\n      // array sort function\n\n      function descending( a, b ) {\n\n        return b.weight - a.weight;\n\n      }\n\n    }\n\n    function getController( id ) {\n\n      return getBuild( library.controllers[ id ], buildController );\n\n    }\n\n    // image\n\n    function parseImage( xml ) {\n\n      var data = {\n        init_from: getElementsByTagName( xml, 'init_from' )[ 0 ].textContent\n      };\n\n      library.images[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildImage( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data.init_from;\n\n    }\n\n    function getImage( id ) {\n\n      var data = library.images[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildImage );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find image with ID:', id );\n\n      return null;\n\n    }\n\n    // effect\n\n    function parseEffect( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'profile_COMMON':\n            data.profile = parseEffectProfileCOMMON( child );\n            break;\n\n        }\n\n      }\n\n      library.effects[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseEffectProfileCOMMON( xml ) {\n\n      var data = {\n        surfaces: {},\n        samplers: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'newparam':\n            parseEffectNewparam( child, data );\n            break;\n\n          case 'technique':\n            data.technique = parseEffectTechnique( child );\n            break;\n\n          case 'extra':\n            data.extra = parseEffectExtra( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectNewparam( xml, data ) {\n\n      var sid = xml.getAttribute( 'sid' );\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'surface':\n            data.surfaces[ sid ] = parseEffectSurface( child );\n            break;\n\n          case 'sampler2D':\n            data.samplers[ sid ] = parseEffectSampler( child );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectSurface( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'init_from':\n            data.init_from = child.textContent;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectSampler( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            data.source = child.textContent;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'constant':\n          case 'lambert':\n          case 'blinn':\n          case 'phong':\n            data.type = child.nodeName;\n            data.parameters = parseEffectParameters( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'emission':\n          case 'diffuse':\n          case 'specular':\n          case 'bump':\n          case 'ambient':\n          case 'shininess':\n          case 'transparency':\n            data[ child.nodeName ] = parseEffectParameter( child );\n            break;\n          case 'transparent':\n            data[ child.nodeName ] = {\n              opaque: child.getAttribute( 'opaque' ),\n              data: parseEffectParameter( child )\n            };\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameter( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'color':\n            data[ child.nodeName ] = parseFloats( child.textContent );\n            break;\n\n          case 'float':\n            data[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n          case 'texture':\n            data[ child.nodeName ] = { id: child.getAttribute( 'texture' ), extra: parseEffectParameterTexture( child ) };\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameterTexture( xml ) {\n\n      var data = {\n        technique: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'extra':\n            parseEffectParameterTextureExtra( child, data );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameterTextureExtra( xml, data ) {\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique':\n            parseEffectParameterTextureExtraTechnique( child, data );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectParameterTextureExtraTechnique( xml, data ) {\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'repeatU':\n          case 'repeatV':\n          case 'offsetU':\n          case 'offsetV':\n            data.technique[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n          case 'wrapU':\n          case 'wrapV':\n\n            // some files have values for wrapU/wrapV which become NaN via parseInt\n\n            if ( child.textContent.toUpperCase() === 'TRUE' ) {\n\n              data.technique[ child.nodeName ] = 1;\n\n            } else if ( child.textContent.toUpperCase() === 'FALSE' ) {\n\n              data.technique[ child.nodeName ] = 0;\n\n            } else {\n\n              data.technique[ child.nodeName ] = parseInt( child.textContent );\n\n            }\n\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectExtra( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique':\n            data.technique = parseEffectExtraTechnique( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectExtraTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'double_sided':\n            data[ child.nodeName ] = parseInt( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildEffect( data ) {\n\n      return data;\n\n    }\n\n    function getEffect( id ) {\n\n      return getBuild( library.effects[ id ], buildEffect );\n\n    }\n\n    // material\n\n    function parseMaterial( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' )\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'instance_effect':\n            data.url = parseId( child.getAttribute( 'url' ) );\n            break;\n\n        }\n\n      }\n\n      library.materials[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function getTextureLoader( image ) {\n\n      var loader;\n\n      var extension = image.slice( ( image.lastIndexOf( '.' ) - 1 >>> 0 ) + 2 ); // http://www.jstips.co/en/javascript/get-file-extension/\n      extension = extension.toLowerCase();\n\n      switch ( extension ) {\n\n        case 'tga':\n          loader = tgaLoader;\n          break;\n\n        default:\n          loader = textureLoader;\n\n      }\n\n      return loader;\n\n    }\n\n    function buildMaterial( data ) {\n\n      var effect = getEffect( data.url );\n      var technique = effect.profile.technique;\n      var extra = effect.profile.extra;\n\n      var material;\n\n      switch ( technique.type ) {\n\n        case 'phong':\n        case 'blinn':\n          material = new THREE.MeshPhongMaterial();\n          break;\n\n        case 'lambert':\n          material = new THREE.MeshLambertMaterial();\n          break;\n\n        default:\n          material = new THREE.MeshBasicMaterial();\n          break;\n\n      }\n\n      material.name = data.name;\n\n      function getTexture( textureObject ) {\n\n        var sampler = effect.profile.samplers[ textureObject.id ];\n        var image = null;\n\n        // get image\n\n        if ( sampler !== undefined ) {\n\n          var surface = effect.profile.surfaces[ sampler.source ];\n          image = getImage( surface.init_from );\n\n        } else {\n\n          console.warn( 'THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).' );\n          image = getImage( textureObject.id );\n\n        }\n\n        // create texture if image is avaiable\n\n        if ( image !== null ) {\n\n          var loader = getTextureLoader( image );\n\n          if ( loader !== undefined ) {\n\n            var texture = loader.load( image );\n\n            var extra = textureObject.extra;\n\n            if ( extra !== undefined && extra.technique !== undefined && isEmpty( extra.technique ) === false ) {\n\n              var technique = extra.technique;\n\n              texture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n              texture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n              texture.offset.set( technique.offsetU || 0, technique.offsetV || 0 );\n              texture.repeat.set( technique.repeatU || 1, technique.repeatV || 1 );\n\n            } else {\n\n              texture.wrapS = THREE.RepeatWrapping;\n              texture.wrapT = THREE.RepeatWrapping;\n\n            }\n\n            return texture;\n\n          } else {\n\n            console.warn( 'THREE.ColladaLoader: Loader for texture %s not found.', image );\n\n            return null;\n\n          }\n\n        } else {\n\n          console.warn( 'THREE.ColladaLoader: Couldn\\'t create texture with ID:', textureObject.id );\n\n          return null;\n\n        }\n\n      }\n\n      var parameters = technique.parameters;\n\n      for ( var key in parameters ) {\n\n        var parameter = parameters[ key ];\n\n        switch ( key ) {\n\n          case 'diffuse':\n            if ( parameter.color ) material.color.fromArray( parameter.color );\n            if ( parameter.texture ) material.map = getTexture( parameter.texture );\n            break;\n          case 'specular':\n            if ( parameter.color && material.specular ) material.specular.fromArray( parameter.color );\n            if ( parameter.texture ) material.specularMap = getTexture( parameter.texture );\n            break;\n          case 'bump':\n            if ( parameter.texture ) material.normalMap = getTexture( parameter.texture );\n            break;\n          case 'ambient':\n            if ( parameter.texture ) material.lightMap = getTexture( parameter.texture );\n            break;\n          case 'shininess':\n            if ( parameter.float && material.shininess ) material.shininess = parameter.float;\n            break;\n          case 'emission':\n            if ( parameter.color && material.emissive ) material.emissive.fromArray( parameter.color );\n            if ( parameter.texture ) material.emissiveMap = getTexture( parameter.texture );\n            break;\n\n        }\n\n      }\n\n      //\n\n      var transparent = parameters[ 'transparent' ];\n      var transparency = parameters[ 'transparency' ];\n\n      // <transparency> does not exist but <transparent>\n\n      if ( transparency === undefined && transparent ) {\n\n        transparency = {\n          float: 1\n        };\n\n      }\n\n      // <transparent> does not exist but <transparency>\n\n      if ( transparent === undefined && transparency ) {\n\n        transparent = {\n          opaque: 'A_ONE',\n          data: {\n            color: [ 1, 1, 1, 1 ]\n          } };\n\n      }\n\n      if ( transparent && transparency ) {\n\n        // handle case if a texture exists but no color\n\n        if ( transparent.data.texture ) {\n\n          // we do not set an alpha map (see #13792)\n\n          material.transparent = true;\n\n        } else {\n\n          var color = transparent.data.color;\n\n          switch ( transparent.opaque ) {\n\n            case 'A_ONE':\n              material.opacity = color[ 3 ] * transparency.float;\n              break;\n            case 'RGB_ZERO':\n              material.opacity = 1 - ( color[ 0 ] * transparency.float );\n              break;\n            case 'A_ZERO':\n              material.opacity = 1 - ( color[ 3 ] * transparency.float );\n              break;\n            case 'RGB_ONE':\n              material.opacity = color[ 0 ] * transparency.float;\n              break;\n            default:\n              console.warn( 'THREE.ColladaLoader: Invalid opaque type \"%s\" of transparent tag.', transparent.opaque );\n\n          }\n\n          if ( material.opacity < 1 ) material.transparent = true;\n\n        }\n\n      }\n\n      //\n\n      if ( extra !== undefined && extra.technique !== undefined && extra.technique.double_sided === 1 ) {\n\n        material.side = THREE.DoubleSide;\n\n      }\n\n      return material;\n\n    }\n\n    function getMaterial( id ) {\n\n      return getBuild( library.materials[ id ], buildMaterial );\n\n    }\n\n    // camera\n\n    function parseCamera( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' )\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'optics':\n            data.optics = parseCameraOptics( child );\n            break;\n\n        }\n\n      }\n\n      library.cameras[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseCameraOptics( xml ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            return parseCameraTechnique( child );\n\n        }\n\n      }\n\n      return {};\n\n    }\n\n    function parseCameraTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'perspective':\n          case 'orthographic':\n\n            data.technique = child.nodeName;\n            data.parameters = parseCameraParameters( child );\n\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseCameraParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'xfov':\n          case 'yfov':\n          case 'xmag':\n          case 'ymag':\n          case 'znear':\n          case 'zfar':\n          case 'aspect_ratio':\n            data[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildCamera( data ) {\n\n      var camera;\n\n      switch ( data.optics.technique ) {\n\n        case 'perspective':\n          camera = new THREE.PerspectiveCamera(\n            data.optics.parameters.yfov,\n            data.optics.parameters.aspect_ratio,\n            data.optics.parameters.znear,\n            data.optics.parameters.zfar\n          );\n          break;\n\n        case 'orthographic':\n          var ymag = data.optics.parameters.ymag;\n          var xmag = data.optics.parameters.xmag;\n          var aspectRatio = data.optics.parameters.aspect_ratio;\n\n          xmag = ( xmag === undefined ) ? ( ymag * aspectRatio ) : xmag;\n          ymag = ( ymag === undefined ) ? ( xmag / aspectRatio ) : ymag;\n\n          xmag *= 0.5;\n          ymag *= 0.5;\n\n          camera = new THREE.OrthographicCamera(\n            - xmag, xmag, ymag, - ymag, // left, right, top, bottom\n            data.optics.parameters.znear,\n            data.optics.parameters.zfar\n          );\n          break;\n\n        default:\n          camera = new THREE.PerspectiveCamera();\n          break;\n\n      }\n\n      camera.name = data.name;\n\n      return camera;\n\n    }\n\n    function getCamera( id ) {\n\n      var data = library.cameras[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildCamera );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find camera with ID:', id );\n\n      return null;\n\n    }\n\n    // light\n\n    function parseLight( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            data = parseLightTechnique( child );\n            break;\n\n        }\n\n      }\n\n      library.lights[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseLightTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'directional':\n          case 'point':\n          case 'spot':\n          case 'ambient':\n\n            data.technique = child.nodeName;\n            data.parameters = parseLightParameters( child );\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseLightParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'color':\n            var array = parseFloats( child.textContent );\n            data.color = new THREE.Color().fromArray( array );\n            break;\n\n          case 'falloff_angle':\n            data.falloffAngle = parseFloat( child.textContent );\n            break;\n\n          case 'quadratic_attenuation':\n            var f = parseFloat( child.textContent );\n            data.distance = f ? Math.sqrt( 1 / f ) : 0;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildLight( data ) {\n\n      var light;\n\n      switch ( data.technique ) {\n\n        case 'directional':\n          light = new THREE.DirectionalLight();\n          break;\n\n        case 'point':\n          light = new THREE.PointLight();\n          break;\n\n        case 'spot':\n          light = new THREE.SpotLight();\n          break;\n\n        case 'ambient':\n          light = new THREE.AmbientLight();\n          break;\n\n      }\n\n      if ( data.parameters.color ) light.color.copy( data.parameters.color );\n      if ( data.parameters.distance ) light.distance = data.parameters.distance;\n\n      return light;\n\n    }\n\n    function getLight( id ) {\n\n      var data = library.lights[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildLight );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find light with ID:', id );\n\n      return null;\n\n    }\n\n    // geometry\n\n    function parseGeometry( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ),\n        sources: {},\n        vertices: {},\n        primitives: []\n      };\n\n      var mesh = getElementsByTagName( xml, 'mesh' )[ 0 ];\n\n      // the following tags inside geometry are not supported yet (see https://github.com/mrdoob/three.js/pull/12606): convex_mesh, spline, brep\n      if ( mesh === undefined ) return;\n\n      for ( var i = 0; i < mesh.childNodes.length; i ++ ) {\n\n        var child = mesh.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        var id = child.getAttribute( 'id' );\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'vertices':\n            // data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];\n            data.vertices = parseGeometryVertices( child );\n            break;\n\n          case 'polygons':\n            console.warn( 'THREE.ColladaLoader: Unsupported primitive type: ', child.nodeName );\n            break;\n\n          case 'lines':\n          case 'linestrips':\n          case 'polylist':\n          case 'triangles':\n            data.primitives.push( parseGeometryPrimitive( child ) );\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      library.geometries[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseSource( xml ) {\n\n      var data = {\n        array: [],\n        stride: 3\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'float_array':\n            data.array = parseFloats( child.textContent );\n            break;\n\n          case 'Name_array':\n            data.array = parseStrings( child.textContent );\n            break;\n\n          case 'technique_common':\n            var accessor = getElementsByTagName( child, 'accessor' )[ 0 ];\n\n            if ( accessor !== undefined ) {\n\n              data.stride = parseInt( accessor.getAttribute( 'stride' ) );\n\n            }\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseGeometryVertices( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        data[ child.getAttribute( 'semantic' ) ] = parseId( child.getAttribute( 'source' ) );\n\n      }\n\n      return data;\n\n    }\n\n    function parseGeometryPrimitive( xml ) {\n\n      var primitive = {\n        type: xml.nodeName,\n        material: xml.getAttribute( 'material' ),\n        count: parseInt( xml.getAttribute( 'count' ) ),\n        inputs: {},\n        stride: 0,\n        hasUV: false\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var id = parseId( child.getAttribute( 'source' ) );\n            var semantic = child.getAttribute( 'semantic' );\n            var offset = parseInt( child.getAttribute( 'offset' ) );\n            var set = parseInt( child.getAttribute( 'set' ) );\n            var inputname = ( set > 0 ? semantic + set : semantic );\n            primitive.inputs[ inputname ] = { id: id, offset: offset };\n            primitive.stride = Math.max( primitive.stride, offset + 1 );\n            if ( semantic === 'TEXCOORD' ) primitive.hasUV = true;\n            break;\n\n          case 'vcount':\n            primitive.vcount = parseInts( child.textContent );\n            break;\n\n          case 'p':\n            primitive.p = parseInts( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return primitive;\n\n    }\n\n    function groupPrimitives( primitives ) {\n\n      var build = {};\n\n      for ( var i = 0; i < primitives.length; i ++ ) {\n\n        var primitive = primitives[ i ];\n\n        if ( build[ primitive.type ] === undefined ) build[ primitive.type ] = [];\n\n        build[ primitive.type ].push( primitive );\n\n      }\n\n      return build;\n\n    }\n\n    function checkUVCoordinates( primitives ) {\n\n      var count = 0;\n\n      for ( var i = 0, l = primitives.length; i < l; i ++ ) {\n\n        var primitive = primitives[ i ];\n\n        if ( primitive.hasUV === true ) {\n\n          count ++;\n\n        }\n\n      }\n\n      if ( count > 0 && count < primitives.length ) {\n\n        primitives.uvsNeedsFix = true;\n\n      }\n\n    }\n\n    function buildGeometry( data ) {\n\n      var build = {};\n\n      var sources = data.sources;\n      var vertices = data.vertices;\n      var primitives = data.primitives;\n\n      if ( primitives.length === 0 ) return {};\n\n      // our goal is to create one buffer geometry for a single type of primitives\n      // first, we group all primitives by their type\n\n      var groupedPrimitives = groupPrimitives( primitives );\n\n      for ( var type in groupedPrimitives ) {\n\n        var primitiveType = groupedPrimitives[ type ];\n\n        // second, ensure consistent uv coordinates for each type of primitives (polylist,triangles or lines)\n\n        checkUVCoordinates( primitiveType );\n\n        // third, create a buffer geometry for each type of primitives\n\n        build[ type ] = buildGeometryType( primitiveType, sources, vertices );\n\n      }\n\n      return build;\n\n    }\n\n    function buildGeometryType( primitives, sources, vertices ) {\n\n      var build = {};\n\n      var position = { array: [], stride: 0 };\n      var normal = { array: [], stride: 0 };\n      var uv = { array: [], stride: 0 };\n      var uv2 = { array: [], stride: 0 };\n      var color = { array: [], stride: 0 };\n\n      var skinIndex = { array: [], stride: 4 };\n      var skinWeight = { array: [], stride: 4 };\n\n      var geometry = new THREE.BufferGeometry();\n\n      var materialKeys = [];\n\n      var start = 0;\n\n      for ( var p = 0; p < primitives.length; p ++ ) {\n\n        var primitive = primitives[ p ];\n        var inputs = primitive.inputs;\n\n        // groups\n\n        var count = 0;\n\n        switch ( primitive.type ) {\n\n          case 'lines':\n          case 'linestrips':\n            count = primitive.count * 2;\n            break;\n\n          case 'triangles':\n            count = primitive.count * 3;\n            break;\n\n          case 'polylist':\n\n            for ( var g = 0; g < primitive.count; g ++ ) {\n\n              var vc = primitive.vcount[ g ];\n\n              switch ( vc ) {\n\n                case 3:\n                  count += 3; // single triangle\n                  break;\n\n                case 4:\n                  count += 6; // quad, subdivided into two triangles\n                  break;\n\n                default:\n                  count += ( vc - 2 ) * 3; // polylist with more than four vertices\n                  break;\n\n              }\n\n            }\n\n            break;\n\n          default:\n            console.warn( 'THREE.ColladaLoader: Unknow primitive type:', primitive.type );\n\n        }\n\n        geometry.addGroup( start, count, p );\n        start += count;\n\n        // material\n\n        if ( primitive.material ) {\n\n          materialKeys.push( primitive.material );\n\n        }\n\n        // geometry data\n\n        for ( var name in inputs ) {\n\n          var input = inputs[ name ];\n\n          switch ( name ) {\n\n            case 'VERTEX':\n              for ( var key in vertices ) {\n\n                var id = vertices[ key ];\n\n                switch ( key ) {\n\n                  case 'POSITION':\n                    var prevLength = position.array.length;\n                    buildGeometryData( primitive, sources[ id ], input.offset, position.array );\n                    position.stride = sources[ id ].stride;\n\n                    if ( sources.skinWeights && sources.skinIndices ) {\n\n                      buildGeometryData( primitive, sources.skinIndices, input.offset, skinIndex.array );\n                      buildGeometryData( primitive, sources.skinWeights, input.offset, skinWeight.array );\n\n                    }\n\n                    // see #3803\n\n                    if ( primitive.hasUV === false && primitives.uvsNeedsFix === true ) {\n\n                      var count = ( position.array.length - prevLength ) / position.stride;\n\n                      for ( var i = 0; i < count; i ++ ) {\n\n                        // fill missing uv coordinates\n\n                        uv.array.push( 0, 0 );\n\n                      }\n\n                    }\n                    break;\n\n                  case 'NORMAL':\n                    buildGeometryData( primitive, sources[ id ], input.offset, normal.array );\n                    normal.stride = sources[ id ].stride;\n                    break;\n\n                  case 'COLOR':\n                    buildGeometryData( primitive, sources[ id ], input.offset, color.array );\n                    color.stride = sources[ id ].stride;\n                    break;\n\n                  case 'TEXCOORD':\n                    buildGeometryData( primitive, sources[ id ], input.offset, uv.array );\n                    uv.stride = sources[ id ].stride;\n                    break;\n\n                  case 'TEXCOORD1':\n                    buildGeometryData( primitive, sources[ id ], input.offset, uv2.array );\n                    uv.stride = sources[ id ].stride;\n                    break;\n\n                  default:\n                    console.warn( 'THREE.ColladaLoader: Semantic \"%s\" not handled in geometry build process.', key );\n\n                }\n\n              }\n              break;\n\n            case 'NORMAL':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, normal.array );\n              normal.stride = sources[ input.id ].stride;\n              break;\n\n            case 'COLOR':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, color.array );\n              color.stride = sources[ input.id ].stride;\n              break;\n\n            case 'TEXCOORD':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, uv.array );\n              uv.stride = sources[ input.id ].stride;\n              break;\n\n            case 'TEXCOORD1':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, uv2.array );\n              uv2.stride = sources[ input.id ].stride;\n              break;\n\n          }\n\n        }\n\n      }\n\n      // build geometry\n\n      if ( position.array.length > 0 ) geometry.addAttribute( 'position', new THREE.Float32BufferAttribute( position.array, position.stride ) );\n      if ( normal.array.length > 0 ) geometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( normal.array, normal.stride ) );\n      if ( color.array.length > 0 ) geometry.addAttribute( 'color', new THREE.Float32BufferAttribute( color.array, color.stride ) );\n      if ( uv.array.length > 0 ) geometry.addAttribute( 'uv', new THREE.Float32BufferAttribute( uv.array, uv.stride ) );\n      if ( uv2.array.length > 0 ) geometry.addAttribute( 'uv2', new THREE.Float32BufferAttribute( uv2.array, uv2.stride ) );\n\n      if ( skinIndex.array.length > 0 ) geometry.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( skinIndex.array, skinIndex.stride ) );\n      if ( skinWeight.array.length > 0 ) geometry.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( skinWeight.array, skinWeight.stride ) );\n\n      build.data = geometry;\n      build.type = primitives[ 0 ].type;\n      build.materialKeys = materialKeys;\n\n      return build;\n\n    }\n\n    function buildGeometryData( primitive, source, offset, array ) {\n\n      var indices = primitive.p;\n      var stride = primitive.stride;\n      var vcount = primitive.vcount;\n\n      function pushVector( i ) {\n\n        var index = indices[ i + offset ] * sourceStride;\n        var length = index + sourceStride;\n\n        for ( ; index < length; index ++ ) {\n\n          array.push( sourceArray[ index ] );\n\n        }\n\n      }\n\n      var sourceArray = source.array;\n      var sourceStride = source.stride;\n\n      if ( primitive.vcount !== undefined ) {\n\n        var index = 0;\n\n        for ( var i = 0, l = vcount.length; i < l; i ++ ) {\n\n          var count = vcount[ i ];\n\n          if ( count === 4 ) {\n\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n            var d = index + stride * 3;\n\n            pushVector( a ); pushVector( b ); pushVector( d );\n            pushVector( b ); pushVector( c ); pushVector( d );\n\n          } else if ( count === 3 ) {\n\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n\n            pushVector( a ); pushVector( b ); pushVector( c );\n\n          } else if ( count > 4 ) {\n\n            for ( var k = 1, kl = ( count - 2 ); k <= kl; k ++ ) {\n\n              var a = index + stride * 0;\n              var b = index + stride * k;\n              var c = index + stride * ( k + 1 );\n\n              pushVector( a ); pushVector( b ); pushVector( c );\n\n            }\n\n          }\n\n          index += stride * count;\n\n        }\n\n      } else {\n\n        for ( var i = 0, l = indices.length; i < l; i += stride ) {\n\n          pushVector( i );\n\n        }\n\n      }\n\n    }\n\n    function getGeometry( id ) {\n\n      return getBuild( library.geometries[ id ], buildGeometry );\n\n    }\n\n    // kinematics\n\n    function parseKinematicsModel( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        joints: {},\n        links: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            parseKinematicsTechniqueCommon( child, data );\n            break;\n\n        }\n\n      }\n\n      library.kinematicsModels[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildKinematicsModel( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data;\n\n    }\n\n    function getKinematicsModel( id ) {\n\n      return getBuild( library.kinematicsModels[ id ], buildKinematicsModel );\n\n    }\n\n    function parseKinematicsTechniqueCommon( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'joint':\n            data.joints[ child.getAttribute( 'sid' ) ] = parseKinematicsJoint( child );\n            break;\n\n          case 'link':\n            data.links.push( parseKinematicsLink( child ) );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseKinematicsJoint( xml ) {\n\n      var data;\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'prismatic':\n          case 'revolute':\n            data = parseKinematicsJointParameter( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsJointParameter( xml, data ) {\n\n      var data = {\n        sid: xml.getAttribute( 'sid' ),\n        name: xml.getAttribute( 'name' ) || '',\n        axis: new THREE.Vector3(),\n        limits: {\n          min: 0,\n          max: 0\n        },\n        type: xml.nodeName,\n        static: false,\n        zeroPosition: 0,\n        middlePosition: 0\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'axis':\n            var array = parseFloats( child.textContent );\n            data.axis.fromArray( array );\n            break;\n          case 'limits':\n            var max = child.getElementsByTagName( 'max' )[ 0 ];\n            var min = child.getElementsByTagName( 'min' )[ 0 ];\n\n            data.limits.max = parseFloat( max.textContent );\n            data.limits.min = parseFloat( min.textContent );\n            break;\n\n        }\n\n      }\n\n      // if min is equal to or greater than max, consider the joint static\n\n      if ( data.limits.min >= data.limits.max ) {\n\n        data.static = true;\n\n      }\n\n      // calculate middle position\n\n      data.middlePosition = ( data.limits.min + data.limits.max ) / 2.0;\n\n      return data;\n\n    }\n\n    function parseKinematicsLink( xml ) {\n\n      var data = {\n        sid: xml.getAttribute( 'sid' ),\n        name: xml.getAttribute( 'name' ) || '',\n        attachments: [],\n        transforms: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'attachment_full':\n            data.attachments.push( parseKinematicsAttachment( child ) );\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push( parseKinematicsTransform( child ) );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsAttachment( xml ) {\n\n      var data = {\n        joint: xml.getAttribute( 'joint' ).split( '/' ).pop(),\n        transforms: [],\n        links: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'link':\n            data.links.push( parseKinematicsLink( child ) );\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push( parseKinematicsTransform( child ) );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsTransform( xml ) {\n\n      var data = {\n        type: xml.nodeName\n      };\n\n      var array = parseFloats( xml.textContent );\n\n      switch ( data.type ) {\n\n        case 'matrix':\n          data.obj = new THREE.Matrix4();\n          data.obj.fromArray( array ).transpose();\n          break;\n\n        case 'translate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray( array );\n          break;\n\n        case 'rotate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray( array );\n          data.angle = THREE.MathUtils.degToRad( array[ 3 ] );\n          break;\n\n      }\n\n      return data;\n\n    }\n\n    // physics\n\n    function parsePhysicsModel( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        rigidBodies: {}\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'rigid_body':\n            data.rigidBodies[ child.getAttribute( 'name' ) ] = {};\n            parsePhysicsRigidBody( child, data.rigidBodies[ child.getAttribute( 'name' ) ] );\n            break;\n\n        }\n\n      }\n\n      library.physicsModels[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parsePhysicsRigidBody( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            parsePhysicsTechniqueCommon( child, data );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parsePhysicsTechniqueCommon( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'inertia':\n            data.inertia = parseFloats( child.textContent );\n            break;\n\n          case 'mass':\n            data.mass = parseFloats( child.textContent )[ 0 ];\n            break;\n\n        }\n\n      }\n\n    }\n\n    // scene\n\n    function parseKinematicsScene( xml ) {\n\n      var data = {\n        bindJointAxis: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'bind_joint_axis':\n            data.bindJointAxis.push( parseKinematicsBindJointAxis( child ) );\n            break;\n\n        }\n\n      }\n\n      library.kinematicsScenes[ parseId( xml.getAttribute( 'url' ) ) ] = data;\n\n    }\n\n    function parseKinematicsBindJointAxis( xml ) {\n\n      var data = {\n        target: xml.getAttribute( 'target' ).split( '/' ).pop()\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'axis':\n            var param = child.getElementsByTagName( 'param' )[ 0 ];\n            data.axis = param.textContent;\n            var tmpJointIndex = data.axis.split( 'inst_' ).pop().split( 'axis' )[ 0 ];\n            data.jointIndex = tmpJointIndex.substr( 0, tmpJointIndex.length - 1 );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildKinematicsScene( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data;\n\n    }\n\n    function getKinematicsScene( id ) {\n\n      return getBuild( library.kinematicsScenes[ id ], buildKinematicsScene );\n\n    }\n\n    function setupKinematics() {\n\n      var kinematicsModelId = Object.keys( library.kinematicsModels )[ 0 ];\n      var kinematicsSceneId = Object.keys( library.kinematicsScenes )[ 0 ];\n      var visualSceneId = Object.keys( library.visualScenes )[ 0 ];\n\n      if ( kinematicsModelId === undefined || kinematicsSceneId === undefined ) return;\n\n      var kinematicsModel = getKinematicsModel( kinematicsModelId );\n      var kinematicsScene = getKinematicsScene( kinematicsSceneId );\n      var visualScene = getVisualScene( visualSceneId );\n\n      var bindJointAxis = kinematicsScene.bindJointAxis;\n      var jointMap = {};\n\n      for ( var i = 0, l = bindJointAxis.length; i < l; i ++ ) {\n\n        var axis = bindJointAxis[ i ];\n\n        // the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'\n\n        var targetElement = collada.querySelector( '[sid=\"' + axis.target + '\"]' );\n\n        if ( targetElement ) {\n\n          // get the parent of the transfrom element\n\n          var parentVisualElement = targetElement.parentElement;\n\n          // connect the joint of the kinematics model with the element in the visual scene\n\n          connect( axis.jointIndex, parentVisualElement );\n\n        }\n\n      }\n\n      function connect( jointIndex, visualElement ) {\n\n        var visualElementName = visualElement.getAttribute( 'name' );\n        var joint = kinematicsModel.joints[ jointIndex ];\n\n        visualScene.traverse( function ( object ) {\n\n          if ( object.name === visualElementName ) {\n\n            jointMap[ jointIndex ] = {\n              object: object,\n              transforms: buildTransformList( visualElement ),\n              joint: joint,\n              position: joint.zeroPosition\n            };\n\n          }\n\n        } );\n\n      }\n\n      var m0 = new THREE.Matrix4();\n\n      kinematics = {\n\n        joints: kinematicsModel && kinematicsModel.joints,\n\n        getJointValue: function ( jointIndex ) {\n\n          var jointData = jointMap[ jointIndex ];\n\n          if ( jointData ) {\n\n            return jointData.position;\n\n          } else {\n\n            console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' doesn\\'t exist.' );\n\n          }\n\n        },\n\n        setJointValue: function ( jointIndex, value ) {\n\n          var jointData = jointMap[ jointIndex ];\n\n          if ( jointData ) {\n\n            var joint = jointData.joint;\n\n            if ( value > joint.limits.max || value < joint.limits.min ) {\n\n              console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').' );\n\n            } else if ( joint.static ) {\n\n              console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' is static.' );\n\n            } else {\n\n              var object = jointData.object;\n              var axis = joint.axis;\n              var transforms = jointData.transforms;\n\n              matrix.identity();\n\n              // each update, we have to apply all transforms in the correct order\n\n              for ( var i = 0; i < transforms.length; i ++ ) {\n\n                var transform = transforms[ i ];\n\n                // if there is a connection of the transform node with a joint, apply the joint value\n\n                if ( transform.sid && transform.sid.indexOf( jointIndex ) !== - 1 ) {\n\n                  switch ( joint.type ) {\n\n                    case 'revolute':\n                      matrix.multiply( m0.makeRotationAxis( axis, THREE.MathUtils.degToRad( value ) ) );\n                      break;\n\n                    case 'prismatic':\n                      matrix.multiply( m0.makeTranslation( axis.x * value, axis.y * value, axis.z * value ) );\n                      break;\n\n                    default:\n                      console.warn( 'THREE.ColladaLoader: Unknown joint type: ' + joint.type );\n                      break;\n\n                  }\n\n                } else {\n\n                  switch ( transform.type ) {\n\n                    case 'matrix':\n                      matrix.multiply( transform.obj );\n                      break;\n\n                    case 'translate':\n                      matrix.multiply( m0.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );\n                      break;\n\n                    case 'scale':\n                      matrix.scale( transform.obj );\n                      break;\n\n                    case 'rotate':\n                      matrix.multiply( m0.makeRotationAxis( transform.obj, transform.angle ) );\n                      break;\n\n                  }\n\n                }\n\n              }\n\n              object.matrix.copy( matrix );\n              object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n              jointMap[ jointIndex ].position = value;\n\n            }\n\n          } else {\n\n            console.log( 'THREE.ColladaLoader: ' + jointIndex + ' does not exist.' );\n\n          }\n\n        }\n\n      };\n\n    }\n\n    function buildTransformList( node ) {\n\n      var transforms = [];\n\n      var xml = collada.querySelector( '[id=\"' + node.id + '\"]' );\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'matrix':\n            var array = parseFloats( child.textContent );\n            var matrix = new THREE.Matrix4().fromArray( array ).transpose();\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: matrix\n            } );\n            break;\n\n          case 'translate':\n          case 'scale':\n            var array = parseFloats( child.textContent );\n            var vector = new THREE.Vector3().fromArray( array );\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: vector\n            } );\n            break;\n\n          case 'rotate':\n            var array = parseFloats( child.textContent );\n            var vector = new THREE.Vector3().fromArray( array );\n            var angle = THREE.MathUtils.degToRad( array[ 3 ] );\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: vector,\n              angle: angle\n            } );\n            break;\n\n        }\n\n      }\n\n      return transforms;\n\n    }\n\n    // nodes\n\n    function prepareNodes( xml ) {\n\n      var elements = xml.getElementsByTagName( 'node' );\n\n      // ensure all node elements have id attributes\n\n      for ( var i = 0; i < elements.length; i ++ ) {\n\n        var element = elements[ i ];\n\n        if ( element.hasAttribute( 'id' ) === false ) {\n\n          element.setAttribute( 'id', generateId() );\n\n        }\n\n      }\n\n    }\n\n    var matrix = new THREE.Matrix4();\n    var vector = new THREE.Vector3();\n\n    function parseNode( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        type: xml.getAttribute( 'type' ),\n        id: xml.getAttribute( 'id' ),\n        sid: xml.getAttribute( 'sid' ),\n        matrix: new THREE.Matrix4(),\n        nodes: [],\n        instanceCameras: [],\n        instanceControllers: [],\n        instanceLights: [],\n        instanceGeometries: [],\n        instanceNodes: [],\n        transforms: {}\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'node':\n            data.nodes.push( child.getAttribute( 'id' ) );\n            parseNode( child );\n            break;\n\n          case 'instance_camera':\n            data.instanceCameras.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'instance_controller':\n            data.instanceControllers.push( parseNodeInstance( child ) );\n            break;\n\n          case 'instance_light':\n            data.instanceLights.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'instance_geometry':\n            data.instanceGeometries.push( parseNodeInstance( child ) );\n            break;\n\n          case 'instance_node':\n            data.instanceNodes.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'matrix':\n            var array = parseFloats( child.textContent );\n            data.matrix.multiply( matrix.fromArray( array ).transpose() );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'translate':\n            var array = parseFloats( child.textContent );\n            vector.fromArray( array );\n            data.matrix.multiply( matrix.makeTranslation( vector.x, vector.y, vector.z ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'rotate':\n            var array = parseFloats( child.textContent );\n            var angle = THREE.MathUtils.degToRad( array[ 3 ] );\n            data.matrix.multiply( matrix.makeRotationAxis( vector.fromArray( array ), angle ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'scale':\n            var array = parseFloats( child.textContent );\n            data.matrix.scale( vector.fromArray( array ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'extra':\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      if ( hasNode( data.id ) ) {\n\n        console.warn( 'THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.', data.id );\n\n      } else {\n\n        library.nodes[ data.id ] = data;\n\n      }\n\n      return data;\n\n    }\n\n    function parseNodeInstance( xml ) {\n\n      var data = {\n        id: parseId( xml.getAttribute( 'url' ) ),\n        materials: {},\n        skeletons: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'bind_material':\n            var instances = child.getElementsByTagName( 'instance_material' );\n\n            for ( var j = 0; j < instances.length; j ++ ) {\n\n              var instance = instances[ j ];\n              var symbol = instance.getAttribute( 'symbol' );\n              var target = instance.getAttribute( 'target' );\n\n              data.materials[ symbol ] = parseId( target );\n\n            }\n\n            break;\n\n          case 'skeleton':\n            data.skeletons.push( parseId( child.textContent ) );\n            break;\n\n          default:\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildSkeleton( skeletons, joints ) {\n\n      var boneData = [];\n      var sortedBoneData = [];\n\n      var i, j, data;\n\n      // a skeleton can have multiple root bones. collada expresses this\n      // situtation with multiple \"skeleton\" tags per controller instance\n\n      for ( i = 0; i < skeletons.length; i ++ ) {\n\n        var skeleton = skeletons[ i ];\n\n        var root;\n\n        if ( hasNode( skeleton ) ) {\n\n          root = getNode( skeleton );\n          buildBoneHierarchy( root, joints, boneData );\n\n        } else if ( hasVisualScene( skeleton ) ) {\n\n          // handle case where the skeleton refers to the visual scene (#13335)\n\n          var visualScene = library.visualScenes[ skeleton ];\n          var children = visualScene.children;\n\n          for ( var j = 0; j < children.length; j ++ ) {\n\n            var child = children[ j ];\n\n            if ( child.type === 'JOINT' ) {\n\n              var root = getNode( child.id );\n              buildBoneHierarchy( root, joints, boneData );\n\n            }\n\n          }\n\n        } else {\n\n          console.error( 'THREE.ColladaLoader: Unable to find root bone of skeleton with ID:', skeleton );\n\n        }\n\n      }\n\n      // sort bone data (the order is defined in the corresponding controller)\n\n      for ( i = 0; i < joints.length; i ++ ) {\n\n        for ( j = 0; j < boneData.length; j ++ ) {\n\n          data = boneData[ j ];\n\n          if ( data.bone.name === joints[ i ].name ) {\n\n            sortedBoneData[ i ] = data;\n            data.processed = true;\n            break;\n\n          }\n\n        }\n\n      }\n\n      // add unprocessed bone data at the end of the list\n\n      for ( i = 0; i < boneData.length; i ++ ) {\n\n        data = boneData[ i ];\n\n        if ( data.processed === false ) {\n\n          sortedBoneData.push( data );\n          data.processed = true;\n\n        }\n\n      }\n\n      // setup arrays for skeleton creation\n\n      var bones = [];\n      var boneInverses = [];\n\n      for ( i = 0; i < sortedBoneData.length; i ++ ) {\n\n        data = sortedBoneData[ i ];\n\n        bones.push( data.bone );\n        boneInverses.push( data.boneInverse );\n\n      }\n\n      return new THREE.Skeleton( bones, boneInverses );\n\n    }\n\n    function buildBoneHierarchy( root, joints, boneData ) {\n\n      // setup bone data from visual scene\n\n      root.traverse( function ( object ) {\n\n        if ( object.isBone === true ) {\n\n          var boneInverse;\n\n          // retrieve the boneInverse from the controller data\n\n          for ( var i = 0; i < joints.length; i ++ ) {\n\n            var joint = joints[ i ];\n\n            if ( joint.name === object.name ) {\n\n              boneInverse = joint.boneInverse;\n              break;\n\n            }\n\n          }\n\n          if ( boneInverse === undefined ) {\n\n            // Unfortunately, there can be joints in the visual scene that are not part of the\n            // corresponding controller. In this case, we have to create a dummy boneInverse matrix\n            // for the respective bone. This bone won't affect any vertices, because there are no skin indices\n            // and weights defined for it. But we still have to add the bone to the sorted bone list in order to\n            // ensure a correct animation of the model.\n\n            boneInverse = new THREE.Matrix4();\n\n          }\n\n          boneData.push( { bone: object, boneInverse: boneInverse, processed: false } );\n\n        }\n\n      } );\n\n    }\n\n    function buildNode( data ) {\n\n      var objects = [];\n\n      var matrix = data.matrix;\n      var nodes = data.nodes;\n      var type = data.type;\n      var instanceCameras = data.instanceCameras;\n      var instanceControllers = data.instanceControllers;\n      var instanceLights = data.instanceLights;\n      var instanceGeometries = data.instanceGeometries;\n      var instanceNodes = data.instanceNodes;\n\n      // nodes\n\n      for ( var i = 0, l = nodes.length; i < l; i ++ ) {\n\n        objects.push( getNode( nodes[ i ] ) );\n\n      }\n\n      // instance cameras\n\n      for ( var i = 0, l = instanceCameras.length; i < l; i ++ ) {\n\n        var instanceCamera = getCamera( instanceCameras[ i ] );\n\n        if ( instanceCamera !== null ) {\n\n          objects.push( instanceCamera.clone() );\n\n        }\n\n      }\n\n      // instance controllers\n\n      for ( var i = 0, l = instanceControllers.length; i < l; i ++ ) {\n\n        var instance = instanceControllers[ i ];\n        var controller = getController( instance.id );\n        var geometries = getGeometry( controller.id );\n        var newObjects = buildObjects( geometries, instance.materials );\n\n        var skeletons = instance.skeletons;\n        var joints = controller.skin.joints;\n\n        var skeleton = buildSkeleton( skeletons, joints );\n\n        for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\n\n          var object = newObjects[ j ];\n\n          if ( object.isSkinnedMesh ) {\n\n            object.bind( skeleton, controller.skin.bindMatrix );\n            object.normalizeSkinWeights();\n\n          }\n\n          objects.push( object );\n\n        }\n\n      }\n\n      // instance lights\n\n      for ( var i = 0, l = instanceLights.length; i < l; i ++ ) {\n\n        var instanceLight = getLight( instanceLights[ i ] );\n\n        if ( instanceLight !== null ) {\n\n          objects.push( instanceLight.clone() );\n\n        }\n\n      }\n\n      // instance geometries\n\n      for ( var i = 0, l = instanceGeometries.length; i < l; i ++ ) {\n\n        var instance = instanceGeometries[ i ];\n\n        // a single geometry instance in collada can lead to multiple object3Ds.\n        // this is the case when primitives are combined like triangles and lines\n\n        var geometries = getGeometry( instance.id );\n        var newObjects = buildObjects( geometries, instance.materials );\n\n        for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\n\n          objects.push( newObjects[ j ] );\n\n        }\n\n      }\n\n      // instance nodes\n\n      for ( var i = 0, l = instanceNodes.length; i < l; i ++ ) {\n\n        objects.push( getNode( instanceNodes[ i ] ).clone() );\n\n      }\n\n      var object;\n\n      if ( nodes.length === 0 && objects.length === 1 ) {\n\n        object = objects[ 0 ];\n\n      } else {\n\n        object = ( type === 'JOINT' ) ? new THREE.Bone() : new THREE.Group();\n\n        for ( var i = 0; i < objects.length; i ++ ) {\n\n          object.add( objects[ i ] );\n\n        }\n\n      }\n\n      if ( object.name === '' ) {\n\n        object.name = ( type === 'JOINT' ) ? data.sid : data.name;\n\n      }\n\n      object.matrix.copy( matrix );\n      object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n      return object;\n\n    }\n\n    var fallbackMaterial = new THREE.MeshBasicMaterial( { color: 0xff00ff } );\n\n    function resolveMaterialBinding( keys, instanceMaterials ) {\n\n      var materials = [];\n\n      for ( var i = 0, l = keys.length; i < l; i ++ ) {\n\n        var id = instanceMaterials[ keys[ i ] ];\n\n        if ( id === undefined ) {\n\n          console.warn( 'THREE.ColladaLoader: Material with key %s not found. Apply fallback material.', keys[ i ] );\n          materials.push( fallbackMaterial );\n\n        } else {\n\n          materials.push( getMaterial( id ) );\n\n        }\n\n      }\n\n      return materials;\n\n    }\n\n    function buildObjects( geometries, instanceMaterials ) {\n\n      var objects = [];\n\n      for ( var type in geometries ) {\n\n        var geometry = geometries[ type ];\n\n        var materials = resolveMaterialBinding( geometry.materialKeys, instanceMaterials );\n\n        // handle case if no materials are defined\n\n        if ( materials.length === 0 ) {\n\n          if ( type === 'lines' || type === 'linestrips' ) {\n\n            materials.push( new THREE.LineBasicMaterial() );\n\n          } else {\n\n            materials.push( new THREE.MeshPhongMaterial() );\n\n          }\n\n        }\n\n        // regard skinning\n\n        var skinning = ( geometry.data.attributes.skinIndex !== undefined );\n\n        if ( skinning ) {\n\n          for ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n            materials[ i ].skinning = true;\n\n          }\n\n        }\n\n        // choose between a single or multi materials (material array)\n\n        var material = ( materials.length === 1 ) ? materials[ 0 ] : materials;\n\n        // now create a specific 3D object\n\n        var object;\n\n        switch ( type ) {\n\n          case 'lines':\n            object = new THREE.LineSegments( geometry.data, material );\n            break;\n\n          case 'linestrips':\n            object = new THREE.Line( geometry.data, material );\n            break;\n\n          case 'triangles':\n          case 'polylist':\n            if ( skinning ) {\n\n              object = new THREE.SkinnedMesh( geometry.data, material );\n\n            } else {\n\n              object = new THREE.Mesh( geometry.data, material );\n\n            }\n            break;\n\n        }\n\n        objects.push( object );\n\n      }\n\n      return objects;\n\n    }\n\n    function hasNode( id ) {\n\n      return library.nodes[ id ] !== undefined;\n\n    }\n\n    function getNode( id ) {\n\n      return getBuild( library.nodes[ id ], buildNode );\n\n    }\n\n    // visual scenes\n\n    function parseVisualScene( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ),\n        children: []\n      };\n\n      prepareNodes( xml );\n\n      var elements = getElementsByTagName( xml, 'node' );\n\n      for ( var i = 0; i < elements.length; i ++ ) {\n\n        data.children.push( parseNode( elements[ i ] ) );\n\n      }\n\n      library.visualScenes[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildVisualScene( data ) {\n\n      var group = new THREE.Group();\n      group.name = data.name;\n\n      var children = data.children;\n\n      for ( var i = 0; i < children.length; i ++ ) {\n\n        var child = children[ i ];\n\n        group.add( getNode( child.id ) );\n\n      }\n\n      return group;\n\n    }\n\n    function hasVisualScene( id ) {\n\n      return library.visualScenes[ id ] !== undefined;\n\n    }\n\n    function getVisualScene( id ) {\n\n      return getBuild( library.visualScenes[ id ], buildVisualScene );\n\n    }\n\n    // scenes\n\n    function parseScene( xml ) {\n\n      var instance = getElementsByTagName( xml, 'instance_visual_scene' )[ 0 ];\n      return getVisualScene( parseId( instance.getAttribute( 'url' ) ) );\n\n    }\n\n    function setupAnimations() {\n\n      var clips = library.clips;\n\n      if ( isEmpty( clips ) === true ) {\n\n        if ( isEmpty( library.animations ) === false ) {\n\n          // if there are animations but no clips, we create a default clip for playback\n\n          var tracks = [];\n\n          for ( var id in library.animations ) {\n\n            var animationTracks = getAnimation( id );\n\n            for ( var i = 0, l = animationTracks.length; i < l; i ++ ) {\n\n              tracks.push( animationTracks[ i ] );\n\n            }\n\n          }\n\n          animations.push( new THREE.AnimationClip( 'default', - 1, tracks ) );\n\n        }\n\n      } else {\n\n        for ( var id in clips ) {\n\n          animations.push( getAnimationClip( id ) );\n\n        }\n\n      }\n\n    }\n\n    if ( text.length === 0 ) {\n\n      return { scene: new THREE.Scene() };\n\n    }\n\n    var xml = new DOMParser().parseFromString( text, 'application/xml' );\n\n    var collada = getElementsByTagName( xml, 'COLLADA' )[ 0 ];\n\n    // metadata\n\n    var version = collada.getAttribute( 'version' );\n    console.log( 'THREE.ColladaLoader: File version', version );\n\n    var asset = parseAsset( getElementsByTagName( collada, 'asset' )[ 0 ] );\n    var textureLoader = new THREE.TextureLoader( this.manager );\n    textureLoader.setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n    var tgaLoader;\n\n    if ( THREE.TGALoader ) {\n\n      tgaLoader = new THREE.TGALoader( this.manager );\n      tgaLoader.setPath( this.resourcePath || path );\n\n    }\n\n    //\n\n    var animations = [];\n    var kinematics = {};\n    var count = 0;\n\n    //\n\n    var library = {\n      animations: {},\n      clips: {},\n      controllers: {},\n      images: {},\n      effects: {},\n      materials: {},\n      cameras: {},\n      lights: {},\n      geometries: {},\n      nodes: {},\n      visualScenes: {},\n      kinematicsModels: {},\n      physicsModels: {},\n      kinematicsScenes: {}\n    };\n\n    parseLibrary( collada, 'library_animations', 'animation', parseAnimation );\n    parseLibrary( collada, 'library_animation_clips', 'animation_clip', parseAnimationClip );\n    parseLibrary( collada, 'library_controllers', 'controller', parseController );\n    parseLibrary( collada, 'library_images', 'image', parseImage );\n    parseLibrary( collada, 'library_effects', 'effect', parseEffect );\n    parseLibrary( collada, 'library_materials', 'material', parseMaterial );\n    parseLibrary( collada, 'library_cameras', 'camera', parseCamera );\n    parseLibrary( collada, 'library_lights', 'light', parseLight );\n    parseLibrary( collada, 'library_geometries', 'geometry', parseGeometry );\n    parseLibrary( collada, 'library_nodes', 'node', parseNode );\n    parseLibrary( collada, 'library_visual_scenes', 'visual_scene', parseVisualScene );\n    parseLibrary( collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel );\n    parseLibrary( collada, 'library_physics_models', 'physics_model', parsePhysicsModel );\n    parseLibrary( collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene );\n\n    buildLibrary( library.animations, buildAnimation );\n    buildLibrary( library.clips, buildAnimationClip );\n    buildLibrary( library.controllers, buildController );\n    buildLibrary( library.images, buildImage );\n    buildLibrary( library.effects, buildEffect );\n    buildLibrary( library.materials, buildMaterial );\n    buildLibrary( library.cameras, buildCamera );\n    buildLibrary( library.lights, buildLight );\n    buildLibrary( library.geometries, buildGeometry );\n    buildLibrary( library.visualScenes, buildVisualScene );\n\n    setupAnimations();\n    setupKinematics();\n\n    var scene = parseScene( getElementsByTagName( collada, 'scene' )[ 0 ] );\n\n    if ( asset.upAxis === 'Z_UP' ) {\n\n      scene.quaternion.setFromEuler( new THREE.Euler( - Math.PI / 2, 0, 0 ) );\n\n    }\n\n    scene.scale.multiplyScalar( asset.unit );\n\n    return {\n      animations: animations,\n      kinematics: kinematics,\n      library: library,\n      scene: scene\n    };\n\n  }\n\n};\n","/**\n * @author Kyle-Larson https://github.com/Kyle-Larson\n * @author Takahiro https://github.com/takahirox\n * @author Lewy Blue https://github.com/looeee\n *\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\n\nmodule.exports = THREE.FBXLoader = ( function () {\n\n\tvar fbxTree;\n\tvar connections;\n\tvar sceneGraph;\n\n\tfunction FBXLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\t}\n\n\tFBXLoader.prototype = {\n\n\t\tconstructor: FBXLoader,\n\n\t\tcrossOrigin: 'anonymous',\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\t\t\tvar self = this;\n\n\t\t\tvar resourceDirectory = THREE.LoaderUtils.extractUrlBase( url );\n\n\t\t\tvar loader = new THREE.FileLoader( this.manager );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tvar scene = self.parse( buffer, resourceDirectory );\n\t\t\t\t\tonLoad( scene );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\t\tself.manager.itemError( url );\n\n\t\t\t\t\t}, 0 );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\t\t},\n\n\t\tsetCrossOrigin: function ( value ) {\n\n\t\t\tthis.crossOrigin = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( FBXBuffer, resourceDirectory ) {\n\n\t\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t\t} else {\n\n\t\t\t\tvar FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t\t}\n\n\t\t\t\tfbxTree = new TextParser().parse( FBXText );\n\n\t\t\t}\n\n\t\t\t//console.log( FBXTree );\n\n\t\t\tvar textureLoader = new THREE.TextureLoader( this.manager ).setPath( resourceDirectory ).setCrossOrigin( this.crossOrigin );\n\n\t\t\treturn new FBXTreeParser( textureLoader ).parse( fbxTree );\n\n\t\t}\n\n\t};\n\n\t// Parse the FBXTree object returned by the BinaryParser or TextParser and return a THREE.Group\n\tfunction FBXTreeParser( textureLoader ) {\n\n\t\tthis.textureLoader = textureLoader;\n\n\t}\n\n\tFBXTreeParser.prototype = {\n\n\t\tconstructor: FBXTreeParser,\n\n\t\tparse: function () {\n\n\t\t\tconnections = this.parseConnections();\n\n\t\t\tvar images = this.parseImages();\n\t\t\tvar textures = this.parseTextures( images );\n\t\t\tvar materials = this.parseMaterials( textures );\n\t\t\tvar deformers = this.parseDeformers();\n\t\t\tvar geometryMap = new GeometryParser().parse( deformers );\n\n\t\t\tthis.parseScene( deformers, geometryMap, materials );\n\n\t\t\treturn sceneGraph;\n\n\t\t},\n\n\t\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t\t// and details the connection type\n\t\tparseConnections: function () {\n\n\t\t\tvar connectionMap = new Map();\n\n\t\t\tif ( 'Connections' in fbxTree ) {\n\n\t\t\t\tvar rawConnections = fbxTree.Connections.connections;\n\n\t\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\t\tvar fromID = rawConnection[ 0 ];\n\t\t\t\t\tvar toID = rawConnection[ 1 ];\n\t\t\t\t\tvar relationship = rawConnection[ 2 ];\n\n\t\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn connectionMap;\n\n\t\t},\n\n\t\t// Parse FBXTree.Objects.Video for embedded image data\n\t\t// These images are connected to textures in FBXTree.Objects.Textures\n\t\t// via FBXTree.Connections.\n\t\tparseImages: function () {\n\n\t\t\tvar images = {};\n\t\t\tvar blobs = {};\n\n\t\t\tif ( 'Video' in fbxTree.Objects ) {\n\n\t\t\t\tvar videoNodes = fbxTree.Objects.Video;\n\n\t\t\t\tfor ( var nodeID in videoNodes ) {\n\n\t\t\t\t\tvar videoNode = videoNodes[ nodeID ];\n\n\t\t\t\t\tvar id = parseInt( nodeID );\n\n\t\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\t\tvar arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\t\tvar base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\t\tvar image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var id in images ) {\n\n\t\t\t\tvar filename = images[ id ];\n\n\t\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t\t}\n\n\t\t\treturn images;\n\n\t\t},\n\n\t\t// Parse embedded image data in FBXTree.Video.Content\n\t\tparseImage: function ( videoNode ) {\n\n\t\t\tvar content = videoNode.Content;\n\t\t\tvar fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\t\tvar extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\t\tvar type;\n\n\t\t\tswitch ( extension ) {\n\n\t\t\t\tcase 'bmp':\n\n\t\t\t\t\ttype = 'image/bmp';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'jpg':\n\t\t\t\tcase 'jpeg':\n\n\t\t\t\t\ttype = 'image/jpeg';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'png':\n\n\t\t\t\t\ttype = 'image/png';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tif':\n\n\t\t\t\t\ttype = 'image/tiff';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tga':\n\n\t\t\t\t\tif ( typeof THREE.TGALoader !== 'function' ) {\n\n\t\t\t\t\t\tconsole.warn( 'FBXLoader: THREE.TGALoader is required to load TGA textures' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( THREE.Loader.Handlers.get( '.tga' ) === null ) {\n\n\t\t\t\t\t\t\tTHREE.Loader.Handlers.add( /\\.tga$/i, new THREE.TGALoader() );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttype = 'image/tga';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t\t} else { // Binary Format\n\n\t\t\t\tvar array = new Uint8Array( content );\n\t\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Texture\n\t\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t\t// to images in FBXTree.Objects.Video\n\t\tparseTextures: function ( images ) {\n\n\t\t\tvar textureMap = new Map();\n\n\t\t\tif ( 'Texture' in fbxTree.Objects ) {\n\n\t\t\t\tvar textureNodes = fbxTree.Objects.Texture;\n\t\t\t\tfor ( var nodeID in textureNodes ) {\n\n\t\t\t\t\tvar texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn textureMap;\n\n\t\t},\n\n\t\t// Parse individual node in FBXTree.Objects.Texture\n\t\tparseTexture: function ( textureNode, images ) {\n\n\t\t\tvar texture = this.loadTexture( textureNode, images );\n\n\t\t\ttexture.ID = textureNode.id;\n\n\t\t\ttexture.name = textureNode.attrName;\n\n\t\t\tvar wrapModeU = textureNode.WrapModeU;\n\t\t\tvar wrapModeV = textureNode.WrapModeV;\n\n\t\t\tvar valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\t\tvar valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t\t// 0: repeat(default), 1: clamp\n\n\t\t\ttexture.wrapS = valueU === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = valueV === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n\t\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\t\tvar values = textureNode.Scaling.value;\n\n\t\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t\t}\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// load a texture specified as a blob or data URI, or via an external URL using THREE.TextureLoader\n\t\tloadTexture: function ( textureNode, images ) {\n\n\t\t\tvar fileName;\n\n\t\t\tvar currentPath = this.textureLoader.path;\n\n\t\t\tvar children = connections.get( textureNode.id ).children;\n\n\t\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\t\tthis.textureLoader.setPath( undefined );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar texture;\n\n\t\t\tvar extension = textureNode.FileName.slice( - 3 ).toLowerCase();\n\n\t\t\tif ( extension === 'tga' ) {\n\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( '.tga' );\n\n\t\t\t\tif ( loader === null ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGALoader not found, creating empty placeholder texture for', fileName );\n\t\t\t\t\ttexture = new THREE.Texture();\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture = loader.load( fileName );\n\n\t\t\t\t}\n\n\t\t\t} else if ( extension === 'psd' ) {\n\n\t\t\t\tconsole.warn( 'FBXLoader: PSD textures are not supported, creating empty placeholder texture for', fileName );\n\t\t\t\ttexture = new THREE.Texture();\n\n\t\t\t} else {\n\n\t\t\t\ttexture = this.textureLoader.load( fileName );\n\n\t\t\t}\n\n\t\t\tthis.textureLoader.setPath( currentPath );\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Material\n\t\tparseMaterials: function ( textureMap ) {\n\n\t\t\tvar materialMap = new Map();\n\n\t\t\tif ( 'Material' in fbxTree.Objects ) {\n\n\t\t\t\tvar materialNodes = fbxTree.Objects.Material;\n\n\t\t\t\tfor ( var nodeID in materialNodes ) {\n\n\t\t\t\t\tvar material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn materialMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Material\n\t\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t\t// FBX format currently only supports Lambert and Phong shading models\n\t\tparseMaterial: function ( materialNode, textureMap ) {\n\n\t\t\tvar ID = materialNode.id;\n\t\t\tvar name = materialNode.attrName;\n\t\t\tvar type = materialNode.ShadingModel;\n\n\t\t\t// Case where FBX wraps shading model in property object.\n\t\t\tif ( typeof type === 'object' ) {\n\n\t\t\t\ttype = type.value;\n\n\t\t\t}\n\n\t\t\t// Ignore unused materials which don't have any connections.\n\t\t\tif ( ! connections.has( ID ) ) return null;\n\n\t\t\tvar parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\t\tvar material;\n\n\t\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\t\tcase 'phong':\n\t\t\t\t\tmaterial = new THREE.MeshPhongMaterial();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'lambert':\n\t\t\t\t\tmaterial = new THREE.MeshLambertMaterial();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\t\tmaterial = new THREE.MeshPhongMaterial( { color: 0x3300ff } );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tmaterial.setValues( parameters );\n\t\t\tmaterial.name = name;\n\n\t\t\treturn material;\n\n\t\t},\n\n\t\t// Parse FBX material and return parameters suitable for a three.js material\n\t\t// Also parse the texture map and return any textures associated with the material\n\t\tparseParameters: function ( materialNode, textureMap, ID ) {\n\n\t\t\tvar parameters = {};\n\n\t\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Diffuse ) {\n\n\t\t\t\tparameters.color = new THREE.Color().fromArray( materialNode.Diffuse.value );\n\n\t\t\t} else if ( materialNode.DiffuseColor && materialNode.DiffuseColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\t\tparameters.color = new THREE.Color().fromArray( materialNode.DiffuseColor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Emissive ) {\n\n\t\t\t\tparameters.emissive = new THREE.Color().fromArray( materialNode.Emissive.value );\n\n\t\t\t} else if ( materialNode.EmissiveColor && materialNode.EmissiveColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\t\tparameters.emissive = new THREE.Color().fromArray( materialNode.EmissiveColor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.Opacity ) {\n\n\t\t\t\tparameters.opacity = parseFloat( materialNode.Opacity.value );\n\n\t\t\t}\n\t\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\t\tparameters.transparent = true;\n\n\t\t\t}\n\t\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Shininess ) {\n\n\t\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Specular ) {\n\n\t\t\t\tparameters.specular = new THREE.Color().fromArray( materialNode.Specular.value );\n\n\t\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\t\tparameters.specular = new THREE.Color().fromArray( materialNode.SpecularColor.value );\n\n\t\t\t}\n\n\t\t\tvar self = this;\n\t\t\tconnections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\t\tvar type = child.relationship;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'Bump':\n\t\t\t\t\t\tparameters.bumpMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DiffuseColor':\n\t\t\t\t\t\tparameters.map = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\t\tparameters.displacementMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\t\tparameters.emissiveMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'NormalMap':\n\t\t\t\t\t\tparameters.normalMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\t\tparameters.envMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.envMap.mapping = THREE.EquirectangularReflectionMapping;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\t\tparameters.specularMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TransparentColor':\n\t\t\t\t\t\tparameters.alphaMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'AmbientColor':\n\t\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn parameters;\n\n\t\t},\n\n\t\t// get a texture from the textureMap for use by a material.\n\t\tgetTexture: function ( textureMap, id ) {\n\n\t\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\n\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\t\tid = connections.get( id ).children[ 0 ].ID;\n\n\t\t\t}\n\n\t\t\treturn textureMap.get( id );\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Deformer\n\t\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\t\tparseDeformers: function () {\n\n\t\t\tvar skeletons = {};\n\t\t\tvar morphTargets = {};\n\n\t\t\tif ( 'Deformer' in fbxTree.Objects ) {\n\n\t\t\t\tvar DeformerNodes = fbxTree.Objects.Deformer;\n\n\t\t\t\tfor ( var nodeID in DeformerNodes ) {\n\n\t\t\t\t\tvar deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\t\tvar relationships = connections.get( parseInt( nodeID ) );\n\n\t\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\t\tvar skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\t\tvar morphTarget = {\n\t\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\n\t\t\t\tskeletons: skeletons,\n\t\t\t\tmorphTargets: morphTargets,\n\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse single nodes in FBXTree.Objects.Deformer\n\t\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t\t// Each skin node represents a skeleton and each cluster node represents a bone\n\t\tparseSkeleton: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawBones = [];\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar boneNode = deformerNodes[ child.ID ];\n\n\t\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\t\tvar rawBone = {\n\n\t\t\t\t\tID: child.ID,\n\t\t\t\t\tindices: [],\n\t\t\t\t\tweights: [],\n\t\t\t\t\ttransform: new THREE.Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t\ttransformLink: new THREE.Matrix4().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t\tlinkMode: boneNode.Mode,\n\n\t\t\t\t};\n\n\t\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t\t}\n\n\t\t\t\trawBones.push( rawBone );\n\n\t\t\t} );\n\n\t\t\treturn {\n\n\t\t\t\trawBones: rawBones,\n\t\t\t\tbones: []\n\n\t\t\t};\n\n\t\t},\n\n\t\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\t\tparseMorphTargets: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawMorphTargets = [];\n\n\t\t\tfor ( var i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\t\tif ( i === 8 ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.' );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar child = relationships.children[ i ];\n\n\t\t\t\tvar morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\t\tvar rawMorphTarget = {\n\n\t\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\t\tid: morphTargetNode.id,\n\t\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t\t};\n\n\t\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\t\tvar targetRelationships = connections.get( parseInt( child.ID ) );\n\n\t\t\t\ttargetRelationships.children.forEach( function ( child ) {\n\n\t\t\t\t\tif ( child.relationship === undefined ) rawMorphTarget.geoID = child.ID;\n\n\t\t\t\t} );\n\n\t\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t\t}\n\n\t\t\treturn rawMorphTargets;\n\n\t\t},\n\n\t\t// create the main THREE.Group() to be returned by the loader\n\t\tparseScene: function ( deformers, geometryMap, materialMap ) {\n\n\t\t\tsceneGraph = new THREE.Group();\n\n\t\t\tvar modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\t\tvar modelNodes = fbxTree.Objects.Model;\n\n\t\t\tvar self = this;\n\t\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\t\tvar modelNode = modelNodes[ model.ID ];\n\t\t\t\tself.setLookAtProperties( model, modelNode );\n\n\t\t\t\tvar parentConnections = connections.get( model.ID ).parents;\n\n\t\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\t\tvar parent = modelMap.get( connection.ID );\n\t\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( model.parent === null ) {\n\n\t\t\t\t\tsceneGraph.add( model );\n\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\n\t\t\tthis.createAmbientLight();\n\n\t\t\tthis.setupMorphMaterials();\n\n\t\t\tvar animations = new AnimationParser().parse();\n\n\t\t\t// if all the models where already combined in a single group, just return that\n\t\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\t\tsceneGraph.children[ 0 ].animations = animations;\n\t\t\t\tsceneGraph = sceneGraph.children[ 0 ];\n\n\t\t\t}\n\n\t\t\tsceneGraph.animations = animations;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.Model\n\t\tparseModels: function ( skeletons, geometryMap, materialMap ) {\n\n\t\t\tvar modelMap = new Map();\n\t\t\tvar modelNodes = fbxTree.Objects.Model;\n\n\t\t\tfor ( var nodeID in modelNodes ) {\n\n\t\t\t\tvar id = parseInt( nodeID );\n\t\t\t\tvar node = modelNodes[ nodeID ];\n\t\t\t\tvar relationships = connections.get( id );\n\n\t\t\t\tvar model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\t\tif ( ! model ) {\n\n\t\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'LimbNode': // usually associated with a Bone, however if a Bone was not created we'll make a Group instead\n\t\t\t\t\t\tcase 'Null':\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmodel = new THREE.Group();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.name = THREE.PropertyBinding.sanitizeNodeName( node.attrName );\n\t\t\t\t\tmodel.ID = id;\n\n\t\t\t\t}\n\n\t\t\t\tthis.setModelTransforms( model, node );\n\t\t\t\tmodelMap.set( id, model );\n\n\t\t\t}\n\n\t\t\treturn modelMap;\n\n\t\t},\n\n\t\tbuildSkeleton: function ( relationships, skeletons, id, name ) {\n\n\t\t\tvar bone = null;\n\n\t\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\t\tvar subBone = bone;\n\t\t\t\t\t\t\tbone = new THREE.Bone();\n\t\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\t\t\t\t\t\t\tbone.name = THREE.PropertyBinding.sanitizeNodeName( name );\n\t\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\n\t\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn bone;\n\n\t\t},\n\n\t\t// create a THREE.PerspectiveCamera or THREE.OrthographicCamera\n\t\tcreateCamera: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar cameraAttribute;\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tcameraAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\t\tmodel = new THREE.Object3D();\n\n\t\t\t} else {\n\n\t\t\t\tvar type = 0;\n\t\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\t\ttype = 1;\n\n\t\t\t\t}\n\n\t\t\t\tvar nearClippingPlane = 1;\n\t\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t\t}\n\n\t\t\t\tvar farClippingPlane = 1000;\n\t\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t\t}\n\n\n\t\t\t\tvar width = window.innerWidth;\n\t\t\t\tvar height = window.innerHeight;\n\n\t\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar aspect = width / height;\n\n\t\t\t\tvar fov = 45;\n\t\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Perspective\n\t\t\t\t\t\tmodel = new THREE.PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\t\tmodel = new THREE.OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\t\tmodel = new THREE.Object3D();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\t// Create a THREE.DirectionalLight, THREE.PointLight or THREE.SpotLight\n\t\tcreateLight: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar lightAttribute;\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tlightAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( lightAttribute === undefined ) {\n\n\t\t\t\tmodel = new THREE.Object3D();\n\n\t\t\t} else {\n\n\t\t\t\tvar type;\n\n\t\t\t\t// LightType can be undefined for Point lights\n\t\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\t\ttype = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar color = 0xffffff;\n\n\t\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\t\tcolor = new THREE.Color().fromArray( lightAttribute.Color.value );\n\n\t\t\t\t}\n\n\t\t\t\tvar intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t\t// light disabled\n\t\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\t\tintensity = 0;\n\n\t\t\t\t}\n\n\t\t\t\tvar distance = 0;\n\t\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\t\tdistance = 0;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\t\tvar decay = 1;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Point\n\t\t\t\t\t\tmodel = new THREE.PointLight( color, intensity, distance, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Directional\n\t\t\t\t\t\tmodel = new THREE.DirectionalLight( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2: // Spot\n\t\t\t\t\t\tvar angle = Math.PI / 3;\n\n\t\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\t\tangle = THREE.MathUtils.degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar penumbra = 0;\n\t\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\t\tpenumbra = THREE.MathUtils.degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodel = new THREE.SpotLight( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a THREE.PointLight.' );\n\t\t\t\t\t\tmodel = new THREE.PointLight( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\t\tmodel.castShadow = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateMesh: function ( relationships, geometryMap, materialMap ) {\n\n\t\t\tvar model;\n\t\t\tvar geometry = null;\n\t\t\tvar material = null;\n\t\t\tvar materials = [];\n\n\t\t\t// get geometry and materials(s) from connections\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t\t}\n\n\t\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( materials.length > 1 ) {\n\n\t\t\t\tmaterial = materials;\n\n\t\t\t} else if ( materials.length > 0 ) {\n\n\t\t\t\tmaterial = materials[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new THREE.MeshPhongMaterial( { color: 0xcccccc } );\n\t\t\t\tmaterials.push( material );\n\n\t\t\t}\n\n\t\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.vertexColors = THREE.VertexColors;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.skinning = true;\n\n\t\t\t\t} );\n\n\t\t\t\tmodel = new THREE.SkinnedMesh( geometry, material );\n\n\t\t\t} else {\n\n\t\t\t\tmodel = new THREE.Mesh( geometry, material );\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateCurve: function ( relationships, geometryMap ) {\n\n\t\t\tvar geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\t\treturn geo;\n\n\t\t\t}, null );\n\n\t\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\t\tvar material = new THREE.LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );\n\t\t\treturn new THREE.Line( geometry, material );\n\n\t\t},\n\n\t\t// parse the model node for transform details and apply them to the model\n\t\tsetModelTransforms: function ( model, modelNode ) {\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = parseInt( modelNode.RotationOrder.value );\n\t\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\t\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\t\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\t\tvar transform = generateTransform( transformData );\n\n\t\t\tmodel.applyMatrix( transform );\n\n\t\t},\n\n\t\tsetLookAtProperties: function ( model, modelNode ) {\n\n\t\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\t\tvar children = connections.get( model.ID ).children;\n\n\t\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\t\tvar lookAtTarget = fbxTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\t\tvar pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\t\tmodel.lookAt( new THREE.Vector3().fromArray( pos ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tbindSkeleton: function ( skeletons, geometryMap, modelMap ) {\n\n\t\t\tvar bindMatrices = this.parsePoseNodes();\n\n\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\tvar parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\t\tvar geoID = parent.ID;\n\t\t\t\t\t\tvar geoRelationships = connections.get( geoID );\n\n\t\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\t\tvar model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\t\tmodel.bind( new THREE.Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparsePoseNodes: function () {\n\n\t\t\tvar bindMatrices = {};\n\n\t\t\tif ( 'Pose' in fbxTree.Objects ) {\n\n\t\t\t\tvar BindPoseNode = fbxTree.Objects.Pose;\n\n\t\t\t\tfor ( var nodeID in BindPoseNode ) {\n\n\t\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' ) {\n\n\t\t\t\t\t\tvar poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new THREE.Matrix4().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new THREE.Matrix4().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bindMatrices;\n\n\t\t},\n\n\t\t// Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n\t\tcreateAmbientLight: function () {\n\n\t\t\tif ( 'GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings ) {\n\n\t\t\t\tvar ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n\t\t\t\tvar r = ambientColor[ 0 ];\n\t\t\t\tvar g = ambientColor[ 1 ];\n\t\t\t\tvar b = ambientColor[ 2 ];\n\n\t\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\t\tvar color = new THREE.Color( r, g, b );\n\t\t\t\t\tsceneGraph.add( new THREE.AmbientLight( color, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetupMorphMaterials: function () {\n\n\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\tif ( child.geometry.morphAttributes.position || child.geometry.morphAttributes.normal ) {\n\n\t\t\t\t\t\tvar uuid = child.uuid;\n\t\t\t\t\t\tvar matUuid = child.material.uuid;\n\n\t\t\t\t\t\t// if a geometry has morph targets, it cannot share the material with other geometries\n\t\t\t\t\t\tvar sharedMat = false;\n\n\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\t\t\t\tif ( child.material.uuid === matUuid && child.uuid !== uuid ) sharedMat = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tif ( sharedMat === true ) child.material = child.material.clone();\n\n\t\t\t\t\t\tchild.material.morphTargets = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t};\n\n\t// parse Geometry data from FBXTree and return map of BufferGeometries\n\tfunction GeometryParser() {}\n\n\tGeometryParser.prototype = {\n\n\t\tconstructor: GeometryParser,\n\n\t\t// Parse nodes in FBXTree.Objects.Geometry\n\t\tparse: function ( deformers ) {\n\n\t\t\tvar geometryMap = new Map();\n\n\t\t\tif ( 'Geometry' in fbxTree.Objects ) {\n\n\t\t\t\tvar geoNodes = fbxTree.Objects.Geometry;\n\n\t\t\t\tfor ( var nodeID in geoNodes ) {\n\n\t\t\t\t\tvar relationships = connections.get( parseInt( nodeID ) );\n\t\t\t\t\tvar geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn geometryMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Geometry\n\t\tparseGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tswitch ( geoNode.attrType ) {\n\n\t\t\t\tcase 'Mesh':\n\t\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\t\tparseMeshGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tvar skeletons = deformers.skeletons;\n\t\t\tvar morphTargets = deformers.morphTargets;\n\n\t\t\tvar modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\n\n\t\t\t} );\n\n\t\t\t// don't create geometry if it is not associated with any models\n\t\t\tif ( modelNodes.length === 0 ) return;\n\n\t\t\tvar skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\t\treturn skeleton;\n\n\t\t\t}, null );\n\n\t\t\tvar morphTarget = relationships.children.reduce( function ( morphTarget, child ) {\n\n\t\t\t\tif ( morphTargets[ child.ID ] !== undefined ) morphTarget = morphTargets[ child.ID ];\n\n\t\t\t\treturn morphTarget;\n\n\t\t\t}, null );\n\n\t\t\t// TODO: if there is more than one model associated with the geometry, AND the models have\n\t\t\t// different geometric transforms, then this will cause problems\n\t\t\t// if ( modelNodes.length > 1 ) { }\n\n\t\t\t// For now just assume one model and get the preRotations from that\n\t\t\tvar modelNode = modelNodes[ 0 ];\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = modelNode.RotationOrder.value;\n\t\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\t\tvar transform = generateTransform( transformData );\n\n\t\t\treturn this.genGeometry( geoNode, skeleton, morphTarget, transform );\n\n\t\t},\n\n\t\t// Generate a THREE.BufferGeometry from a node in FBXTree.Objects.Geometry\n\t\tgenGeometry: function ( geoNode, skeleton, morphTarget, preTransform ) {\n\n\t\t\tvar geo = new THREE.BufferGeometry();\n\t\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\t\tvar geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\t\tvar buffers = this.genBuffers( geoInfo );\n\n\t\t\tvar positionAttribute = new THREE.Float32BufferAttribute( buffers.vertex, 3 );\n\n\t\t\tpreTransform.applyToBufferAttribute( positionAttribute );\n\n\t\t\tgeo.addAttribute( 'position', positionAttribute );\n\n\t\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\t\tgeo.addAttribute( 'color', new THREE.Float32BufferAttribute( buffers.colors, 3 ) );\n\n\t\t\t}\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tgeo.addAttribute( 'skinIndex', new THREE.Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\n\n\t\t\t\tgeo.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( buffers.vertexWeights, 4 ) );\n\n\t\t\t\t// used later to bind the skeleton to the model\n\t\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t\t}\n\n\t\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\t\tvar normalAttribute = new THREE.Float32BufferAttribute( buffers.normal, 3 );\n\n\t\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( preTransform );\n\t\t\t\tnormalMatrix.applyToBufferAttribute( normalAttribute );\n\n\t\t\t\tgeo.addAttribute( 'normal', normalAttribute );\n\n\t\t\t}\n\n\t\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\t\t// subsequent uv buffers are called 'uv1', 'uv2', ...\n\t\t\t\tvar name = 'uv' + ( i + 1 ).toString();\n\n\t\t\t\t// the first uv buffer is just called 'uv'\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tname = 'uv';\n\n\t\t\t\t}\n\n\t\t\t\tgeo.addAttribute( name, new THREE.Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\n\n\t\t\t} );\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\t\tvar prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\t\tvar startIndex = 0;\n\n\t\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\t\tvar lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\t\tvar lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t\t// using one of them\n\t\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.addMorphTargets( geo, geoNode, morphTarget, preTransform );\n\n\t\t\treturn geo;\n\n\t\t},\n\n\t\tparseGeoNode: function ( geoNode, skeleton ) {\n\n\t\t\tvar geoInfo = {};\n\n\t\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\t\tif ( geoNode.LayerElementColor ) {\n\n\t\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\t\tgeoInfo.uv = [];\n\n\t\t\t\tvar i = 0;\n\t\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\t\t\t\t\ti ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeoInfo.weightTable = {};\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\t\tid: i,\n\t\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn geoInfo;\n\n\t\t},\n\n\t\tgenBuffers: function ( geoInfo ) {\n\n\t\t\tvar buffers = {\n\t\t\t\tvertex: [],\n\t\t\t\tnormal: [],\n\t\t\t\tcolors: [],\n\t\t\t\tuvs: [],\n\t\t\t\tmaterialIndex: [],\n\t\t\t\tvertexWeights: [],\n\t\t\t\tweightsIndices: [],\n\t\t\t};\n\n\t\t\tvar polygonIndex = 0;\n\t\t\tvar faceLength = 0;\n\t\t\tvar displayedWeightsWarning = false;\n\n\t\t\t// these will hold data for a single face\n\t\t\tvar facePositionIndexes = [];\n\t\t\tvar faceNormals = [];\n\t\t\tvar faceColors = [];\n\t\t\tvar faceUVs = [];\n\t\t\tvar faceWeights = [];\n\t\t\tvar faceWeightIndices = [];\n\n\t\t\tvar self = this;\n\t\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\t\tvar endOfFace = false;\n\n\t\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t\t// A cube with quad faces looks like this:\n\t\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t\t//  }\n\t\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n\t\t\t\t\tendOfFace = true;\n\n\t\t\t\t}\n\n\t\t\t\tvar weightIndices = [];\n\t\t\t\tvar weights = [];\n\n\t\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t\t} );\n\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\t\tvar Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\t\tvar currentWeight = weight;\n\t\t\t\t\t\t\tvar currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\t\tvar tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\t\tweights = Weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tvar materialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tfaceLength ++;\n\n\t\t\t\tif ( endOfFace ) {\n\n\t\t\t\t\tself.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\t\tpolygonIndex ++;\n\t\t\t\t\tfaceLength = 0;\n\n\t\t\t\t\t// reset arrays for the next face\n\t\t\t\t\tfacePositionIndexes = [];\n\t\t\t\t\tfaceNormals = [];\n\t\t\t\t\tfaceColors = [];\n\t\t\t\t\tfaceUVs = [];\n\t\t\t\t\tfaceWeights = [];\n\t\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn buffers;\n\n\t\t},\n\n\t\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\t\tgenFace: function ( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\t\tfor ( var i = 2; i < faceLength; i ++ ) {\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 0 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 2 ] ] );\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 0 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 0 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 3 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ 0 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 0 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 0 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\taddMorphTargets: function ( parentGeo, parentGeoNode, morphTarget, preTransform ) {\n\n\t\t\tif ( morphTarget === null ) return;\n\n\t\t\tparentGeo.morphAttributes.position = [];\n\t\t\tparentGeo.morphAttributes.normal = [];\n\n\t\t\tvar self = this;\n\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\tvar morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\tself.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\t\tgenMorphGeometry: function ( parentGeo, parentGeoNode, morphGeoNode, preTransform ) {\n\n\t\t\tvar morphGeo = new THREE.BufferGeometry();\n\t\t\tif ( morphGeoNode.attrName ) morphGeo.name = morphGeoNode.attrName;\n\n\t\t\tvar vertexIndices = ( parentGeoNode.PolygonVertexIndex !== undefined ) ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\t\t// make a copy of the parent's vertex positions\n\t\t\tvar vertexPositions = ( parentGeoNode.Vertices !== undefined ) ? parentGeoNode.Vertices.a.slice() : [];\n\n\t\t\tvar morphPositions = ( morphGeoNode.Vertices !== undefined ) ? morphGeoNode.Vertices.a : [];\n\t\t\tvar indices = ( morphGeoNode.Indexes !== undefined ) ? morphGeoNode.Indexes.a : [];\n\n\t\t\tfor ( var i = 0; i < indices.length; i ++ ) {\n\n\t\t\t\tvar morphIndex = indices[ i ] * 3;\n\n\t\t\t\t// FBX format uses blend shapes rather than morph targets. This can be converted\n\t\t\t\t// by additively combining the blend shape positions with the original geometry's positions\n\t\t\t\tvertexPositions[ morphIndex ] += morphPositions[ i * 3 ];\n\t\t\t\tvertexPositions[ morphIndex + 1 ] += morphPositions[ i * 3 + 1 ];\n\t\t\t\tvertexPositions[ morphIndex + 2 ] += morphPositions[ i * 3 + 2 ];\n\n\t\t\t}\n\n\t\t\t// TODO: add morph normal support\n\t\t\tvar morphGeoInfo = {\n\t\t\t\tvertexIndices: vertexIndices,\n\t\t\t\tvertexPositions: vertexPositions,\n\t\t\t};\n\n\t\t\tvar morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\t\tvar positionAttribute = new THREE.Float32BufferAttribute( morphBuffers.vertex, 3 );\n\t\t\tpositionAttribute.name = morphGeoNode.attrName;\n\n\t\t\tpreTransform.applyToBufferAttribute( positionAttribute );\n\n\t\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t\t},\n\n\t\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\t\tparseNormals: function ( NormalNode ) {\n\n\t\t\tvar mappingType = NormalNode.MappingInformationType;\n\t\t\tvar referenceType = NormalNode.ReferenceInformationType;\n\t\t\tvar buffer = NormalNode.Normals.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 3,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\t\tparseUVs: function ( UVNode ) {\n\n\t\t\tvar mappingType = UVNode.MappingInformationType;\n\t\t\tvar referenceType = UVNode.ReferenceInformationType;\n\t\t\tvar buffer = UVNode.UV.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 2,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\t\tparseVertexColors: function ( ColorNode ) {\n\n\t\t\tvar mappingType = ColorNode.MappingInformationType;\n\t\t\tvar referenceType = ColorNode.ReferenceInformationType;\n\t\t\tvar buffer = ColorNode.Colors.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 4,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\t\tparseMaterialIndices: function ( MaterialNode ) {\n\n\t\t\tvar mappingType = MaterialNode.MappingInformationType;\n\t\t\tvar referenceType = MaterialNode.ReferenceInformationType;\n\n\t\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\t\treturn {\n\t\t\t\t\tdataSize: 1,\n\t\t\t\t\tbuffer: [ 0 ],\n\t\t\t\t\tindices: [ 0 ],\n\t\t\t\t\tmappingType: 'AllSame',\n\t\t\t\t\treferenceType: referenceType\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t\t// for conforming with the other functions we've written for other data.\n\t\t\tvar materialIndices = [];\n\n\t\t\tfor ( var i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\t\tmaterialIndices.push( i );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: materialIndexBuffer,\n\t\t\t\tindices: materialIndices,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\t\tparseNurbsGeometry: function ( geoNode ) {\n\n\t\t\tif ( THREE.NURBSCurve === undefined ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );\n\t\t\t\treturn new THREE.BufferGeometry();\n\n\t\t\t}\n\n\t\t\tvar order = parseInt( geoNode.Order );\n\n\t\t\tif ( isNaN( order ) ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\t\treturn new THREE.BufferGeometry();\n\n\t\t\t}\n\n\t\t\tvar degree = order - 1;\n\n\t\t\tvar knots = geoNode.KnotVector.a;\n\t\t\tvar controlPoints = [];\n\t\t\tvar pointsValues = geoNode.Points.a;\n\n\t\t\tfor ( var i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\t\tcontrolPoints.push( new THREE.Vector4().fromArray( pointsValues, i ) );\n\n\t\t\t}\n\n\t\t\tvar startKnot, endKnot;\n\n\t\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\t\tstartKnot = degree;\n\t\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\t\tfor ( var i = 0; i < degree; ++ i ) {\n\n\t\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar curve = new THREE.NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n\t\t\tvar vertices = curve.getPoints( controlPoints.length * 7 );\n\n\t\t\tvar positions = new Float32Array( vertices.length * 3 );\n\n\t\t\tvertices.forEach( function ( vertex, i ) {\n\n\t\t\t\tvertex.toArray( positions, i * 3 );\n\n\t\t\t} );\n\n\t\t\tvar geometry = new THREE.BufferGeometry();\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t},\n\n\t};\n\n\t// parse animation data from FBXTree\n\tfunction AnimationParser() {}\n\n\tAnimationParser.prototype = {\n\n\t\tconstructor: AnimationParser,\n\n\t\t// take raw animation clips and turn them into three.js animation clips\n\t\tparse: function () {\n\n\t\t\tvar animationClips = [];\n\n\n\t\t\tvar rawClips = this.parseClips();\n\n\t\t\tif ( rawClips === undefined ) return animationClips;\n\n\t\t\tfor ( var key in rawClips ) {\n\n\t\t\t\tvar rawClip = rawClips[ key ];\n\n\t\t\t\tvar clip = this.addClip( rawClip );\n\n\t\t\t\tanimationClips.push( clip );\n\n\t\t\t}\n\n\t\t\treturn animationClips;\n\n\t\t},\n\n\t\tparseClips: function () {\n\n\t\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t\t// if this is undefined we can safely assume there are no animations\n\t\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\t\tvar curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\t\tvar layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\t\tvar rawClips = this.parseAnimStacks( layersMap );\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t\t// and is referenced by an AnimationLayer\n\t\tparseAnimationCurveNodes: function () {\n\n\t\t\tvar rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n\n\t\t\tvar curveNodesMap = new Map();\n\n\t\t\tfor ( var nodeID in rawCurveNodes ) {\n\n\t\t\t\tvar rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\t\tvar curveNode = {\n\n\t\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\t\tcurves: {},\n\n\t\t\t\t\t};\n\n\t\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn curveNodesMap;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t\t// axis ( e.g. times and values of x rotation)\n\t\tparseAnimationCurves: function ( curveNodesMap ) {\n\n\t\t\tvar rawCurves = fbxTree.Objects.AnimationCurve;\n\n\t\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t\t// clearly, this should be optimised to\n\t\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\t\tfor ( var nodeID in rawCurves ) {\n\n\t\t\t\tvar animationCurve = {\n\n\t\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t\t};\n\n\t\t\t\tvar relationships = connections.get( animationCurve.id );\n\n\t\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\t\tvar animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\t\tvar animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /d|DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\t\tparseAnimationLayers: function ( curveNodesMap ) {\n\n\t\t\tvar rawLayers = fbxTree.Objects.AnimationLayer;\n\n\t\t\tvar layersMap = new Map();\n\n\t\t\tfor ( var nodeID in rawLayers ) {\n\n\t\t\t\tvar layerCurveNodes = [];\n\n\t\t\t\tvar connection = connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\t\tvar children = connection.children;\n\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\t\tvar curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar modelID;\n\n\t\t\t\t\t\t\t\t\tconnections.get( child.ID ).parents.forEach( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( parent.relationship !== undefined ) modelID = parent.ID;\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tvar rawModel = fbxTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),\n\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\t\t\t\t\t\t\t\t\t\ttransform: self.getModelAnimTransform( rawModel ),\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotations = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotations = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar deformerID;\n\n\t\t\t\t\t\t\t\t\tconnections.get( child.ID ).parents.forEach( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( parent.relationship !== undefined ) deformerID = parent.ID;\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tvar morpherID = connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\t\tvar geoID = connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\t\tvar modelID = connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tvar rawModel = fbxTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),\n\t\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn layersMap;\n\n\t\t},\n\n\t\tgetModelAnimTransform: function ( modelNode ) {\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = parseInt( modelNode.RotationOrder.value );\n\n\t\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\t\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\n\t\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\n\t\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\t\treturn generateTransform( transformData );\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t\t// hierarchy. Each Stack node will be used to create a THREE.AnimationClip\n\t\tparseAnimStacks: function ( layersMap ) {\n\n\t\t\tvar rawStacks = fbxTree.Objects.AnimationStack;\n\n\t\t\t// connect the stacks (clips) up to the layers\n\t\t\tvar rawClips = {};\n\n\t\t\tfor ( var nodeID in rawStacks ) {\n\n\t\t\t\tvar children = connections.get( parseInt( nodeID ) ).children;\n\n\t\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t\t}\n\n\t\t\t\tvar layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\t\tlayer: layer,\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\taddClip: function ( rawClip ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar self = this;\n\t\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\t\ttracks = tracks.concat( self.generateTracks( rawTracks ) );\n\n\t\t\t} );\n\n\t\t\treturn new THREE.AnimationClip( rawClip.name, - 1, tracks );\n\n\t\t},\n\n\t\tgenerateTracks: function ( rawTracks ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar initialPosition = new THREE.Vector3();\n\t\t\tvar initialRotation = new THREE.Quaternion();\n\t\t\tvar initialScale = new THREE.Vector3();\n\n\t\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, initialRotation, initialScale );\n\n\t\t\tinitialPosition = initialPosition.toArray();\n\t\t\tinitialRotation = new THREE.Euler().setFromQuaternion( initialRotation ).toArray(); // todo: euler order\n\t\t\tinitialScale = initialScale.toArray();\n\n\t\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\t\tvar positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\t\tvar rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotations, rawTracks.postRotations );\n\t\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\t\tvar scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\t\tvar morphTrack = this.generateMorphTrack( rawTracks );\n\t\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t\t}\n\n\t\t\treturn tracks;\n\n\t\t},\n\n\t\tgenerateVectorTrack: function ( modelName, curves, initialValue, type ) {\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\treturn new THREE.VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n\t\t},\n\n\t\tgenerateRotationTrack: function ( modelName, curves, initialValue, preRotations, postRotations ) {\n\n\t\t\tif ( curves.x !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.x );\n\t\t\t\tcurves.x.values = curves.x.values.map( THREE.MathUtils.degToRad );\n\n\t\t\t}\n\t\t\tif ( curves.y !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.y );\n\t\t\t\tcurves.y.values = curves.y.values.map( THREE.MathUtils.degToRad );\n\n\t\t\t}\n\t\t\tif ( curves.z !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.z );\n\t\t\t\tcurves.z.values = curves.z.values.map( THREE.MathUtils.degToRad );\n\n\t\t\t}\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\tif ( preRotations !== undefined ) {\n\n\t\t\t\tpreRotations = preRotations.map( THREE.MathUtils.degToRad );\n\t\t\t\tpreRotations.push( 'ZYX' );\n\n\t\t\t\tpreRotations = new THREE.Euler().fromArray( preRotations );\n\t\t\t\tpreRotations = new THREE.Quaternion().setFromEuler( preRotations );\n\n\t\t\t}\n\n\t\t\tif ( postRotations !== undefined ) {\n\n\t\t\t\tpostRotations = postRotations.map( THREE.MathUtils.degToRad );\n\t\t\t\tpostRotations.push( 'ZYX' );\n\n\t\t\t\tpostRotations = new THREE.Euler().fromArray( postRotations );\n\t\t\t\tpostRotations = new THREE.Quaternion().setFromEuler( postRotations ).inverse();\n\n\t\t\t}\n\n\t\t\tvar quaternion = new THREE.Quaternion();\n\t\t\tvar euler = new THREE.Euler();\n\n\t\t\tvar quaternionValues = [];\n\n\t\t\tfor ( var i = 0; i < values.length; i += 3 ) {\n\n\t\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], 'ZYX' );\n\n\t\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\t\tif ( preRotations !== undefined ) quaternion.premultiply( preRotations );\n\t\t\t\tif ( postRotations !== undefined ) quaternion.multiply( postRotations );\n\n\t\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t\t}\n\n\t\t\treturn new THREE.QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n\t\t},\n\n\t\tgenerateMorphTrack: function ( rawTracks ) {\n\n\t\t\tvar curves = rawTracks.DeformPercent.curves.morph;\n\t\t\tvar values = curves.values.map( function ( val ) {\n\n\t\t\t\treturn val / 100;\n\n\t\t\t} );\n\n\t\t\tvar morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\t\treturn new THREE.NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t\t},\n\n\t\t// For all animated objects, times are defined separately for each axis\n\t\t// Here we'll combine the times into one sorted array without duplicates\n\t\tgetTimesForAllAxes: function ( curves ) {\n\n\t\t\tvar times = [];\n\n\t\t\t// first join together the times for each axis, if defined\n\t\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t\t// then sort them and remove duplicates\n\t\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\t\treturn a - b;\n\n\t\t\t} ).filter( function ( elem, index, array ) {\n\n\t\t\t\treturn array.indexOf( elem ) == index;\n\n\t\t\t} );\n\n\t\t\treturn times;\n\n\t\t},\n\n\t\tgetKeyframeTrackValues: function ( times, curves, initialValue ) {\n\n\t\t\tvar prevValue = initialValue;\n\n\t\t\tvar values = [];\n\n\t\t\tvar xIndex = - 1;\n\t\t\tvar yIndex = - 1;\n\t\t\tvar zIndex = - 1;\n\n\t\t\ttimes.forEach( function ( time ) {\n\n\t\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t\t// if there is an x value defined for this frame, use that\n\t\t\t\tif ( xIndex !== - 1 ) {\n\n\t\t\t\t\tvar xValue = curves.x.values[ xIndex ];\n\t\t\t\t\tvalues.push( xValue );\n\t\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( yIndex !== - 1 ) {\n\n\t\t\t\t\tvar yValue = curves.y.values[ yIndex ];\n\t\t\t\t\tvalues.push( yValue );\n\t\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( zIndex !== - 1 ) {\n\n\t\t\t\t\tvar zValue = curves.z.values[ zIndex ];\n\t\t\t\t\tvalues.push( zValue );\n\t\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn values;\n\n\t\t},\n\n\t\t// Rotations are defined as Euler angles which can have values  of any size\n\t\t// These will be converted to quaternions which don't support values greater than\n\t\t// PI, so we'll interpolate large rotations\n\t\tinterpolateRotations: function ( curve ) {\n\n\t\t\tfor ( var i = 1; i < curve.values.length; i ++ ) {\n\n\t\t\t\tvar initialValue = curve.values[ i - 1 ];\n\t\t\t\tvar valuesSpan = curve.values[ i ] - initialValue;\n\n\t\t\t\tvar absoluteSpan = Math.abs( valuesSpan );\n\n\t\t\t\tif ( absoluteSpan >= 180 ) {\n\n\t\t\t\t\tvar numSubIntervals = absoluteSpan / 180;\n\n\t\t\t\t\tvar step = valuesSpan / numSubIntervals;\n\t\t\t\t\tvar nextValue = initialValue + step;\n\n\t\t\t\t\tvar initialTime = curve.times[ i - 1 ];\n\t\t\t\t\tvar timeSpan = curve.times[ i ] - initialTime;\n\t\t\t\t\tvar interval = timeSpan / numSubIntervals;\n\t\t\t\t\tvar nextTime = initialTime + interval;\n\n\t\t\t\t\tvar interpolatedTimes = [];\n\t\t\t\t\tvar interpolatedValues = [];\n\n\t\t\t\t\twhile ( nextTime < curve.times[ i ] ) {\n\n\t\t\t\t\t\tinterpolatedTimes.push( nextTime );\n\t\t\t\t\t\tnextTime += interval;\n\n\t\t\t\t\t\tinterpolatedValues.push( nextValue );\n\t\t\t\t\t\tnextValue += step;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurve.times = inject( curve.times, i, interpolatedTimes );\n\t\t\t\t\tcurve.values = inject( curve.values, i, interpolatedValues );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t};\n\n\t// parse an FBX file in ASCII format\n\tfunction TextParser() {}\n\n\tTextParser.prototype = {\n\n\t\tconstructor: TextParser,\n\n\t\tgetPrevNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t\t},\n\n\t\tgetCurrentNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t\t},\n\n\t\tgetCurrentProp: function () {\n\n\t\t\treturn this.currentProp;\n\n\t\t},\n\n\t\tpushStack: function ( node ) {\n\n\t\t\tthis.nodeStack.push( node );\n\t\t\tthis.currentIndent += 1;\n\n\t\t},\n\n\t\tpopStack: function () {\n\n\t\t\tthis.nodeStack.pop();\n\t\t\tthis.currentIndent -= 1;\n\n\t\t},\n\n\t\tsetCurrentProp: function ( val, name ) {\n\n\t\t\tthis.currentProp = val;\n\t\t\tthis.currentPropName = name;\n\n\t\t},\n\n\t\tparse: function ( text ) {\n\n\t\t\tthis.currentIndent = 0;\n\t\t\tconsole.log(\"FBXTree: \", FBXTree);\n\t\t\tthis.allNodes = new FBXTree();\n\t\t\tthis.nodeStack = [];\n\t\t\tthis.currentProp = [];\n\t\t\tthis.currentPropName = '';\n\n\t\t\tvar self = this;\n\n\t\t\tvar split = text.split( /[\\r\\n]+/ );\n\n\t\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\t\tvar matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\t\tvar matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\t\tvar matchBeginning = line.match( '^\\\\t{' + self.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\t\tvar matchProperty = line.match( '^\\\\t{' + ( self.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\t\tvar matchEnd = line.match( '^\\\\t{' + ( self.currentIndent - 1 ) + '}}' );\n\n\t\t\t\tif ( matchBeginning ) {\n\n\t\t\t\t\tself.parseNodeBegin( line, matchBeginning );\n\n\t\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\t\tself.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\t\tself.popStack();\n\n\t\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\t\tself.parseNodePropertyContinued( line );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this.allNodes;\n\n\t\t},\n\n\t\tparseNodeBegin: function ( line, property ) {\n\n\t\t\tvar nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\tvar nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\t} );\n\n\t\t\tvar node = { name: nodeName };\n\t\t\tvar attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\t// a top node\n\t\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t\t} else { // a subnode\n\n\t\t\t\t// if the subnode already exists, append it\n\t\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\t\tthis.pushStack( node );\n\n\t\t},\n\n\t\tparseNodeAttr: function ( attrs ) {\n\n\t\t\tvar id = attrs[ 0 ];\n\n\t\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = '', type = '';\n\n\t\t\tif ( attrs.length > 1 ) {\n\n\t\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\t\ttype = attrs[ 2 ];\n\n\t\t\t}\n\n\t\t\treturn { id: id, name: name, type: type };\n\n\t\t},\n\n\t\tparseNodeProperty: function ( line, property, contentLine ) {\n\n\t\t\tvar propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\t\tvar propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t\t//\tContent: ,\n\t\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t\t}\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\t\t\tvar parentName = currentNode.name;\n\n\t\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// Connections\n\t\t\tif ( propName === 'C' ) {\n\n\t\t\t\tvar connProps = propValue.split( ',' ).slice( 1 );\n\t\t\t\tvar from = parseInt( connProps[ 0 ] );\n\t\t\t\tvar to = parseInt( connProps[ 1 ] );\n\n\t\t\t\tvar rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t\t} );\n\n\t\t\t\tpropName = 'connections';\n\t\t\t\tpropValue = [ from, to ];\n\t\t\t\tappend( propValue, rest );\n\n\t\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Node\n\t\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t\t// connections\n\t\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t\t} else {\n\n\t\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\t\telse currentNode.a = propValue;\n\n\t\t\t}\n\n\t\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseNodePropertyContinued: function ( line ) {\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\tcurrentNode.a += line;\n\n\t\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t\t// so convert the string to an array\n\t\t\tif ( line.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse \"Property70\"\n\t\tparseNodeSpecialProperty: function ( line, propName, propValue ) {\n\n\t\t\t// split this\n\t\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t\t// into array like below\n\t\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\t\tvar props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t\t} );\n\n\t\t\tvar innerPropName = props[ 0 ];\n\t\t\tvar innerPropType1 = props[ 1 ];\n\t\t\tvar innerPropType2 = props[ 2 ];\n\t\t\tvar innerPropFlag = props[ 3 ];\n\t\t\tvar innerPropValue = props[ 4 ];\n\n\t\t\t// cast values where needed, otherwise leave as strings\n\t\t\tswitch ( innerPropType1 ) {\n\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'enum':\n\t\t\t\tcase 'bool':\n\t\t\t\tcase 'ULongLong':\n\t\t\t\tcase 'double':\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'FieldOfView':\n\t\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Color':\n\t\t\t\tcase 'ColorRGB':\n\t\t\t\tcase 'Vector3D':\n\t\t\t\tcase 'Lcl_Translation':\n\t\t\t\tcase 'Lcl_Rotation':\n\t\t\t\tcase 'Lcl_Scaling':\n\t\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t// CAUTION: these props must append to parent's parent\n\t\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t\t},\n\n\t};\n\n\t// Parse an FBX file in Binary format\n\tfunction BinaryParser() {}\n\n\tBinaryParser.prototype = {\n\n\t\tconstructor: BinaryParser,\n\n\t\tparse: function ( buffer ) {\n\n\t\t\tvar reader = new BinaryReader( buffer );\n\t\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\t\tvar version = reader.getUint32();\n\n\t\t\tconsole.log( 'THREE.FBXLoader: FBX binary version: ' + version );\n\n\t\t\tvar allNodes = new FBXTree();\n\n\t\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\t\tvar node = this.parseNode( reader, version );\n\t\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t\t}\n\n\t\t\treturn allNodes;\n\n\t\t},\n\n\t\t// Check if reader has reached the end of content.\n\t\tendOfContent: function ( reader ) {\n\n\t\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t\t// - 16bytes: magic\n\t\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t\t// - 4bytes: magic\n\t\t\t// - 4bytes: version\n\t\t\t// - 120bytes: zero\n\t\t\t// - 16bytes: magic\n\t\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n\t\t\t} else {\n\n\t\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t\t}\n\n\t\t},\n\n\t\t// recursively parse nodes until the end of the file is reached\n\t\tparseNode: function ( reader, version ) {\n\n\t\t\tvar node = {};\n\n\t\t\t// The first three data sizes depends on version.\n\t\t\tvar endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\t\tvar numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t\t// note: do not remove this even if you get a linter warning as it moves the buffer forward\n\t\t\tvar propertyListLen = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t\tvar nameLen = reader.getUint8();\n\t\t\tvar name = reader.getString( nameLen );\n\n\t\t\t// Regards this node as NULL-record if endOffset is zero\n\t\t\tif ( endOffset === 0 ) return null;\n\n\t\t\tvar propertyList = [];\n\n\t\t\tfor ( var i = 0; i < numProperties; i ++ ) {\n\n\t\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t\t}\n\n\t\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\t\tvar id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\t\tvar attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\t\tvar attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t\t// check if this node represents just a single property\n\t\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\t\tvar subNode = this.parseNode( reader, version );\n\n\t\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t\t}\n\n\t\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\t\tif ( typeof id === 'number' ) node.id = id;\n\t\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\t\tif ( name !== '' ) node.name = name;\n\n\t\t\treturn node;\n\n\t\t},\n\n\t\tparseSubNode: function ( name, node, subNode ) {\n\n\t\t\t// special case: child node is single property\n\t\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\t\tvar value = subNode.propertyList[ 0 ];\n\n\t\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t\tsubNode.a = value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t\t}\n\n\t\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\t\tnode.connections = [];\n\n\t\t\t\t}\n\n\t\t\t\tnode.connections.push( array );\n\n\t\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\t\tvar keys = Object.keys( subNode );\n\n\t\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t\t} );\n\n\t\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\t\tvar innerPropName = subNode.propertyList[ 0 ];\n\t\t\t\tvar innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\t\tvar innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\t\tvar innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\t\tvar innerPropValue;\n\n\t\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\t\tinnerPropValue = [\n\t\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t\t];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t\t}\n\n\t\t\t\t// this will be copied to parent, see above\n\t\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t\t'type': innerPropType1,\n\t\t\t\t\t'type2': innerPropType2,\n\t\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t\t'value': innerPropValue\n\n\t\t\t\t};\n\n\t\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseProperty: function ( reader ) {\n\n\t\t\tvar type = reader.getString( 1 );\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'C':\n\t\t\t\t\treturn reader.getBoolean();\n\n\t\t\t\tcase 'D':\n\t\t\t\t\treturn reader.getFloat64();\n\n\t\t\t\tcase 'F':\n\t\t\t\t\treturn reader.getFloat32();\n\n\t\t\t\tcase 'I':\n\t\t\t\t\treturn reader.getInt32();\n\n\t\t\t\tcase 'L':\n\t\t\t\t\treturn reader.getInt64();\n\n\t\t\t\tcase 'R':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\t\tcase 'S':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getString( length );\n\n\t\t\t\tcase 'Y':\n\t\t\t\t\treturn reader.getInt16();\n\n\t\t\t\tcase 'b':\n\t\t\t\tcase 'c':\n\t\t\t\tcase 'd':\n\t\t\t\tcase 'f':\n\t\t\t\tcase 'i':\n\t\t\t\tcase 'l':\n\n\t\t\t\t\tvar arrayLength = reader.getUint32();\n\t\t\t\t\tvar encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\t\tvar compressedLength = reader.getUint32();\n\n\t\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( typeof Zlib === 'undefined' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar inflate = new Zlib.Inflate( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef\n\t\t\t\t\tvar reader2 = new BinaryReader( inflate.decompress().buffer );\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction BinaryReader( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\n\t}\n\n\tBinaryReader.prototype = {\n\n\t\tconstructor: BinaryReader,\n\n\t\tgetOffset: function () {\n\n\t\t\treturn this.offset;\n\n\t\t},\n\n\t\tsize: function () {\n\n\t\t\treturn this.dv.buffer.byteLength;\n\n\t\t},\n\n\t\tskip: function ( length ) {\n\n\t\t\tthis.offset += length;\n\n\t\t},\n\n\t\t// seems like true/false representation depends on exporter.\n\t\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t\t// then sees LSB.\n\t\tgetBoolean: function () {\n\n\t\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t\t},\n\n\t\tgetBooleanArray: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getBoolean() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint8: function () {\n\n\t\t\tvar value = this.dv.getUint8( this.offset );\n\t\t\tthis.offset += 1;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt16: function () {\n\n\t\t\tvar value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\t\tthis.offset += 2;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32: function () {\n\n\t\t\tvar value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint32: function () {\n\n\t\t\tvar value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t\t// There's a possibility that this method returns wrong value if the value\n\t\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t\t// TODO: safely handle 64-bit integer\n\t\tgetInt64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\t// calculate negative value\n\t\t\tif ( high & 0x80000000 ) {\n\n\t\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetInt64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\t// Note: see getInt64() comment\n\t\tgetUint64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetFloat32: function () {\n\n\t\t\tvar value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetFloat64: function () {\n\n\t\t\tvar value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\t\tthis.offset += 8;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetArrayBuffer: function ( size ) {\n\n\t\t\tvar value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\t\tthis.offset += size;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetString: function ( size ) {\n\n\t\t\t// note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta[ i ] = this.getUint8();\n\n\t\t\t}\n\n\t\t\tvar nullByte = a.indexOf( 0 );\n\t\t\tif ( nullByte >= 0 ) a = a.slice( 0, nullByte );\n\n\t\t\treturn THREE.LoaderUtils.decodeText( new Uint8Array( a ) );\n\n\t\t}\n\n\t};\n\n\t// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n\t// and BinaryParser( FBX Binary format)\n\tfunction FBXTree() {}\n\n\tFBXTree.prototype = {\n\n\t\tconstructor: FBXTree,\n\n\t\tadd: function ( key, val ) {\n\n\t\t\tthis[ key ] = val;\n\n\t\t},\n\n\t};\n\n\t// ************** UTILITY FUNCTIONS **************\n\n\tfunction isFbxFormatBinary( buffer ) {\n\n\t\tvar CORRECT = 'Kaydara FBX Binary  \\0';\n\n\t\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n\t}\n\n\tfunction isFbxFormatASCII( text ) {\n\n\t\tvar CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\t\tvar cursor = 0;\n\n\t\tfunction read( offset ) {\n\n\t\t\tvar result = text[ offset - 1 ];\n\t\t\ttext = text.slice( cursor + offset );\n\t\t\tcursor ++;\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < CORRECT.length; ++ i ) {\n\n\t\t\tvar num = read( 1 );\n\t\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction getFbxVersion( text ) {\n\n\t\tvar versionRegExp = /FBXVersion: (\\d+)/;\n\t\tvar match = text.match( versionRegExp );\n\t\tif ( match ) {\n\n\t\t\tvar version = parseInt( match[ 1 ] );\n\t\t\treturn version;\n\n\t\t}\n\t\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n\t}\n\n\t// Converts FBX ticks into real time seconds.\n\tfunction convertFBXTimeToSeconds( time ) {\n\n\t\treturn time / 46186158000;\n\n\t}\n\n\tvar dataArray = [];\n\n\t// extracts the data from the correct position in the FBX array based on indexing type\n\tfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\t\tvar index;\n\n\t\tswitch ( infoObject.mappingType ) {\n\n\t\t\tcase 'ByPolygonVertex' :\n\t\t\t\tindex = polygonVertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByPolygon' :\n\t\t\t\tindex = polygonIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByVertice' :\n\t\t\t\tindex = vertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'AllSame' :\n\t\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t\t}\n\n\t\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\t\tvar from = index * infoObject.dataSize;\n\t\tvar to = from + infoObject.dataSize;\n\n\t\treturn slice( dataArray, infoObject.buffer, from, to );\n\n\t}\n\n\tvar tempMat = new THREE.Matrix4();\n\tvar tempEuler = new THREE.Euler();\n\tvar tempVec = new THREE.Vector3();\n\tvar translation = new THREE.Vector3();\n\tvar rotation = new THREE.Matrix4();\n\n\t// generate transformation from FBX transform data\n\t// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n\t// transformData = {\n\t//\t eulerOrder: int,\n\t//\t translation: [],\n\t//   rotationOffset: [],\n\t//\t preRotation\n\t//\t rotation\n\t//\t postRotation\n\t//   scale\n\t// }\n\t// all entries are optional\n\tfunction generateTransform( transformData ) {\n\n\t\tvar transform = new THREE.Matrix4();\n\t\ttranslation.set( 0, 0, 0 );\n\t\trotation.identity();\n\n\t\tvar order = ( transformData.eulerOrder ) ? getEulerOrder( transformData.eulerOrder ) : getEulerOrder( 0 );\n\n\t\tif ( transformData.translation ) translation.fromArray( transformData.translation );\n\t\tif ( transformData.rotationOffset ) translation.add( tempVec.fromArray( transformData.rotationOffset ) );\n\n\t\tif ( transformData.rotation ) {\n\n\t\t\tvar array = transformData.rotation.map( THREE.MathUtils.degToRad );\n\t\t\tarray.push( order );\n\t\t\trotation.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t}\n\n\t\tif ( transformData.preRotation ) {\n\n\t\t\tvar array = transformData.preRotation.map( THREE.MathUtils.degToRad );\n\t\t\tarray.push( order );\n\t\t\ttempMat.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t\trotation.premultiply( tempMat );\n\n\t\t}\n\n\t\tif ( transformData.postRotation ) {\n\n\t\t\tvar array = transformData.postRotation.map( THREE.MathUtils.degToRad );\n\t\t\tarray.push( order );\n\t\t\ttempMat.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t\ttempMat.getInverse( tempMat );\n\n\t\t\trotation.multiply( tempMat );\n\n\t\t}\n\n\t\tif ( transformData.scale ) transform.scale( tempVec.fromArray( transformData.scale ) );\n\n\t\ttransform.setPosition( translation );\n\t\ttransform.multiply( rotation );\n\n\t\treturn transform;\n\n\t}\n\n\t// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n\t// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n\tfunction getEulerOrder( order ) {\n\n\t\tvar enums = [\n\t\t\t'ZYX', // -> XYZ extrinsic\n\t\t\t'YZX', // -> XZY extrinsic\n\t\t\t'XZY', // -> YZX extrinsic\n\t\t\t'ZXY', // -> YXZ extrinsic\n\t\t\t'YXZ', // -> ZXY extrinsic\n\t\t\t'XYZ', // -> ZYX extrinsic\n\t\t//'SphericXYZ', // not possible to support\n\t\t];\n\n\t\tif ( order === 6 ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\t\treturn enums[ 0 ];\n\n\t\t}\n\n\t\treturn enums[ order ];\n\n\t}\n\n\t// Parses comma separated list of numbers and returns them an array.\n\t// Used internally by the TextParser\n\tfunction parseNumberArray( value ) {\n\n\t\tvar array = value.split( ',' ).map( function ( val ) {\n\n\t\t\treturn parseFloat( val );\n\n\t\t} );\n\n\t\treturn array;\n\n\t}\n\n\tfunction convertArrayBufferToString( buffer, from, to ) {\n\n\t\tif ( from === undefined ) from = 0;\n\t\tif ( to === undefined ) to = buffer.byteLength;\n\n\t\treturn THREE.LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );\n\n\t}\n\n\tfunction append( a, b ) {\n\n\t\tfor ( var i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t}\n\n\tfunction slice( a, b, from, to ) {\n\n\t\tfor ( var i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// inject array a2 into array a1 at index\n\tfunction inject( a1, index, a2 ) {\n\n\t\treturn a1.slice( 0, index ).concat( a2 ).concat( a1.slice( index ) );\n\n\t}\n\n\treturn FBXLoader;\n\n} )();\n","module.exports = Object.assign(function GamepadButton () {}, {\n\tFACE_1: 0,\n\tFACE_2: 1,\n\tFACE_3: 2,\n\tFACE_4: 3,\n\n\tL_SHOULDER_1: 4,\n\tR_SHOULDER_1: 5,\n\tL_SHOULDER_2: 6,\n\tR_SHOULDER_2: 7,\n\n\tSELECT: 8,\n\tSTART: 9,\n\n\tDPAD_UP: 12,\n\tDPAD_DOWN: 13,\n\tDPAD_LEFT: 14,\n\tDPAD_RIGHT: 15,\n\n\tVENDOR: 16,\n});\n","function GamepadButtonEvent (type, index, details) {\n  this.type = type;\n  this.index = index;\n  this.pressed = details.pressed;\n  this.value = details.value;\n}\n\nmodule.exports = GamepadButtonEvent;\n","/**\n * Source: https://github.com/Adobe-Marketing-Cloud/fetch-script\n */\n\nfunction getScriptId() {\n  return 'script_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n}\n\nfunction createScript(url, id) {\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.id = id;\n  script.src = url;\n\n  return script;\n}\n\nfunction removeScript(id) {\n  const script = document.getElementById(id);\n  const parent = script.parentNode;\n\n  try {\n    parent && parent.removeChild(script);\n  } catch (e) {\n    // ignore\n  }\n}\n\nfunction appendScript(script) {\n  const firstScript = document.getElementsByTagName('script')[0];\n  firstScript.parentNode.insertBefore(script, firstScript);\n}\n\nfunction fetchScriptInternal(url, options, Promise) {\n  return new Promise(function(resolve, reject) {\n    const timeout = options.timeout || 5000;\n    const scriptId = getScriptId();\n    const script = createScript(url, scriptId);\n\n    const timeoutId = setTimeout(function() {\n      reject(new Error('Script request to ' + url + ' timed out'));\n\n      removeScript(scriptId);\n    }, timeout);\n\n    const disableTimeout = function(timeoutId) { clearTimeout(timeoutId); };\n\n    script.addEventListener('load', function(e) {\n      resolve({ok: true});\n\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n\n    script.addEventListener('error', function(e) {\n      reject(new Error('Script request to ' + url + ' failed ' + e));\n\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n\n    appendScript(script);\n  });\n}\n\nfunction fetchScript(settings) {\n  settings = settings || {};\n  return function (url, options) {\n    options = options || {};\n    return fetchScriptInternal(url, options, settings.Promise || Promise);\n  };\n}\n\nmodule.exports = fetchScript;\n","/**\n * Polyfill for the additional KeyboardEvent properties defined in the D3E and\n * D4E draft specifications, by @inexorabletash.\n *\n * See: https://github.com/inexorabletash/polyfill\n */\n(function(global) {\n  var nativeKeyboardEvent = ('KeyboardEvent' in global);\n  if (!nativeKeyboardEvent)\n    global.KeyboardEvent = function KeyboardEvent() { throw TypeError('Illegal constructor'); };\n\n  if (!('DOM_KEY_LOCATION_STANDARD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_STANDARD = 0x00; // Default or unknown location\n  if (!('DOM_KEY_LOCATION_LEFT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_LEFT          = 0x01; // e.g. Left Alt key\n  if (!('DOM_KEY_LOCATION_RIGHT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_RIGHT         = 0x02; // e.g. Right Alt key\n  if (!('DOM_KEY_LOCATION_NUMPAD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD        = 0x03; // e.g. Numpad 0 or +\n\n  var STANDARD = window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,\n      LEFT = window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,\n      RIGHT = window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,\n      NUMPAD = window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;\n\n  //--------------------------------------------------------------------\n  //\n  // Utilities\n  //\n  //--------------------------------------------------------------------\n\n  function contains(s, ss) { return String(s).indexOf(ss) !== -1; }\n\n  var os = (function() {\n    if (contains(navigator.platform, 'Win')) { return 'win'; }\n    if (contains(navigator.platform, 'Mac')) { return 'mac'; }\n    if (contains(navigator.platform, 'CrOS')) { return 'cros'; }\n    if (contains(navigator.platform, 'Linux')) { return 'linux'; }\n    if (contains(navigator.userAgent, 'iPad') || contains(navigator.platform, 'iPod') || contains(navigator.platform, 'iPhone')) { return 'ios'; }\n    return '';\n  } ());\n\n  var browser = (function() {\n    if (contains(navigator.userAgent, 'Chrome/')) { return 'chrome'; }\n    if (contains(navigator.vendor, 'Apple')) { return 'safari'; }\n    if (contains(navigator.userAgent, 'MSIE')) { return 'ie'; }\n    if (contains(navigator.userAgent, 'Gecko/')) { return 'moz'; }\n    if (contains(navigator.userAgent, 'Opera/')) { return 'opera'; }\n    return '';\n  } ());\n\n  var browser_os = browser + '-' + os;\n\n  function mergeIf(baseTable, select, table) {\n    if (browser_os === select || browser === select || os === select) {\n      Object.keys(table).forEach(function(keyCode) {\n        baseTable[keyCode] = table[keyCode];\n      });\n    }\n  }\n\n  function remap(o, key) {\n    var r = {};\n    Object.keys(o).forEach(function(k) {\n      var item = o[k];\n      if (key in item) {\n        r[item[key]] = item;\n      }\n    });\n    return r;\n  }\n\n  function invert(o) {\n    var r = {};\n    Object.keys(o).forEach(function(k) {\n      r[o[k]] = k;\n    });\n    return r;\n  }\n\n  //--------------------------------------------------------------------\n  //\n  // Generic Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // \"keyInfo\" is a dictionary:\n  //   code: string - name from DOM Level 3 KeyboardEvent code Values\n  //     https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-code.html\n  //   location (optional): number - one of the DOM_KEY_LOCATION values\n  //   keyCap (optional): string - keyboard label in en-US locale\n  // USB code Usage ID from page 0x07 unless otherwise noted (Informative)\n\n  // Map of keyCode to keyInfo\n  var keyCodeToInfoTable = {\n    // 0x01 - VK_LBUTTON\n    // 0x02 - VK_RBUTTON\n    0x03: { code: 'Cancel' }, // [USB: 0x9b] char \\x0018 ??? (Not in D3E)\n    // 0x04 - VK_MBUTTON\n    // 0x05 - VK_XBUTTON1\n    // 0x06 - VK_XBUTTON2\n    0x06: { code: 'Help' }, // [USB: 0x75] ???\n    // 0x07 - undefined\n    0x08: { code: 'Backspace' }, // [USB: 0x2a] Labelled Delete on Macintosh keyboards.\n    0x09: { code: 'Tab' }, // [USB: 0x2b]\n    // 0x0A-0x0B - reserved\n    0X0C: { code: 'Clear' }, // [USB: 0x9c] NumPad Center (Not in D3E)\n    0X0D: { code: 'Enter' }, // [USB: 0x28]\n    // 0x0E-0x0F - undefined\n\n    0x10: { code: 'Shift' },\n    0x11: { code: 'Control' },\n    0x12: { code: 'Alt' },\n    0x13: { code: 'Pause' }, // [USB: 0x48]\n    0x14: { code: 'CapsLock' }, // [USB: 0x39]\n    0x15: { code: 'KanaMode' }, // [USB: 0x88] - \"HangulMode\" for Korean layout\n    0x16: { code: 'HangulMode' }, // [USB: 0x90] 0x15 as well in MSDN VK table ???\n    0x17: { code: 'JunjaMode' }, // (Not in D3E)\n    0x18: { code: 'FinalMode' }, // (Not in D3E)\n    0x19: { code: 'KanjiMode' }, // [USB: 0x91] - \"HanjaMode\" for Korean layout\n    // 0x1A - undefined\n    0x1B: { code: 'Escape' }, // [USB: 0x29]\n    0x1C: { code: 'Convert' }, // [USB: 0x8a]\n    0x1D: { code: 'NonConvert' }, // [USB: 0x8b]\n    0x1E: { code: 'Accept' }, // (Not in D3E)\n    0x1F: { code: 'ModeChange' }, // (Not in D3E)\n\n    0x20: { code: 'Space' }, // [USB: 0x2c]\n    0x21: { code: 'PageUp' }, // [USB: 0x4b]\n    0x22: { code: 'PageDown' }, // [USB: 0x4e]\n    0x23: { code: 'End' }, // [USB: 0x4d]\n    0x24: { code: 'Home' }, // [USB: 0x4a]\n    0x25: { code: 'ArrowLeft' }, // [USB: 0x50]\n    0x26: { code: 'ArrowUp' }, // [USB: 0x52]\n    0x27: { code: 'ArrowRight' }, // [USB: 0x4f]\n    0x28: { code: 'ArrowDown' }, // [USB: 0x51]\n    0x29: { code: 'Select' }, // (Not in D3E)\n    0x2A: { code: 'Print' }, // (Not in D3E)\n    0x2B: { code: 'Execute' }, // [USB: 0x74] (Not in D3E)\n    0x2C: { code: 'PrintScreen' }, // [USB: 0x46]\n    0x2D: { code: 'Insert' }, // [USB: 0x49]\n    0x2E: { code: 'Delete' }, // [USB: 0x4c]\n    0x2F: { code: 'Help' }, // [USB: 0x75] ???\n\n    0x30: { code: 'Digit0', keyCap: '0' }, // [USB: 0x27] 0)\n    0x31: { code: 'Digit1', keyCap: '1' }, // [USB: 0x1e] 1!\n    0x32: { code: 'Digit2', keyCap: '2' }, // [USB: 0x1f] 2@\n    0x33: { code: 'Digit3', keyCap: '3' }, // [USB: 0x20] 3#\n    0x34: { code: 'Digit4', keyCap: '4' }, // [USB: 0x21] 4$\n    0x35: { code: 'Digit5', keyCap: '5' }, // [USB: 0x22] 5%\n    0x36: { code: 'Digit6', keyCap: '6' }, // [USB: 0x23] 6^\n    0x37: { code: 'Digit7', keyCap: '7' }, // [USB: 0x24] 7&\n    0x38: { code: 'Digit8', keyCap: '8' }, // [USB: 0x25] 8*\n    0x39: { code: 'Digit9', keyCap: '9' }, // [USB: 0x26] 9(\n    // 0x3A-0x40 - undefined\n\n    0x41: { code: 'KeyA', keyCap: 'a' }, // [USB: 0x04]\n    0x42: { code: 'KeyB', keyCap: 'b' }, // [USB: 0x05]\n    0x43: { code: 'KeyC', keyCap: 'c' }, // [USB: 0x06]\n    0x44: { code: 'KeyD', keyCap: 'd' }, // [USB: 0x07]\n    0x45: { code: 'KeyE', keyCap: 'e' }, // [USB: 0x08]\n    0x46: { code: 'KeyF', keyCap: 'f' }, // [USB: 0x09]\n    0x47: { code: 'KeyG', keyCap: 'g' }, // [USB: 0x0a]\n    0x48: { code: 'KeyH', keyCap: 'h' }, // [USB: 0x0b]\n    0x49: { code: 'KeyI', keyCap: 'i' }, // [USB: 0x0c]\n    0x4A: { code: 'KeyJ', keyCap: 'j' }, // [USB: 0x0d]\n    0x4B: { code: 'KeyK', keyCap: 'k' }, // [USB: 0x0e]\n    0x4C: { code: 'KeyL', keyCap: 'l' }, // [USB: 0x0f]\n    0x4D: { code: 'KeyM', keyCap: 'm' }, // [USB: 0x10]\n    0x4E: { code: 'KeyN', keyCap: 'n' }, // [USB: 0x11]\n    0x4F: { code: 'KeyO', keyCap: 'o' }, // [USB: 0x12]\n\n    0x50: { code: 'KeyP', keyCap: 'p' }, // [USB: 0x13]\n    0x51: { code: 'KeyQ', keyCap: 'q' }, // [USB: 0x14]\n    0x52: { code: 'KeyR', keyCap: 'r' }, // [USB: 0x15]\n    0x53: { code: 'KeyS', keyCap: 's' }, // [USB: 0x16]\n    0x54: { code: 'KeyT', keyCap: 't' }, // [USB: 0x17]\n    0x55: { code: 'KeyU', keyCap: 'u' }, // [USB: 0x18]\n    0x56: { code: 'KeyV', keyCap: 'v' }, // [USB: 0x19]\n    0x57: { code: 'KeyW', keyCap: 'w' }, // [USB: 0x1a]\n    0x58: { code: 'KeyX', keyCap: 'x' }, // [USB: 0x1b]\n    0x59: { code: 'KeyY', keyCap: 'y' }, // [USB: 0x1c]\n    0x5A: { code: 'KeyZ', keyCap: 'z' }, // [USB: 0x1d]\n    0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\n    0x5C: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\n    0x5D: { code: 'ContextMenu' }, // [USB: 0x65] Context Menu\n    // 0x5E - reserved\n    0x5F: { code: 'Standby' }, // [USB: 0x82] Sleep\n\n    0x60: { code: 'Numpad0', keyCap: '0', location: NUMPAD }, // [USB: 0x62]\n    0x61: { code: 'Numpad1', keyCap: '1', location: NUMPAD }, // [USB: 0x59]\n    0x62: { code: 'Numpad2', keyCap: '2', location: NUMPAD }, // [USB: 0x5a]\n    0x63: { code: 'Numpad3', keyCap: '3', location: NUMPAD }, // [USB: 0x5b]\n    0x64: { code: 'Numpad4', keyCap: '4', location: NUMPAD }, // [USB: 0x5c]\n    0x65: { code: 'Numpad5', keyCap: '5', location: NUMPAD }, // [USB: 0x5d]\n    0x66: { code: 'Numpad6', keyCap: '6', location: NUMPAD }, // [USB: 0x5e]\n    0x67: { code: 'Numpad7', keyCap: '7', location: NUMPAD }, // [USB: 0x5f]\n    0x68: { code: 'Numpad8', keyCap: '8', location: NUMPAD }, // [USB: 0x60]\n    0x69: { code: 'Numpad9', keyCap: '9', location: NUMPAD }, // [USB: 0x61]\n    0x6A: { code: 'NumpadMultiply', keyCap: '*', location: NUMPAD }, // [USB: 0x55]\n    0x6B: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\n    0x6C: { code: 'NumpadComma', keyCap: ',', location: NUMPAD }, // [USB: 0x85]\n    0x6D: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD }, // [USB: 0x56]\n    0x6E: { code: 'NumpadDecimal', keyCap: '.', location: NUMPAD }, // [USB: 0x63]\n    0x6F: { code: 'NumpadDivide', keyCap: '/', location: NUMPAD }, // [USB: 0x54]\n\n    0x70: { code: 'F1' }, // [USB: 0x3a]\n    0x71: { code: 'F2' }, // [USB: 0x3b]\n    0x72: { code: 'F3' }, // [USB: 0x3c]\n    0x73: { code: 'F4' }, // [USB: 0x3d]\n    0x74: { code: 'F5' }, // [USB: 0x3e]\n    0x75: { code: 'F6' }, // [USB: 0x3f]\n    0x76: { code: 'F7' }, // [USB: 0x40]\n    0x77: { code: 'F8' }, // [USB: 0x41]\n    0x78: { code: 'F9' }, // [USB: 0x42]\n    0x79: { code: 'F10' }, // [USB: 0x43]\n    0x7A: { code: 'F11' }, // [USB: 0x44]\n    0x7B: { code: 'F12' }, // [USB: 0x45]\n    0x7C: { code: 'F13' }, // [USB: 0x68]\n    0x7D: { code: 'F14' }, // [USB: 0x69]\n    0x7E: { code: 'F15' }, // [USB: 0x6a]\n    0x7F: { code: 'F16' }, // [USB: 0x6b]\n\n    0x80: { code: 'F17' }, // [USB: 0x6c]\n    0x81: { code: 'F18' }, // [USB: 0x6d]\n    0x82: { code: 'F19' }, // [USB: 0x6e]\n    0x83: { code: 'F20' }, // [USB: 0x6f]\n    0x84: { code: 'F21' }, // [USB: 0x70]\n    0x85: { code: 'F22' }, // [USB: 0x71]\n    0x86: { code: 'F23' }, // [USB: 0x72]\n    0x87: { code: 'F24' }, // [USB: 0x73]\n    // 0x88-0x8F - unassigned\n\n    0x90: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n    0x91: { code: 'ScrollLock' }, // [USB: 0x47]\n    // 0x92-0x96 - OEM specific\n    // 0x97-0x9F - unassigned\n\n    // NOTE: 0xA0-0xA5 usually mapped to 0x10-0x12 in browsers\n    0xA0: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\n    0xA1: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\n    0xA2: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\n    0xA3: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\n    0xA4: { code: 'AltLeft', location: LEFT }, // [USB: 0xe2]\n    0xA5: { code: 'AltRight', location: RIGHT }, // [USB: 0xe6]\n\n    0xA6: { code: 'BrowserBack' }, // [USB: 0x0c/0x0224]\n    0xA7: { code: 'BrowserForward' }, // [USB: 0x0c/0x0225]\n    0xA8: { code: 'BrowserRefresh' }, // [USB: 0x0c/0x0227]\n    0xA9: { code: 'BrowserStop' }, // [USB: 0x0c/0x0226]\n    0xAA: { code: 'BrowserSearch' }, // [USB: 0x0c/0x0221]\n    0xAB: { code: 'BrowserFavorites' }, // [USB: 0x0c/0x0228]\n    0xAC: { code: 'BrowserHome' }, // [USB: 0x0c/0x0222]\n    0xAD: { code: 'VolumeMute' }, // [USB: 0x7f]\n    0xAE: { code: 'VolumeDown' }, // [USB: 0x81]\n    0xAF: { code: 'VolumeUp' }, // [USB: 0x80]\n\n    0xB0: { code: 'MediaTrackNext' }, // [USB: 0x0c/0x00b5]\n    0xB1: { code: 'MediaTrackPrevious' }, // [USB: 0x0c/0x00b6]\n    0xB2: { code: 'MediaStop' }, // [USB: 0x0c/0x00b7]\n    0xB3: { code: 'MediaPlayPause' }, // [USB: 0x0c/0x00cd]\n    0xB4: { code: 'LaunchMail' }, // [USB: 0x0c/0x018a]\n    0xB5: { code: 'MediaSelect' },\n    0xB6: { code: 'LaunchApp1' },\n    0xB7: { code: 'LaunchApp2' },\n    // 0xB8-0xB9 - reserved\n    0xBA: { code: 'Semicolon',  keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\n    0xBB: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n    0xBC: { code: 'Comma', keyCap: ',' }, // [USB: 0x36] ,<\n    0xBD: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\n    0xBE: { code: 'Period', keyCap: '.' }, // [USB: 0x37] .>\n    0xBF: { code: 'Slash', keyCap: '/' }, // [USB: 0x38] /? (US Standard 101)\n\n    0xC0: { code: 'Backquote', keyCap: '`' }, // [USB: 0x35] `~ (US Standard 101)\n    // 0xC1-0xCF - reserved\n\n    // 0xD0-0xD7 - reserved\n    // 0xD8-0xDA - unassigned\n    0xDB: { code: 'BracketLeft', keyCap: '[' }, // [USB: 0x2f] [{ (US Standard 101)\n    0xDC: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n    0xDD: { code: 'BracketRight', keyCap: ']' }, // [USB: 0x30] ]} (US Standard 101)\n    0xDE: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n    // 0xDF - miscellaneous/varies\n\n    // 0xE0 - reserved\n    // 0xE1 - OEM specific\n    0xE2: { code: 'IntlBackslash',  keyCap: '\\\\' }, // [USB: 0x64] \\| (UK Standard 102)\n    // 0xE3-0xE4 - OEM specific\n    0xE5: { code: 'Process' }, // (Not in D3E)\n    // 0xE6 - OEM specific\n    // 0xE7 - VK_PACKET\n    // 0xE8 - unassigned\n    // 0xE9-0xEF - OEM specific\n\n    // 0xF0-0xF5 - OEM specific\n    0xF6: { code: 'Attn' }, // [USB: 0x9a] (Not in D3E)\n    0xF7: { code: 'CrSel' }, // [USB: 0xa3] (Not in D3E)\n    0xF8: { code: 'ExSel' }, // [USB: 0xa4] (Not in D3E)\n    0xF9: { code: 'EraseEof' }, // (Not in D3E)\n    0xFA: { code: 'Play' }, // (Not in D3E)\n    0xFB: { code: 'ZoomToggle' }, // (Not in D3E)\n    // 0xFC - VK_NONAME - reserved\n    // 0xFD - VK_PA1\n    0xFE: { code: 'Clear' } // [USB: 0x9c] (Not in D3E)\n  };\n\n  // No legacy keyCode, but listed in D3E:\n\n  // code: usb\n  // 'IntlHash': 0x070032,\n  // 'IntlRo': 0x070087,\n  // 'IntlYen': 0x070089,\n  // 'NumpadBackspace': 0x0700bb,\n  // 'NumpadClear': 0x0700d8,\n  // 'NumpadClearEntry': 0x0700d9,\n  // 'NumpadMemoryAdd': 0x0700d3,\n  // 'NumpadMemoryClear': 0x0700d2,\n  // 'NumpadMemoryRecall': 0x0700d1,\n  // 'NumpadMemoryStore': 0x0700d0,\n  // 'NumpadMemorySubtract': 0x0700d4,\n  // 'NumpadParenLeft': 0x0700b6,\n  // 'NumpadParenRight': 0x0700b7,\n\n  //--------------------------------------------------------------------\n  //\n  // Browser/OS Specific Mappings\n  //\n  //--------------------------------------------------------------------\n\n  mergeIf(keyCodeToInfoTable,\n          'moz', {\n            0x3B: { code: 'Semicolon', keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\n            0x3D: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n            0x6B: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n            0x6D: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\n            0xBB: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\n            0xBD: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD } // [USB: 0x56]\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'moz-mac', {\n            0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'moz-win', {\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'chrome-mac', {\n            0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n          });\n\n  // Windows via Bootcamp (!)\n  if (0) {\n    mergeIf(keyCodeToInfoTable,\n            'chrome-win', {\n              0xC0: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n              0xDE: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n              0xDF: { code: 'Backquote', keyCap: '`' } // [USB: 0x35] `~ (US Standard 101)\n            });\n\n    mergeIf(keyCodeToInfoTable,\n            'ie', {\n              0xC0: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n              0xDE: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n              0xDF: { code: 'Backquote', keyCap: '`' } // [USB: 0x35] `~ (US Standard 101)\n            });\n  }\n\n  mergeIf(keyCodeToInfoTable,\n          'safari', {\n            0x03: { code: 'Enter' }, // [USB: 0x28] old Safari\n            0x19: { code: 'Tab' } // [USB: 0x2b] old Safari for Shift+Tab\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'ios', {\n            0x0A: { code: 'Enter', location: STANDARD } // [USB: 0x28]\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'safari-mac', {\n            0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\n            0x5D: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\n            0xE5: { code: 'KeyQ', keyCap: 'Q' } // [USB: 0x14] On alternate presses, Ctrl+Q sends this\n          });\n\n  //--------------------------------------------------------------------\n  //\n  // Identifier Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // Cases where newer-ish browsers send keyIdentifier which can be\n  // used to disambiguate keys.\n\n  // keyIdentifierTable[keyIdentifier] -> keyInfo\n\n  var keyIdentifierTable = {};\n  if ('cros' === os) {\n    keyIdentifierTable['U+00A0'] = { code: 'ShiftLeft', location: LEFT };\n    keyIdentifierTable['U+00A1'] = { code: 'ShiftRight', location: RIGHT };\n    keyIdentifierTable['U+00A2'] = { code: 'ControlLeft', location: LEFT };\n    keyIdentifierTable['U+00A3'] = { code: 'ControlRight', location: RIGHT };\n    keyIdentifierTable['U+00A4'] = { code: 'AltLeft', location: LEFT };\n    keyIdentifierTable['U+00A5'] = { code: 'AltRight', location: RIGHT };\n  }\n  if ('chrome-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\n  }\n  if ('safari-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\n  }\n  if ('ios' === os) {\n    // These only generate keyup events\n    keyIdentifierTable['U+0010'] = { code: 'Function' };\n\n    keyIdentifierTable['U+001C'] = { code: 'ArrowLeft' };\n    keyIdentifierTable['U+001D'] = { code: 'ArrowRight' };\n    keyIdentifierTable['U+001E'] = { code: 'ArrowUp' };\n    keyIdentifierTable['U+001F'] = { code: 'ArrowDown' };\n\n    keyIdentifierTable['U+0001'] = { code: 'Home' }; // [USB: 0x4a] Fn + ArrowLeft\n    keyIdentifierTable['U+0004'] = { code: 'End' }; // [USB: 0x4d] Fn + ArrowRight\n    keyIdentifierTable['U+000B'] = { code: 'PageUp' }; // [USB: 0x4b] Fn + ArrowUp\n    keyIdentifierTable['U+000C'] = { code: 'PageDown' }; // [USB: 0x4e] Fn + ArrowDown\n  }\n\n  //--------------------------------------------------------------------\n  //\n  // Location Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // Cases where newer-ish browsers send location/keyLocation which\n  // can be used to disambiguate keys.\n\n  // locationTable[location][keyCode] -> keyInfo\n  var locationTable = [];\n  locationTable[LEFT] = {\n    0x10: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\n    0x11: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\n    0x12: { code: 'AltLeft', location: LEFT } // [USB: 0xe2]\n  };\n  locationTable[RIGHT] = {\n    0x10: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\n    0x11: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\n    0x12: { code: 'AltRight', location: RIGHT } // [USB: 0xe6]\n  };\n  locationTable[NUMPAD] = {\n    0x0D: { code: 'NumpadEnter', location: NUMPAD } // [USB: 0x58]\n  };\n\n  mergeIf(locationTable[NUMPAD], 'moz', {\n    0x6D: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\n    0x6B: { code: 'NumpadAdd', location: NUMPAD } // [USB: 0x57]\n  });\n  mergeIf(locationTable[LEFT], 'moz-mac', {\n    0xE0: { code: 'OSLeft', location: LEFT } // [USB: 0xe3]\n  });\n  mergeIf(locationTable[RIGHT], 'moz-mac', {\n    0xE0: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n  mergeIf(locationTable[RIGHT], 'moz-win', {\n    0x5B: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n\n\n  mergeIf(locationTable[RIGHT], 'mac', {\n    0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n\n  mergeIf(locationTable[NUMPAD], 'chrome-mac', {\n    0x0C: { code: 'NumLock', location: NUMPAD } // [USB: 0x53]\n  });\n\n  mergeIf(locationTable[NUMPAD], 'safari-mac', {\n    0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n    0xBB: { code: 'NumpadAdd', location: NUMPAD }, // [USB: 0x57]\n    0xBD: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\n    0xBE: { code: 'NumpadDecimal', location: NUMPAD }, // [USB: 0x63]\n    0xBF: { code: 'NumpadDivide', location: NUMPAD } // [USB: 0x54]\n  });\n\n\n  //--------------------------------------------------------------------\n  //\n  // Key Values\n  //\n  //--------------------------------------------------------------------\n\n  // Mapping from `code` values to `key` values. Values defined at:\n  // https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-key.html\n  // Entries are only provided when `key` differs from `code`. If\n  // printable, `shiftKey` has the shifted printable character. This\n  // assumes US Standard 101 layout\n\n  var codeToKeyTable = {\n    // Modifier Keys\n    ShiftLeft: { key: 'Shift' },\n    ShiftRight: { key: 'Shift' },\n    ControlLeft: { key: 'Control' },\n    ControlRight: { key: 'Control' },\n    AltLeft: { key: 'Alt' },\n    AltRight: { key: 'Alt' },\n    OSLeft: { key: 'OS' },\n    OSRight: { key: 'OS' },\n\n    // Whitespace Keys\n    NumpadEnter: { key: 'Enter' },\n    Space: { key: ' ' },\n\n    // Printable Keys\n    Digit0: { key: '0', shiftKey: ')' },\n    Digit1: { key: '1', shiftKey: '!' },\n    Digit2: { key: '2', shiftKey: '@' },\n    Digit3: { key: '3', shiftKey: '#' },\n    Digit4: { key: '4', shiftKey: '$' },\n    Digit5: { key: '5', shiftKey: '%' },\n    Digit6: { key: '6', shiftKey: '^' },\n    Digit7: { key: '7', shiftKey: '&' },\n    Digit8: { key: '8', shiftKey: '*' },\n    Digit9: { key: '9', shiftKey: '(' },\n    KeyA: { key: 'a', shiftKey: 'A' },\n    KeyB: { key: 'b', shiftKey: 'B' },\n    KeyC: { key: 'c', shiftKey: 'C' },\n    KeyD: { key: 'd', shiftKey: 'D' },\n    KeyE: { key: 'e', shiftKey: 'E' },\n    KeyF: { key: 'f', shiftKey: 'F' },\n    KeyG: { key: 'g', shiftKey: 'G' },\n    KeyH: { key: 'h', shiftKey: 'H' },\n    KeyI: { key: 'i', shiftKey: 'I' },\n    KeyJ: { key: 'j', shiftKey: 'J' },\n    KeyK: { key: 'k', shiftKey: 'K' },\n    KeyL: { key: 'l', shiftKey: 'L' },\n    KeyM: { key: 'm', shiftKey: 'M' },\n    KeyN: { key: 'n', shiftKey: 'N' },\n    KeyO: { key: 'o', shiftKey: 'O' },\n    KeyP: { key: 'p', shiftKey: 'P' },\n    KeyQ: { key: 'q', shiftKey: 'Q' },\n    KeyR: { key: 'r', shiftKey: 'R' },\n    KeyS: { key: 's', shiftKey: 'S' },\n    KeyT: { key: 't', shiftKey: 'T' },\n    KeyU: { key: 'u', shiftKey: 'U' },\n    KeyV: { key: 'v', shiftKey: 'V' },\n    KeyW: { key: 'w', shiftKey: 'W' },\n    KeyX: { key: 'x', shiftKey: 'X' },\n    KeyY: { key: 'y', shiftKey: 'Y' },\n    KeyZ: { key: 'z', shiftKey: 'Z' },\n    Numpad0: { key: '0' },\n    Numpad1: { key: '1' },\n    Numpad2: { key: '2' },\n    Numpad3: { key: '3' },\n    Numpad4: { key: '4' },\n    Numpad5: { key: '5' },\n    Numpad6: { key: '6' },\n    Numpad7: { key: '7' },\n    Numpad8: { key: '8' },\n    Numpad9: { key: '9' },\n    NumpadMultiply: { key: '*' },\n    NumpadAdd: { key: '+' },\n    NumpadComma: { key: ',' },\n    NumpadSubtract: { key: '-' },\n    NumpadDecimal: { key: '.' },\n    NumpadDivide: { key: '/' },\n    Semicolon: { key: ';', shiftKey: ':' },\n    Equal: { key: '=', shiftKey: '+' },\n    Comma: { key: ',', shiftKey: '<' },\n    Minus: { key: '-', shiftKey: '_' },\n    Period: { key: '.', shiftKey: '>' },\n    Slash: { key: '/', shiftKey: '?' },\n    Backquote: { key: '`', shiftKey: '~' },\n    BracketLeft: { key: '[', shiftKey: '{' },\n    Backslash: { key: '\\\\', shiftKey: '|' },\n    BracketRight: { key: ']', shiftKey: '}' },\n    Quote: { key: '\\'', shiftKey: '\"' },\n    IntlBackslash: { key: '\\\\', shiftKey: '|' }\n  };\n\n  mergeIf(codeToKeyTable, 'mac', {\n    OSLeft: { key: 'Meta' },\n    OSRight: { key: 'Meta' }\n  });\n\n  // Corrections for 'key' names in older browsers (e.g. FF36-)\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key#Key_values\n  var keyFixTable = {\n    Esc: 'Escape',\n    Nonconvert: 'NonConvert',\n    Left: 'ArrowLeft',\n    Up: 'ArrowUp',\n    Right: 'ArrowRight',\n    Down: 'ArrowDown',\n    Del: 'Delete',\n    Menu: 'ContextMenu',\n    MediaNextTrack: 'MediaTrackNext',\n    MediaPreviousTrack: 'MediaTrackPrevious',\n    SelectMedia: 'MediaSelect',\n    HalfWidth: 'Hankaku',\n    FullWidth: 'Zenkaku',\n    RomanCharacters: 'Romaji',\n    Crsel: 'CrSel',\n    Exsel: 'ExSel',\n    Zoom: 'ZoomToggle'\n  };\n\n  //--------------------------------------------------------------------\n  //\n  // Exported Functions\n  //\n  //--------------------------------------------------------------------\n\n\n  var codeTable = remap(keyCodeToInfoTable, 'code');\n\n  try {\n    var nativeLocation = nativeKeyboardEvent && ('location' in new KeyboardEvent(''));\n  } catch (_) {}\n\n  function keyInfoForEvent(event) {\n    var keyCode = 'keyCode' in event ? event.keyCode : 'which' in event ? event.which : 0;\n\n    var keyInfo = (function(){\n      if (nativeLocation || 'keyLocation' in event) {\n        var location = nativeLocation ? event.location : event.keyLocation;\n        if (location && keyCode in locationTable[location]) {\n          return locationTable[location][keyCode];\n        }\n      }\n      if ('keyIdentifier' in event && event.keyIdentifier in keyIdentifierTable) {\n        return keyIdentifierTable[event.keyIdentifier];\n      }\n      if (keyCode in keyCodeToInfoTable) {\n        return keyCodeToInfoTable[keyCode];\n      }\n      return null;\n    }());\n\n    // TODO: Track these down and move to general tables\n    if (0) {\n      // TODO: Map these for newerish browsers?\n      // TODO: iOS only?\n      // TODO: Override with more common keyIdentifier name?\n      switch (event.keyIdentifier) {\n      case 'U+0010': keyInfo = { code: 'Function' }; break;\n      case 'U+001C': keyInfo = { code: 'ArrowLeft' }; break;\n      case 'U+001D': keyInfo = { code: 'ArrowRight' }; break;\n      case 'U+001E': keyInfo = { code: 'ArrowUp' }; break;\n      case 'U+001F': keyInfo = { code: 'ArrowDown' }; break;\n      }\n    }\n\n    if (!keyInfo)\n      return null;\n\n    var key = (function() {\n      var entry = codeToKeyTable[keyInfo.code];\n      if (!entry) return keyInfo.code;\n      return (event.shiftKey && 'shiftKey' in entry) ? entry.shiftKey : entry.key;\n    }());\n\n    return {\n      code: keyInfo.code,\n      key: key,\n      location: keyInfo.location,\n      keyCap: keyInfo.keyCap\n    };\n  }\n\n  function queryKeyCap(code, locale) {\n    code = String(code);\n    if (!codeTable.hasOwnProperty(code)) return 'Undefined';\n    if (locale && String(locale).toLowerCase() !== 'en-us') throw Error('Unsupported locale');\n    var keyInfo = codeTable[code];\n    return keyInfo.keyCap || keyInfo.code || 'Undefined';\n  }\n\n  if ('KeyboardEvent' in global && 'defineProperty' in Object) {\n    (function() {\n      function define(o, p, v) {\n        if (p in o) return;\n        Object.defineProperty(o, p, v);\n      }\n\n      define(KeyboardEvent.prototype, 'code', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return keyInfo ? keyInfo.code : '';\n      }});\n\n      // Fix for nonstandard `key` values (FF36-)\n      if ('key' in KeyboardEvent.prototype) {\n        var desc = Object.getOwnPropertyDescriptor(KeyboardEvent.prototype, 'key');\n        Object.defineProperty(KeyboardEvent.prototype, 'key', { get: function() {\n          var key = desc.get.call(this);\n          return keyFixTable.hasOwnProperty(key) ? keyFixTable[key] : key;\n        }});\n      }\n\n      define(KeyboardEvent.prototype, 'key', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\n      }});\n\n      define(KeyboardEvent.prototype, 'location', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\n      }});\n\n      define(KeyboardEvent.prototype, 'locale', { get: function() {\n        return '';\n      }});\n    }());\n  }\n\n  if (!('queryKeyCap' in global.KeyboardEvent))\n    global.KeyboardEvent.queryKeyCap = queryKeyCap;\n\n  // Helper for IE8-\n  global.identifyKey = function(event) {\n    if ('code' in event)\n      return;\n\n    var keyInfo = keyInfoForEvent(event);\n    event.code = keyInfo ? keyInfo.code : '';\n    event.key = (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\n    event.location = ('location' in event) ? event.location :\n      ('keyLocation' in event) ? event.keyLocation :\n      (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\n    event.locale = '';\n  };\n\n} (window));\n","!function(t,i){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(\"nipplejs\",[],i):\"object\"==typeof exports?exports.nipplejs=i():t.nipplejs=i()}(window,(function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=0)}([function(t,i,e){\"use strict\";e.r(i);var o,n=function(t,i){var e=i.x-t.x,o=i.y-t.y;return Math.sqrt(e*e+o*o)},s=function(t){return t*(Math.PI/180)},r=function(t){return t*(180/Math.PI)},d=new Map,a=function(t){d.has(t)&&clearTimeout(d.get(t)),d.set(t,setTimeout(t,100))},p=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,e,!1):t.attachEvent&&t.attachEvent(o,e)},c=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,e):t.detachEvent&&t.detachEvent(o,e)},l=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},h=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},u=function(t,i){i.top||i.right||i.bottom||i.left?(t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.left=i.left):(t.style.left=i.x+\"px\",t.style.top=i.y+\"px\")},f=function(t,i,e){var o=y(t);for(var n in o)if(o.hasOwnProperty(n))if(\"string\"==typeof i)o[n]=i+\" \"+e;else{for(var s=\"\",r=0,d=i.length;r<d;r+=1)s+=i[r]+\" \"+e+\", \";o[n]=s.slice(0,-2)}return o},y=function(t){var i={};i[t]=\"\";return[\"webkit\",\"Moz\",\"o\"].forEach((function(e){i[e+t.charAt(0).toUpperCase()+t.slice(1)]=\"\"})),i},m=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},v=function(t,i){if(t.length)for(var e=0,o=t.length;e<o;e+=1)i(t[e]);else i(t)},g=!!(\"ontouchstart\"in window),b=!!window.PointerEvent,x=!!window.MSPointerEvent,O={start:\"mousedown\",move:\"mousemove\",end:\"mouseup\"},w={};function _(){}b?o={start:\"pointerdown\",move:\"pointermove\",end:\"pointerup, pointercancel\"}:x?o={start:\"MSPointerDown\",move:\"MSPointerMove\",end:\"MSPointerUp\"}:g?(o={start:\"touchstart\",move:\"touchmove\",end:\"touchend, touchcancel\"},w=O):o=O,_.prototype.on=function(t,i){var e,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)e=o[n],this._handlers_[e]=this._handlers_[e]||[],this._handlers_[e].push(i);return this},_.prototype.off=function(t,i){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===i?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(i)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(i),1),this},_.prototype.trigger=function(t,i){var e,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)e=n[s],o._handlers_[e]&&o._handlers_[e].length&&o._handlers_[e].forEach((function(t){t.call(o,{type:e,target:o},i)}))},_.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,i){var e={};for(var o in t)t.hasOwnProperty(o)&&i.hasOwnProperty(o)?e[o]=i[o]:t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(this.options,t))},_.prototype.bindEvt=function(t,i){var e=this;return e._domHandlers_=e._domHandlers_||{},e._domHandlers_[i]=function(){\"function\"==typeof e[\"on\"+i]?e[\"on\"+i].apply(e,arguments):console.warn('[WARNING] : Missing \"on'+i+'\" handler.')},p(t,o[i],e._domHandlers_[i]),w[i]&&p(t,w[i],e._domHandlers_[i]),e},_.prototype.unbindEvt=function(t,i){return this._domHandlers_=this._domHandlers_||{},c(t,o[i],this._domHandlers_[i]),w[i]&&c(t,w[i],this._domHandlers_[i]),delete this._domHandlers_[i],this};var T=_;function k(t,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:\"white\",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:\"dynamic\",zone:document.body,lockX:!1,lockY:!1,shape:\"circle\"},this.config(i),\"dynamic\"===this.options.mode&&(this.options.restOpacity=0),this.id=k.id,k.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}k.prototype=new T,k.constructor=k,k.id=0,k.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement(\"div\"),this.ui.back=document.createElement(\"div\"),this.ui.front=document.createElement(\"div\"),this.ui.el.className=\"nipple collection_\"+this.collection.id,this.ui.back.className=\"back\",this.ui.front.className=\"front\",this.ui.el.setAttribute(\"id\",\"nipple_\"+this.collection.id+\"_\"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},k.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+\"ms\",i=function(t,i){var e=y(t);for(var o in e)e.hasOwnProperty(o)&&(e[o]=i);return e}(\"borderRadius\",\"50%\"),e=f(\"transition\",\"opacity\",t),o={};return o.el={position:\"absolute\",opacity:this.options.restOpacity,display:\"block\",zIndex:999},o.back={position:\"absolute\",display:\"block\",width:this.options.size+\"px\",height:this.options.size+\"px\",marginLeft:-this.options.size/2+\"px\",marginTop:-this.options.size/2+\"px\",background:this.options.color,opacity:\".5\"},o.front={width:this.options.size/2+\"px\",height:this.options.size/2+\"px\",position:\"absolute\",display:\"block\",marginLeft:-this.options.size/4+\"px\",marginTop:-this.options.size/4+\"px\",background:this.options.color,opacity:\".5\",transform:\"translate(0px, 0px)\"},m(o.el,e),\"circle\"===this.options.shape&&m(o.back,i),m(o.front,i),this.applyStyles(o),this},k.prototype.applyStyles=function(t){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var e in t[i])this.ui[i].style[e]=t[i][e];return this},k.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},k.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},k.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger(\"destroyed\",this.instance),this.removeFromDom(),this.off()},k.prototype.show=function(t){var i=this;return i.options.dataOnly||(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout((function(){i.ui.el.style.opacity=1}),0),i.showTimeout=setTimeout((function(){i.trigger(\"shown\",i.instance),\"function\"==typeof t&&t.call(this)}),i.options.fadeTime)),i},k.prototype.hide=function(t){var i=this;if(i.options.dataOnly)return i;if(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout((function(){var e=\"dynamic\"===i.options.mode?\"none\":\"block\";i.ui.el.style.display=e,\"function\"==typeof t&&t.call(i),i.trigger(\"hidden\",i.instance)}),i.options.fadeTime),i.options.restJoystick){var e=i.options.restJoystick,o={};o.x=!0===e||!1!==e.x?0:i.instance.frontPosition.x,o.y=!0===e||!1!==e.y?0:i.instance.frontPosition.y,i.setPosition(t,o)}return i},k.prototype.setPosition=function(t,i){var e=this;e.frontPosition={x:i.x,y:i.y};var o=e.options.fadeTime+\"ms\",n={};n.front=f(\"transition\",[\"transform\"],o);var s={front:{}};s.front={transform:\"translate(\"+e.frontPosition.x+\"px,\"+e.frontPosition.y+\"px)\"},e.applyStyles(n),e.applyStyles(s),e.restTimeout=setTimeout((function(){\"function\"==typeof t&&t.call(e),e.restCallback()}),e.options.fadeTime)},k.prototype.restCallback=function(){var t={};t.front=f(\"transition\",\"none\",\"\"),this.applyStyles(t),this.trigger(\"rested\",this.instance)},k.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},k.prototype.computeDirection=function(t){var i,e,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(n>s&&n<3*s&&!t.lockX?i=\"up\":n>-s&&n<=s&&!t.lockY?i=\"left\":n>3*-s&&n<=-s&&!t.lockX?i=\"down\":t.lockY||(i=\"right\"),t.lockY||(e=n>-r&&n<r?\"left\":\"right\"),t.lockX||(o=n>0?\"up\":\"down\"),t.force>this.options.threshold){var d,a={};for(d in this.direction)this.direction.hasOwnProperty(d)&&(a[d]=this.direction[d]);var p={};for(d in this.direction={x:e,y:o,angle:i},t.direction=this.direction,a)a[d]===this.direction[d]&&(p[d]=!0);if(p.x&&p.y&&p.angle)return t;p.x&&p.y||this.trigger(\"plain\",t),p.x||this.trigger(\"plain:\"+e,t),p.y||this.trigger(\"plain:\"+o,t),p.angle||this.trigger(\"dir dir:\"+i,t)}else this.resetDirection();return t};var P=k;function E(t,i){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=E.id,E.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:\"dynamic\",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:\"white\",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:\"circle\",dynamicPage:!1,follow:!1},this.config(i),\"static\"!==this.options.mode&&\"semi\"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);var e=getComputedStyle(this.options.zone.parentElement);return e&&\"flex\"===e.display&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}E.prototype=new T,E.constructor=E,E.id=0,E.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(i){if(void 0===i)return t[0];for(var e=0,o=t.length;e<o;e+=1)if(t[e].identifier===i)return t[e];return!1}},E.prototype.bindings=function(){this.bindEvt(this.options.zone,\"start\"),this.options.zone.style.touchAction=\"none\",this.options.zone.style.msTouchAction=\"none\"},E.prototype.begin=function(){var t=this.options;if(\"static\"===t.mode){var i=this.createNipple(t.position,this.manager.getIdentifier());i.add(),this.idles.push(i)}},E.prototype.createNipple=function(t,i){var e=this.manager.scroll,o={},n=this.options,s=this.parentIsFlex?e.x:e.x+this.box.left,r=this.parentIsFlex?e.y:e.y+this.box.top;if(t.x&&t.y)o={x:t.x-s,y:t.y-r};else if(t.top||t.right||t.bottom||t.left){var d=document.createElement(\"DIV\");d.style.display=\"hidden\",d.style.top=t.top,d.style.right=t.right,d.style.bottom=t.bottom,d.style.left=t.left,d.style.position=\"absolute\",n.zone.appendChild(d);var a=d.getBoundingClientRect();n.zone.removeChild(d),o=t,t={x:a.left+e.x,y:a.top+e.y}}var p=new P(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:i,position:t,zone:n.zone,frontPosition:{x:0,y:0},shape:n.shape});return n.dataOnly||(u(p.ui.el,o),u(p.ui.front,p.frontPosition)),this.nipples.push(p),this.trigger(\"added \"+p.identifier+\":added\",p),this.manager.trigger(\"added \"+p.identifier+\":added\",p),this.bindNipple(p),p},E.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},E.prototype.bindNipple=function(t){var i,e=this,o=function(t,o){i=t.type+\" \"+o.id+\":\"+t.type,e.trigger(i,o)};t.on(\"destroyed\",e.onDestroyed.bind(e)),t.on(\"shown hidden rested dir plain\",o),t.on(\"dir:up dir:right dir:down dir:left\",o),t.on(\"plain:up plain:right plain:down plain:left\",o)},E.prototype.pressureFn=function(t,i,e){var o=this,n=0;clearInterval(o.pressureIntervals[e]),o.pressureIntervals[e]=setInterval(function(){var e=t.force||t.pressure||t.webkitForce||0;e!==n&&(i.trigger(\"pressure\",e),o.trigger(\"pressure \"+i.identifier+\":pressure\",e),n=e)}.bind(o),100)},E.prototype.onstart=function(t){var i=this,e=i.options,o=t;t=l(t),i.updateBox();return v(t,(function(n){i.actives.length<e.maxNumberOfNipples?i.processOnStart(n):o.type.match(/^touch/)&&(Object.keys(i.manager.ids).forEach((function(e){if(Object.values(o.touches).findIndex((function(t){return t.identifier===e}))<0){var n=[t[0]];n.identifier=e,i.processOnEnd(n)}})),i.actives.length<e.maxNumberOfNipples&&i.processOnStart(n))})),i.manager.bindDocument(),!1},E.prototype.processOnStart=function(t){var i,e=this,o=e.options,s=e.manager.getIdentifier(t),r=t.force||t.pressure||t.webkitForce||0,d={x:t.pageX,y:t.pageY},a=e.getOrCreate(s,d);a.identifier!==s&&e.manager.removeIdentifier(a.identifier),a.identifier=s;var p=function(i){i.trigger(\"start\",i),e.trigger(\"start \"+i.id+\":start\",i),i.show(),r>0&&e.pressureFn(t,i,i.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(a))>=0&&e.idles.splice(i,1),e.actives.push(a),e.ids.push(a.identifier),\"semi\"!==o.mode)p(a);else{if(!(n(d,a.position)<=o.catchDistance))return a.destroy(),void e.processOnStart(t);p(a)}return a},E.prototype.getOrCreate=function(t,i){var e,o=this.options;return/(semi|static)/.test(o.mode)?(e=this.idles[0])?(this.idles.splice(0,1),e):\"semi\"===o.mode?this.createNipple(i,t):(console.warn(\"Coudln't find the needed nipple.\"),!1):e=this.createNipple(i,t)},E.prototype.processOnMove=function(t){var i=this.options,e=this.manager.getIdentifier(t),o=this.nipples.get(e),d=this.manager.scroll;if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!o)return console.error(\"Found zombie joystick with ID \"+e),void this.manager.removeIdentifier(e);if(i.dynamicPage){var a=o.el.getBoundingClientRect();o.position={x:d.x+a.left,y:d.y+a.top}}o.identifier=e;var p=o.options.size/2,c={x:t.pageX,y:t.pageY};i.lockX&&(c.y=o.position.y),i.lockY&&(c.x=o.position.x);var l,h,u,f,y,m,v,g,b,x,O=n(c,o.position),w=(l=c,h=o.position,u=h.x-l.x,f=h.y-l.y,r(Math.atan2(f,u))),_=s(w),T=O/p,k={distance:O,position:c};if(\"circle\"===o.options.shape?(y=Math.min(O,p),v=o.position,g=y,x={x:0,y:0},b=s(b=w),x.x=v.x-g*Math.cos(b),x.y=v.y-g*Math.sin(b),m=x):(m=function(t,i,e){return{x:Math.min(Math.max(t.x,i.x-e),i.x+e),y:Math.min(Math.max(t.y,i.y-e),i.y+e)}}(c,o.position,p),y=n(m,o.position)),i.follow){if(O>p){var P=c.x-m.x,E=c.y-m.y;o.position.x+=P,o.position.y+=E,o.el.style.top=o.position.y-(this.box.top+d.y)+\"px\",o.el.style.left=o.position.x-(this.box.left+d.x)+\"px\",O=n(c,o.position)}}else c=m,O=y;var I=c.x-o.position.x,z=c.y-o.position.y;o.frontPosition={x:I,y:z},i.dataOnly||(o.ui.front.style.transform=\"translate(\"+I+\"px,\"+z+\"px)\");var D={identifier:o.identifier,position:c,force:T,pressure:t.force||t.pressure||t.webkitForce||0,distance:O,angle:{radian:_,degree:w},vector:{x:I/p,y:-z/p},raw:k,instance:o,lockX:i.lockX,lockY:i.lockY};(D=o.computeDirection(D)).angle={radian:s(180-w),degree:180-w},o.trigger(\"move\",D),this.trigger(\"move \"+o.id+\":move\",D)}else this.processOnEnd(t)},E.prototype.processOnEnd=function(t){var i=this,e=i.options,o=i.manager.getIdentifier(t),n=i.nipples.get(o),s=i.manager.removeIdentifier(n.identifier);n&&(e.dataOnly||n.hide((function(){\"dynamic\"===e.mode&&(n.trigger(\"removed\",n),i.trigger(\"removed \"+n.id+\":removed\",n),i.manager.trigger(\"removed \"+n.id+\":removed\",n),n.destroy())})),clearInterval(i.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger(\"end\",n),i.trigger(\"end \"+n.id+\":end\",n),i.ids.indexOf(n.identifier)>=0&&i.ids.splice(i.ids.indexOf(n.identifier),1),i.actives.indexOf(n)>=0&&i.actives.splice(i.actives.indexOf(n),1),/(semi|static)/.test(e.mode)?i.idles.push(n):i.nipples.indexOf(n)>=0&&i.nipples.splice(i.nipples.indexOf(n),1),i.manager.unbindDocument(),/(semi|static)/.test(e.mode)&&(i.manager.ids[s.id]=s.identifier))},E.prototype.onDestroyed=function(t,i){this.nipples.indexOf(i)>=0&&this.nipples.splice(this.nipples.indexOf(i),1),this.actives.indexOf(i)>=0&&this.actives.splice(this.actives.indexOf(i),1),this.idles.indexOf(i)>=0&&this.idles.splice(this.idles.indexOf(i),1),this.ids.indexOf(i.identifier)>=0&&this.ids.splice(this.ids.indexOf(i.identifier),1),this.manager.removeIdentifier(i.identifier),this.manager.unbindDocument()},E.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,\"start\"),this.nipples.forEach((function(t){t.destroy()})),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger(\"destroyed\",this.nipples),this.manager.unbindDocument(),this.off()};var I=E;function z(t){var i=this;i.ids={},i.index=0,i.collections=[],i.scroll=h(),i.config(t),i.prepareCollections();var e=function(){var t;i.collections.forEach((function(e){e.forEach((function(e){t=e.el.getBoundingClientRect(),e.position={x:i.scroll.x+t.left,y:i.scroll.y+t.top}}))}))};p(window,\"resize\",(function(){a(e)}));var o=function(){i.scroll=h()};return p(window,\"scroll\",(function(){a(o)})),i.collections}z.prototype=new T,z.constructor=z,z.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(i){var e;return t.collections.every((function(t){return!(e=t.get(i))})),e}},z.prototype.create=function(t){return this.createCollection(t)},z.prototype.createCollection=function(t){var i=new I(this,t);return this.bindCollection(i),this.collections.push(i),i},z.prototype.bindCollection=function(t){var i,e=this,o=function(t,o){i=t.type+\" \"+o.id+\":\"+t.type,e.trigger(i,o)};t.on(\"destroyed\",e.onDestroyed.bind(e)),t.on(\"shown hidden rested dir plain\",o),t.on(\"dir:up dir:right dir:down dir:left\",o),t.on(\"plain:up plain:right plain:down plain:left\",o)},z.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,\"move\").bindEvt(document,\"end\"),this.binded=!0)},z.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,\"move\").unbindEvt(document,\"end\"),this.binded=!1)},z.prototype.getIdentifier=function(t){var i;return t?void 0===(i=void 0===t.identifier?t.pointerId:t.identifier)&&(i=this.latest||0):i=this.index,void 0===this.ids[i]&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},z.prototype.removeIdentifier=function(t){var i={};for(var e in this.ids)if(this.ids[e]===t){i.id=e,i.identifier=this.ids[e],delete this.ids[e];break}return i},z.prototype.onmove=function(t){return this.onAny(\"move\",t),!1},z.prototype.onend=function(t){return this.onAny(\"end\",t),!1},z.prototype.oncancel=function(t){return this.onAny(\"end\",t),!1},z.prototype.onAny=function(t,i){var e,o=this,n=\"processOn\"+t.charAt(0).toUpperCase()+t.slice(1);i=l(i);var s=function(t,i,e){e.ids.indexOf(i)>=0&&(e[n](t),t._found_=!0)};return v(i,(function(t){e=o.getIdentifier(t),v(o.collections,s.bind(null,t,e)),t._found_||o.removeIdentifier(e)})),!1},z.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach((function(t){t.destroy()})),this.off()},z.prototype.onDestroyed=function(t,i){if(this.collections.indexOf(i)<0)return!1;this.collections.splice(this.collections.indexOf(i),1)};var D=new z;i.default={create:function(t){return D.create(t)},factory:D}}]).default}));","import{BufferAttribute as t,BufferGeometry as e,Vector3 as r,Plane as s,Triangle as n,Color as o,Object3D as i,Mesh as h,SphereBufferGeometry as c,MeshBasicMaterial as a,BoxBufferGeometry as u,LineBasicMaterial as l,Line as d}from\"three\";class p{static roundNumber(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}static sample(t){return t[Math.floor(Math.random()*t.length)]}static distanceToSquared(t,e){var r=t.x-e.x,s=t.y-e.y,n=t.z-e.z;return r*r+s*s+n*n}static isPointInPoly(t,e){for(var r=!1,s=-1,n=t.length,o=n-1;++s<n;o=s)(t[s].z<=e.z&&e.z<t[o].z||t[o].z<=e.z&&e.z<t[s].z)&&e.x<(t[o].x-t[s].x)*(e.z-t[s].z)/(t[o].z-t[s].z)+t[s].x&&(r=!r);return r}static isVectorInPolygon(t,e,r){var s=1e5,n=-1e5,o=[];return e.vertexIds.forEach(t=>{s=Math.min(r[t].y,s),n=Math.max(r[t].y,n),o.push(r[t])}),!!(t.y<n+.5&&t.y>s-.5&&this.isPointInPoly(o,t))}static triarea2(t,e,r){return(r.x-t.x)*(e.z-t.z)-(e.x-t.x)*(r.z-t.z)}static vequal(t,e){return this.distanceToSquared(t,e)<1e-5}static mergeVertices(r,s=1e-4){s=Math.max(s,Number.EPSILON);for(var n={},o=r.getIndex(),i=r.getAttribute(\"position\"),h=o?o.count:i.count,c=0,a=[],u=[],l=Math.log10(1/s),d=Math.pow(10,l),p=0;p<h;p++){var g=o?o.getX(p):p,f=\"\";f+=~~(i.getX(g)*d)+\",\",f+=~~(i.getY(g)*d)+\",\",(f+=~~(i.getZ(g)*d)+\",\")in n?a.push(n[f]):(u.push(i.getX(g)),u.push(i.getY(g)),u.push(i.getZ(g)),n[f]=c,a.push(c),c++)}const v=new t(new Float32Array(u),i.itemSize,i.normalized),b=new e;return b.setAttribute(\"position\",v),b.setIndex(a),b}}class g{constructor(t){this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){const t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){const e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){const e=this.content[t];for(;t>0;){const r=(t+1>>1)-1,s=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[r]=e,this.content[t]=s,t=r}}bubbleUp(t){const e=this.content.length,r=this.content[t],s=this.scoreFunction(r);for(;;){const n=t+1<<1,o=n-1;let i,h=null;if(o<e&&(i=this.scoreFunction(this.content[o]),i<s&&(h=o)),n<e&&this.scoreFunction(this.content[n])<(null===h?s:i)&&(h=n),null===h)break;this.content[t]=this.content[h],this.content[h]=r,t=h}}}class f{constructor(){this.portals=[]}push(t,e){void 0===e&&(e=t),this.portals.push({left:t,right:e})}stringPull(){const t=this.portals,e=[];let r,s,n,o=0,i=0,h=0;r=t[0].left,s=t[0].left,n=t[0].right,e.push(r);for(let c=1;c<t.length;c++){const a=t[c].left,u=t[c].right;if(p.triarea2(r,n,u)<=0){if(!(p.vequal(r,n)||p.triarea2(r,s,u)>0)){e.push(s),r=s,o=i,s=r,n=r,i=o,h=o,c=o;continue}n=u,h=c}if(p.triarea2(r,s,a)>=0){if(!(p.vequal(r,s)||p.triarea2(r,n,a)<0)){e.push(n),r=n,o=h,s=r,n=r,i=o,h=o,c=o;continue}s=a,i=c}}return 0!==e.length&&p.vequal(e[e.length-1],t[t.length-1].left)||e.push(t[t.length-1].left),this.path=e,e}}class v{constructor(){this.zones={}}static createZone(t,e=1e-4){return class{static buildZone(t,e){const s=this._buildNavigationMesh(t,e),n={};s.vertices.forEach(t=>{t.x=p.roundNumber(t.x,2),t.y=p.roundNumber(t.y,2),t.z=p.roundNumber(t.z,2)}),n.vertices=s.vertices;const o=this._buildPolygonGroups(s);return n.groups=new Array(o.length),o.forEach((t,e)=>{const s=new Map;t.forEach((t,e)=>{s.set(t,e)});const o=new Array(t.length);t.forEach((t,e)=>{const i=[];t.neighbours.forEach(t=>i.push(s.get(t)));const h=[];t.neighbours.forEach(e=>h.push(this._getSharedVerticesInOrder(t,e)));const c=new r(0,0,0);c.add(n.vertices[t.vertexIds[0]]),c.add(n.vertices[t.vertexIds[1]]),c.add(n.vertices[t.vertexIds[2]]),c.divideScalar(3),c.x=p.roundNumber(c.x,2),c.y=p.roundNumber(c.y,2),c.z=p.roundNumber(c.z,2),o[e]={id:e,neighbours:i,vertexIds:t.vertexIds,centroid:c,portals:h}}),n.groups[e]=o}),n}static _buildNavigationMesh(t,e){return t=p.mergeVertices(t,e),this._buildPolygonsFromGeometry(t)}static _spreadGroupId(t){let e=new Set([t]);for(;e.size>0;){const r=e;e=new Set,r.forEach(r=>{r.group=t.group,r.neighbours.forEach(t=>{void 0===t.group&&e.add(t)})})}}static _buildPolygonGroups(t){const e=[];return t.polygons.forEach(t=>{void 0!==t.group?e[t.group].push(t):(t.group=e.length,this._spreadGroupId(t),e.push([t]))}),e}static _buildPolygonNeighbours(t,e){const r=new Set,s=e[t.vertexIds[1]],n=e[t.vertexIds[2]];return e[t.vertexIds[0]].forEach(e=>{e!==t&&(s.includes(e)||n.includes(e))&&r.add(e)}),s.forEach(e=>{e!==t&&n.includes(e)&&r.add(e)}),r}static _buildPolygonsFromGeometry(t){const e=[],s=[],n=t.attributes.position,o=t.index,i=[];for(let t=0;t<n.count;t++)s.push((new r).fromBufferAttribute(n,t)),i[t]=[];for(let r=0;r<t.index.count;r+=3){const t=o.getX(r),s=o.getX(r+1),n=o.getX(r+2),h={vertexIds:[t,s,n],neighbours:null};e.push(h),i[t].push(h),i[s].push(h),i[n].push(h)}return e.forEach(t=>{t.neighbours=this._buildPolygonNeighbours(t,i)}),{polygons:e,vertices:s}}static _getSharedVerticesInOrder(t,e){const r=t.vertexIds,s=r[0],n=r[1],o=r[2],i=e.vertexIds,h=i.includes(s),c=i.includes(n),a=i.includes(o);return h&&c&&a?Array.from(r):h&&c?[s,n]:c&&a?[n,o]:h&&a?[o,s]:(console.warn(\"Error processing navigation mesh neighbors; neighbors with <2 shared vertices found.\"),[])}}.buildZone(t,e)}setZoneData(t,e){this.zones[t]=e}getRandomNode(t,e,s,n){if(!this.zones[t])return new r;s=s||null,n=n||0;const o=[];return this.zones[t].groups[e].forEach(t=>{s&&n?p.distanceToSquared(s,t.centroid)<n*n&&o.push(t.centroid):o.push(t.centroid)}),p.sample(o)||new r}getClosestNode(t,e,r,s=!1){const n=this.zones[e].vertices;let o=null,i=Infinity;return this.zones[e].groups[r].forEach(e=>{const r=p.distanceToSquared(e.centroid,t);r<i&&(!s||p.isVectorInPolygon(t,e,n))&&(o=e,i=r)}),o}findPath(t,e,s,n){const o=this.zones[s].groups[n],i=this.zones[s].vertices,h=this.getClosestNode(t,s,n,!0),c=this.getClosestNode(e,s,n,!0);if(!h||!c)return null;const a=class{static init(t){for(let e=0;e<t.length;e++){const r=t[e];r.f=0,r.g=0,r.h=0,r.cost=1,r.visited=!1,r.closed=!1,r.parent=null}}static cleanUp(t){for(let e=0;e<t.length;e++){const r=t[e];delete r.f,delete r.g,delete r.h,delete r.cost,delete r.visited,delete r.closed,delete r.parent}}static heap(){return new g(function(t){return t.f})}static search(t,e,r){this.init(t);const s=this.heap();for(s.push(e);s.size()>0;){const e=s.pop();if(e===r){let t=e;const r=[];for(;t.parent;)r.push(t),t=t.parent;return this.cleanUp(r),r.reverse()}e.closed=!0;const n=this.neighbours(t,e);for(let t=0,o=n.length;t<o;t++){const o=n[t];if(o.closed)continue;const i=e.g+o.cost,h=o.visited;if(!h||i<o.g){if(o.visited=!0,o.parent=e,!o.centroid||!r.centroid)throw new Error(\"Unexpected state\");o.h=o.h||this.heuristic(o.centroid,r.centroid),o.g=i,o.f=o.g+o.h,h?s.rescoreElement(o):s.push(o)}}}return[]}static heuristic(t,e){return p.distanceToSquared(t,e)}static neighbours(t,e){const r=[];for(let s=0;s<e.neighbours.length;s++)r.push(t[e.neighbours[s]]);return r}}.search(o,h,c),u=function(t,e){for(var r=0;r<t.neighbours.length;r++)if(t.neighbours[r]===e.id)return t.portals[r]},l=new f;l.push(t);for(let t=0;t<a.length;t++){const e=a[t],r=a[t+1];if(r){const t=u(e,r);l.push(i[t[0]],i[t[1]])}}l.push(e),l.stringPull();const d=l.path.map(t=>new r(t.x,t.y,t.z));return d.shift(),d}}v.prototype.getGroup=function(){const t=new s;return function(e,r,s=!1){if(!this.zones[e])return null;let n=null,o=Math.pow(50,2);const i=this.zones[e];for(let e=0;e<i.groups.length;e++){const h=i.groups[e];for(const c of h){if(s&&(t.setFromCoplanarPoints(i.vertices[c.vertexIds[0]],i.vertices[c.vertexIds[1]],i.vertices[c.vertexIds[2]]),Math.abs(t.distanceToPoint(r))<.01)&&p.isPointInPoly([i.vertices[c.vertexIds[0]],i.vertices[c.vertexIds[1]],i.vertices[c.vertexIds[2]]],r))return e;const h=p.distanceToSquared(c.centroid,r);h<o&&(n=e,o=h)}}return n}}(),v.prototype.clampStep=function(){const t=new r,e=new s,o=new n,i=new r;let h,c,a=new r;return function(r,s,n,u,l,d){const p=this.zones[u].vertices,g=this.zones[u].groups[l],f=[n],v={};v[n.id]=0,h=void 0,a.set(0,0,0),c=Infinity,e.setFromCoplanarPoints(p[n.vertexIds[0]],p[n.vertexIds[1]],p[n.vertexIds[2]]),e.projectPoint(s,t),i.copy(t);for(let e=f.pop();e;e=f.pop()){o.set(p[e.vertexIds[0]],p[e.vertexIds[1]],p[e.vertexIds[2]]),o.closestPointToPoint(i,t),t.distanceToSquared(i)<c&&(h=e,a.copy(t),c=t.distanceToSquared(i));const r=v[e.id];if(!(r>2))for(let t=0;t<e.neighbours.length;t++){const s=g[e.neighbours[t]];s.id in v||(f.push(s),v[s.id]=r+1)}}return d.copy(a),h}}();const b={PLAYER:new o(15631215).convertSRGBToLinear().getHex(),TARGET:new o(14469912).convertSRGBToLinear().getHex(),PATH:new o(41903).convertSRGBToLinear().getHex(),WAYPOINT:new o(41903).convertSRGBToLinear().getHex(),CLAMPED_STEP:new o(14472114).convertSRGBToLinear().getHex(),CLOSEST_NODE:new o(4417387).convertSRGBToLinear().getHex()};class w extends i{constructor(){super(),this._playerMarker=new h(new c(.25,32,32),new a({color:b.PLAYER})),this._targetMarker=new h(new u(.3,.3,.3),new a({color:b.TARGET})),this._nodeMarker=new h(new u(.1,.8,.1),new a({color:b.CLOSEST_NODE})),this._stepMarker=new h(new u(.1,1,.1),new a({color:b.CLAMPED_STEP})),this._pathMarker=new i,this._pathLineMaterial=new l({color:b.PATH,linewidth:2}),this._pathPointMaterial=new a({color:b.WAYPOINT}),this._pathPointGeometry=new c(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(t=>{t.visible=!1,this.add(t)})}setPath(r){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);r=[this._playerMarker.position].concat(r);const s=new e;s.setAttribute(\"position\",new t(new Float32Array(3*r.length),3));for(let t=0;t<r.length;t++)s.attributes.position.setXYZ(t,r[t].x,r[t].y+.2,r[t].z);this._pathMarker.add(new d(s,this._pathLineMaterial));for(let t=0;t<r.length-1;t++){const e=new h(this._pathPointGeometry,this._pathPointMaterial);e.position.copy(r[t]),e.position.y+=.2,this._pathMarker.add(e)}return this._pathMarker.visible=!0,this}setPlayerPosition(t){return this._playerMarker.position.copy(t),this._playerMarker.visible=!0,this}setTargetPosition(t){return this._targetMarker.position.copy(t),this._targetMarker.visible=!0,this}setNodePosition(t){return this._nodeMarker.position.copy(t),this._nodeMarker.visible=!0,this}setStepPosition(t){return this._stepMarker.position.copy(t),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(t=>{t.visible=!1}),this}}export{v as Pathfinding,w as PathfindingHelper};\n//# sourceMappingURL=three-pathfinding.module.js.map\n","const EPS = 0.1;\n\nmodule.exports = AFRAME.registerComponent('checkpoint-controls', {\n  schema: {\n    enabled: {default: true},\n    mode: {default: 'teleport', oneOf: ['teleport', 'animate']},\n    animateSpeed: {default: 3.0}\n  },\n\n  init: function () {\n    this.active = true;\n    this.checkpoint = null;\n\n    this.isNavMeshConstrained = false;\n\n    this.offset = new THREE.Vector3();\n    this.position = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n  },\n\n  play: function () { this.active = true; },\n  pause: function () { this.active = false; },\n\n  setCheckpoint: function (checkpoint) {\n    const el = this.el;\n\n    if (!this.active) return;\n    if (this.checkpoint === checkpoint) return;\n\n    if (this.checkpoint) {\n      el.emit('navigation-end', {checkpoint: this.checkpoint});\n    }\n\n    this.checkpoint = checkpoint;\n    this.sync();\n\n    // Ignore new checkpoint if we're already there.\n    if (this.position.distanceTo(this.targetPosition) < EPS) {\n      this.checkpoint = null;\n      return;\n    }\n\n    el.emit('navigation-start', {checkpoint: checkpoint});\n\n    if (this.data.mode === 'teleport') {\n      this.el.setAttribute('position', this.targetPosition);\n      this.checkpoint = null;\n      el.emit('navigation-end', {checkpoint: checkpoint});\n      el.components['movement-controls'].updateNavLocation();\n    }\n  },\n\n  isVelocityActive: function () {\n    return !!(this.active && this.checkpoint);\n  },\n\n  getVelocity: function () {\n    if (!this.active) return;\n\n    const data = this.data;\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n    const checkpoint = this.checkpoint;\n\n    this.sync();\n    if (position.distanceTo(targetPosition) < EPS) {\n      this.checkpoint = null;\n      this.el.emit('navigation-end', {checkpoint: checkpoint});\n      return offset.set(0, 0, 0);\n    }\n    offset.setLength(data.animateSpeed);\n    return offset;\n  },\n\n  sync: function () {\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n\n    position.copy(this.el.getAttribute('position'));\n    this.checkpoint.object3D.getWorldPosition(targetPosition);\n    targetPosition.add(this.checkpoint.components.checkpoint.getOffset());\n    offset.copy(targetPosition).sub(position);\n  }\n});\n","/**\n * Gamepad controls for A-Frame.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\n *\n * For more information about the Gamepad API, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n */\n\nconst GamepadButton = require('../../lib/GamepadButton'),\n    GamepadButtonEvent = require('../../lib/GamepadButtonEvent');\n\nconst JOYSTICK_EPS = 0.2;\n\nconst Hand = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\n\nconst Joystick = {\n  MOVEMENT: 1,\n  ROTATION: 2\n};\n\nmodule.exports = AFRAME.registerComponent('gamepad-controls', {\n\n  /*******************************************************************\n   * Statics\n   */\n\n  GamepadButton: GamepadButton,\n\n  /*******************************************************************\n   * Schema\n   */\n\n  schema: {\n    // Enable/disable gamepad-controls\n    enabled: { default: true },\n\n    // Rotation sensitivity\n    rotationSensitivity: { default: 2.0 },\n  },\n\n  /*******************************************************************\n   * Core\n   */\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function () {\n    const sceneEl = this.el.sceneEl;\n\n    this.system = sceneEl.systems['tracked-controls-webxr'] || {controllers: []};\n\n    this.prevTime = window.performance.now();\n\n    // Button state\n    this.buttons = {};\n\n    // Rotation\n    const rotation = this.el.object3D.rotation;\n    this.pitch = new THREE.Object3D();\n    this.pitch.rotation.x = rotation.x;\n    this.yaw = new THREE.Object3D();\n    this.yaw.position.y = 10;\n    this.yaw.rotation.y = rotation.y;\n    this.yaw.add(this.pitch);\n\n    this._lookVector = new THREE.Vector2();\n    this._moveVector = new THREE.Vector2();\n    this._dpadVector = new THREE.Vector2();\n\n    sceneEl.addBehavior(this);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function () { this.tick(); },\n\n  /**\n   * Called on each iteration of main render loop.\n   */\n  tick: function (t, dt) {\n    this.updateButtonState();\n    this.updateRotation(dt);\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function () { },\n\n  /*******************************************************************\n   * Movement\n   */\n\n  isVelocityActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\n  },\n\n  getVelocityDelta: function () {\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n    const dVelocity = new THREE.Vector3();\n\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\n      dVelocity.x += inputX;\n    }\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\n      dVelocity.z += inputY;\n    }\n\n    return dVelocity;\n  },\n\n  /*******************************************************************\n   * Rotation\n   */\n\n  isRotationActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const joystick = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, joystick);\n\n    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;\n  },\n\n  updateRotation: function (dt) {\n    if (!this.isRotationActive()) return;\n\n    const data = this.data;\n    const yaw = this.yaw;\n    const pitch = this.pitch;\n\n    // First copy camera rig pitch/yaw, it may have been changed from\n    // another component.\n    yaw.rotation.y = this.el.object3D.rotation.y;\n    pitch.rotation.x = this.el.object3D.rotation.x;\n\n    const lookVector = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, lookVector);\n\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\n\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\n    yaw.rotation.y -= lookVector.x;\n    pitch.rotation.x -= lookVector.y;\n    pitch.rotation.x = Math.max(- Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\n    this.el.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0);\n  },\n\n  /*******************************************************************\n   * Button events\n   */\n\n  updateButtonState: function () {\n    const gamepad = this.getGamepad(Hand.RIGHT);\n    if (this.data.enabled && gamepad) {\n\n      // Fire DOM events for button state changes.\n      for (var i = 0; i < gamepad.buttons.length; i++) {\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\n        }\n        this.buttons[i] = gamepad.buttons[i].pressed;\n      }\n\n    } else if (Object.keys(this.buttons)) {\n      // Reset state if controls are disabled or controller is lost.\n      this.buttons = {};\n    }\n  },\n\n  emit: function (event) {\n    // Emit original event.\n    this.el.emit(event.type, event);\n\n    // Emit convenience event, identifying button index.\n    this.el.emit(\n      event.type + ':' + event.index,\n      new GamepadButtonEvent(event.type, event.index, event)\n    );\n  },\n\n  /*******************************************************************\n   * Gamepad state\n   */\n\n  /**\n   * Returns the Gamepad instance attached to the component. If connected,\n   * a proxy-controls component may provide access to Gamepad input from a\n   * remote device.\n   *\n   * @param {string} handPreference\n   * @return {Gamepad}\n   */\n  getGamepad: (function () {\n    const _xrGamepads = [];\n    const _empty = [];\n\n    return function (handPreference) {\n      // https://github.com/donmccurdy/aframe-proxy-controls\n      const proxyControls = this.el.sceneEl.components['proxy-controls'];\n      const proxyGamepad = proxyControls && proxyControls.isConnected()\n        && proxyControls.getGamepad(0);\n      if (proxyGamepad) return proxyGamepad;\n\n      // https://www.w3.org/TR/webxr/#dom-xrinputsource-handedness\n      _xrGamepads.length = 0;\n      for (let i = 0; i < this.system.controllers.length; i++) {\n        const xrController = this.system.controllers[i];\n        const xrGamepad = xrController ? xrController.gamepad : null;\n        _xrGamepads.push(xrGamepad);\n        if (xrGamepad && xrController.handedness === handPreference) return xrGamepad;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/Gamepad/hand\n      const navGamepads = navigator.getGamepads ? navigator.getGamepads() : _empty;\n      for (let i = 0; i < navGamepads.length; i++) {\n        const navGamepad = navGamepads[i];\n        if (navGamepad && navGamepad.hand === handPreference) return navGamepad;\n      }\n\n      return _xrGamepads[0] || navGamepads[0];\n    };\n  })(),\n\n  /**\n   * Returns the state of the given button.\n   * @param  {number} index The button (0-N) for which to find state.\n   * @return {GamepadButton}\n   */\n  getButton: function (index) {\n    return this.getGamepad(Hand.RIGHT).buttons[index];\n  },\n\n  /**\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\n   * @param  {number} index The axis (0-N) for which to find state.\n   * @return {number} On the interval [-1,1].\n   */\n  getAxis: function (index) {\n    return this.getGamepad(index > 1 ? Hand.RIGHT : Hand.LEFT).axes[index];\n  },\n\n  /**\n   * Returns the state of the specified joystick as a THREE.Vector2.\n   * @param  {Joystick} role\n   * @param  {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getJoystick: function (index, target) {\n    const gamepad = this.getGamepad(index === Joystick.MOVEMENT ? Hand.LEFT : Hand.RIGHT);\n    // gamepad can be null here if it becomes disconnected even if isConnected() was called\n    // in the same tick before calling getJoystick.\n    if (!gamepad) {\n      return target.set(0, 0);\n    }\n    if (gamepad.mapping === 'xr-standard') {\n      // See: https://github.com/donmccurdy/aframe-extras/issues/307\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[2], gamepad.axes[3]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], 0);\n      }\n    } else {\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[0], gamepad.axes[1]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], gamepad.axes[3]);\n      }\n    }\n    throw new Error('Unexpected joystick index \"%d\".', index);\n  },\n\n  /**\n   * Returns the state of the dpad as a THREE.Vector2.\n   * @param {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getDpad: function (target) {\n    const gamepad = this.getGamepad(Hand.LEFT);\n    if (!gamepad) {\n      return target.set(0, 0);\n    }\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\n      return target.set(0, 0);\n    }\n    return target.set(\n      (gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0),\n      (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0)\n    );\n  },\n\n  /**\n   * Returns true if the gamepad is currently connected to the system.\n   * @return {boolean}\n   */\n  isConnected: function () {\n    const gamepad = this.getGamepad(Hand.LEFT);\n    return !!(gamepad && gamepad.connected);\n  },\n\n  /**\n   * Returns a string containing some information about the controller. Result\n   * may vary across browsers, for a given controller.\n   * @return {string}\n   */\n  getID: function () {\n    return this.getGamepad(Hand.LEFT).id;\n  }\n});\n","require('./checkpoint-controls');\nrequire('./gamepad-controls');\nrequire('./keyboard-controls');\nrequire('./touch-controls');\nrequire('./movement-controls');\nrequire('./trackpad-controls');\nrequire('./nipple-controls');\n","/* global AFRAME, THREE */\n/* eslint-disable no-prototype-builtins */\nrequire('../../lib/keyboard.polyfill');\n\nconst PROXY_FLAG = '__keyboard-controls-proxy';\n\nconst KeyboardEvent = window.KeyboardEvent;\n\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if you’re a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled:           { default: true },\n    debug:             { default: false }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this),\n      onContextMenu: this.onContextMenu.bind(this),\n    };\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n\n  getVelocityDelta: function () {\n    const data = this.data;\n    const keys = this.getKeys();\n\n    this.dVelocity.set(0, 0, 0);\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp)    { this.dVelocity.z -= 1; }\n      if (keys.KeyA || keys.ArrowLeft)  { this.dVelocity.x -= 1; }\n      if (keys.KeyS || keys.ArrowDown)  { this.dVelocity.z += 1; }\n      if (keys.KeyD || keys.ArrowRight) { this.dVelocity.x += 1; }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n\n  play: function () {\n    this.attachEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  attachEventListeners: function () {\n    window.addEventListener(\"contextmenu\", this.listeners.onContextMenu, false);\n    window.addEventListener(\"keydown\", this.listeners.keydown, false);\n    window.addEventListener(\"keyup\", this.listeners.keyup, false);\n    window.addEventListener(\"blur\", this.listeners.blur, false);\n  },\n\n  onContextMenu: function () {\n    for (const code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n\n  onKeyDown: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n\n  onKeyUp: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n\n  onBlur: function () {\n    for (const code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  emit: function (event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    }\n\n    // Emit convenience event, identifying key.\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n\n  isPressed: function (code) {\n    return code in this.getKeys();\n  },\n\n  getKeys: function () {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n    return this.localKeys;\n  },\n\n  isProxied: function () {\n    const proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n\n});\n","/**\n * Movement Controls\n *\n * @author Don McCurdy <dm@donmccurdy.com>\n */\n\nconst COMPONENT_SUFFIX = '-controls',\n    MAX_DELTA = 0.2, // ms\n    EPS = 10e-6;\n\nmodule.exports = AFRAME.registerComponent('movement-controls', {\n\n  /*******************************************************************\n   * Schema\n   */\n\n  dependencies: ['rotation'],\n\n  schema: {\n    enabled:            { default: true },\n    controls:           { default: ['gamepad', 'trackpad', 'keyboard', 'touch'] },\n    speed:              { default: 0.3, min: 0 },\n    fly:                { default: false },\n    constrainToNavMesh: { default: false },\n    camera:             { default: '[movement-controls] [camera]', type: 'selector' }\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n\n  init: function () {\n    const el = this.el;\n    if (!this.data.camera) {\n      this.data.camera = el.querySelector('[camera]')\n    }\n    this.velocityCtrl = null;\n\n    this.velocity = new THREE.Vector3();\n    this.heading = new THREE.Quaternion();\n\n    // Navigation\n    this.navGroup = null;\n    this.navNode = null;\n\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    } else {\n      el.sceneEl.addEventListener('loaded', this.injectControls.bind(this));\n    }\n  },\n\n  update: function (prevData) {\n    const el = this.el;\n    const data = this.data;\n    const nav = el.sceneEl.systems.nav;\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    }\n    if (nav && data.constrainToNavMesh !== prevData.constrainToNavMesh) {\n      data.constrainToNavMesh\n        ? nav.addAgent(this)\n        : nav.removeAgent(this);\n    }\n    if (data.enabled !== prevData.enabled) {\n      // Propagate the enabled change to all controls\n      for (let i = 0; i < data.controls.length; i++) {\n        const name = data.controls[i] + COMPONENT_SUFFIX;\n        this.el.setAttribute(name, { enabled: this.data.enabled });\n      }\n    }\n  },\n\n  injectControls: function () {\n    const data = this.data;\n\n    for (let i = 0; i < data.controls.length; i++) {\n      const name = data.controls[i] + COMPONENT_SUFFIX;\n      this.el.setAttribute(name, { enabled: this.data.enabled });\n    }\n  },\n\n  updateNavLocation: function () {\n    this.navGroup = null;\n    this.navNode = null;\n  },\n\n  /*******************************************************************\n   * Tick\n   */\n\n  tick: (function () {\n    const start = new THREE.Vector3();\n    const end = new THREE.Vector3();\n    const clampedEnd = new THREE.Vector3();\n\n    return function (t, dt) {\n      if (!dt) return;\n\n      const el = this.el;\n      const data = this.data;\n\n      if (!data.enabled) return;\n\n      this.updateVelocityCtrl();\n      const velocityCtrl = this.velocityCtrl;\n      const velocity = this.velocity;\n\n      if (!velocityCtrl) return;\n\n      // Update velocity. If FPS is too low, reset.\n      if (dt / 1000 > MAX_DELTA) {\n        velocity.set(0, 0, 0);\n      } else {\n        this.updateVelocity(dt);\n      }\n\n      if (data.constrainToNavMesh\n          && velocityCtrl.isNavMeshConstrained !== false) {\n\n        if (velocity.lengthSq() < EPS) return;\n\n        start.copy(el.object3D.position);\n        end\n          .copy(velocity)\n          .multiplyScalar(dt / 1000)\n          .add(start);\n\n        const nav = el.sceneEl.systems.nav;\n        this.navGroup = this.navGroup === null ? nav.getGroup(start) : this.navGroup;\n        this.navNode = this.navNode || nav.getNode(start, this.navGroup);\n        this.navNode = nav.clampStep(start, end, this.navGroup, this.navNode, clampedEnd);\n        el.object3D.position.copy(clampedEnd);\n      } else if (el.hasAttribute('velocity')) {\n        el.setAttribute('velocity', velocity);\n      } else {\n        el.object3D.position.x += velocity.x * dt / 1000;\n        el.object3D.position.y += velocity.y * dt / 1000;\n        el.object3D.position.z += velocity.z * dt / 1000;\n      }\n\n    };\n  }()),\n\n  /*******************************************************************\n   * Movement\n   */\n\n  updateVelocityCtrl: function () {\n    const data = this.data;\n    if (data.enabled) {\n      for (let i = 0, l = data.controls.length; i < l; i++) {\n        const control = this.el.components[data.controls[i] + COMPONENT_SUFFIX];\n        if (control && control.isVelocityActive()) {\n          this.velocityCtrl = control;\n          return;\n        }\n      }\n      this.velocityCtrl = null;\n    }\n  },\n\n  updateVelocity: (function () {\n    const vector2 = new THREE.Vector2();\n    const quaternion = new THREE.Quaternion();\n\n    return function (dt) {\n      let dVelocity;\n      const el = this.el;\n      const control = this.velocityCtrl;\n      const velocity = this.velocity;\n      const data = this.data;\n\n      if (control) {\n        if (control.getVelocityDelta) {\n          dVelocity = control.getVelocityDelta(dt);\n        } else if (control.getVelocity) {\n          velocity.copy(control.getVelocity());\n          return;\n        } else if (control.getPositionDelta) {\n          velocity.copy(control.getPositionDelta(dt).multiplyScalar(1000 / dt));\n          return;\n        } else {\n          throw new Error('Incompatible movement controls: ', control);\n        }\n      }\n\n      if (el.hasAttribute('velocity') && !data.constrainToNavMesh) {\n        velocity.copy(this.el.getAttribute('velocity'));\n      }\n\n      if (dVelocity && data.enabled) {\n        const cameraEl = data.camera;\n\n        // Rotate to heading\n        quaternion.copy(cameraEl.object3D.quaternion);\n        quaternion.premultiply(el.object3D.quaternion);\n        dVelocity.applyQuaternion(quaternion);\n\n        const factor = dVelocity.length();\n        if (data.fly) {\n          velocity.copy(dVelocity);\n          velocity.multiplyScalar(this.data.speed * 16.66667);\n        } else {\n          vector2.set(dVelocity.x, dVelocity.z);\n          vector2.setLength(factor * this.data.speed * 16.66667);\n          velocity.x = vector2.x;\n          velocity.y = 0;\n          velocity.z = vector2.y;\n        }\n      }\n    };\n\n  }())\n});\n","/* global AFRAME, THREE */\nimport nipplejs from \"nipplejs\";\n\nAFRAME.registerComponent(\"nipple-controls\", {\n  schema: {\n    enabled: { default: true },\n    mode: { default: \"dynamic\", oneOf: [\"static\", \"semi\", \"dynamic\"] },\n    rotationSensitivity: { default: 1.0 },\n    moveJoystickEnabled: { default: true },\n    lookJoystickEnabled: { default: true },\n    sideMargin: { default: \"30px\" },\n    bottomMargin: { default: \"70px\" },\n    moveJoystickPosition: { default: \"left\", oneOf: [\"left\", \"right\"] },\n    lookJoystickPosition: { default: \"right\", oneOf: [\"left\", \"right\"] },\n  },\n\n  init() {\n    this.dVelocity = new THREE.Vector3();\n    this.lookVector = new THREE.Vector2();\n    const lookControls = this.el.querySelector(\"[look-controls]\").components[\"look-controls\"];\n    this.pitchObject = lookControls.pitchObject;\n    this.yawObject = lookControls.yawObject;\n    this.rigRotation = this.el.object3D.rotation;\n    this.moveData = undefined;\n    this.lookData = undefined;\n    this.moving = false;\n    this.rotating = false;\n  },\n\n  update(oldData) {\n    if (\n      this.data.moveJoystickPosition !== oldData.moveJoystickPosition ||\n      this.data.sideMargin !== oldData.sideMargin ||\n      this.data.bottomMargin !== oldData.bottomMargin ||\n      this.data.mode !== oldData.mode\n    ) {\n      this.removeMoveJoystick();\n    }\n    if (\n      this.data.lookJoystickPosition !== oldData.lookJoystickPosition ||\n      this.data.sideMargin !== oldData.sideMargin ||\n      this.data.bottomMargin !== oldData.bottomMargin ||\n      this.data.mode !== oldData.mode\n    ) {\n      this.removeLookJoystick();\n    }\n    if (this.data.enabled && this.data.moveJoystickEnabled) {\n      this.createMoveJoystick();\n    } else {\n      this.removeMoveJoystick();\n    }\n    if (this.data.enabled && this.data.lookJoystickEnabled) {\n      this.createLookJoystick();\n    } else {\n      this.removeLookJoystick();\n    }\n  },\n\n  pause() {\n    this.moving = false;\n    this.rotating = false;\n  },\n\n  remove() {\n    this.removeMoveJoystick();\n    this.removeLookJoystick();\n  },\n\n  isVelocityActive() {\n    return this.data.enabled && this.moving;\n  },\n\n  getVelocityDelta() {\n    this.dVelocity.set(0, 0, 0);\n    if (this.isVelocityActive()) {\n      const force = this.moveData.force < 1 ? this.moveData.force : 1;\n      const angle = this.moveData.angle.radian;\n      const x = Math.cos(angle) * force;\n      const z = -Math.sin(angle) * force;\n      this.dVelocity.set(x, 0, z);\n    }\n    return this.dVelocity; // We don't do a clone() here, the Vector3 will be modified by the calling code but that's fine.\n  },\n\n  isRotationActive() {\n    return this.data.enabled && this.rotating;\n  },\n\n  updateRotation(dt) {\n    if (!this.isRotationActive()) return;\n\n    const force = this.lookData.force < 1 ? this.lookData.force : 1;\n    const angle = this.lookData.angle.radian;\n    const lookVector = this.lookVector;\n    lookVector.x = Math.cos(angle) * force;\n    lookVector.y = Math.sin(angle) * force;\n    lookVector.multiplyScalar((this.data.rotationSensitivity * dt) / 1000);\n\n    this.yawObject.rotation.y -= lookVector.x;\n    let x = this.pitchObject.rotation.x + lookVector.y;\n    x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, x));\n    this.pitchObject.rotation.x = x;\n  },\n\n  tick: function (t, dt) {\n    this.updateRotation(dt);\n  },\n\n  initLeftZone() {\n    const leftZone = document.createElement(\"div\");\n    leftZone.setAttribute(\"id\", \"joystickLeftZone\");\n    leftZone.setAttribute(\n      \"style\",\n      `position:absolute;${this.data.moveJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`\n    );\n    document.body.appendChild(leftZone);\n    this.leftZone = leftZone;\n  },\n\n  initRightZone() {\n    const rightZone = document.createElement(\"div\");\n    rightZone.setAttribute(\"id\", \"joystickRightZone\");\n    rightZone.setAttribute(\n      \"style\",\n      `position:absolute;${this.data.lookJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`\n    );\n    document.body.appendChild(rightZone);\n    this.rightZone = rightZone;\n  },\n\n  createMoveJoystick() {\n    if (this.moveJoystick) return;\n    this.initLeftZone();\n    const options = {\n      mode: this.data.mode,\n      zone: this.leftZone,\n      color: \"white\",\n      fadeTime: 0,\n    };\n    this.leftZone.style.width = \"100px\";\n    if (this.data.mode === \"static\") {\n      this.leftZone.style.height = \"100px\";\n      options.position = { left: \"50%\", bottom: \"50%\" };\n    } else {\n      this.leftZone.style.height = \"400px\";\n    }\n\n    this.moveJoystick = nipplejs.create(options);\n    this.moveJoystick.on(\"move\", (evt, data) => {\n      this.moveData = data;\n      this.moving = true;\n    });\n    this.moveJoystick.on(\"end\", (evt, data) => {\n      this.moving = false;\n    });\n  },\n\n  createLookJoystick() {\n    if (this.lookJoystick) return;\n    this.initRightZone();\n    const options = {\n      mode: this.data.mode,\n      zone: this.rightZone,\n      color: \"white\",\n      fadeTime: 0,\n    };\n    this.rightZone.style.width = \"100px\";\n    if (this.data.mode === \"static\") {\n      this.rightZone.style.height = \"100px\";\n      options.position = { left: \"50%\", bottom: \"50%\" };\n    } else {\n      this.rightZone.style.height = \"400px\";\n    }\n\n    this.lookJoystick = nipplejs.create(options);\n    this.lookJoystick.on(\"move\", (evt, data) => {\n      this.lookData = data;\n      this.rotating = true;\n    });\n    this.lookJoystick.on(\"end\", (evt, data) => {\n      this.rotating = false;\n    });\n  },\n\n  removeMoveJoystick() {\n    if (this.moveJoystick) {\n      this.moveJoystick.destroy();\n      this.moveJoystick = undefined;\n    }\n\n    this.moveData = undefined;\n\n    if (this.leftZone && this.leftZone.parentNode) {\n      this.leftZone.remove();\n      this.leftZone = undefined;\n    }\n  },\n\n  removeLookJoystick() {\n    if (this.lookJoystick) {\n      this.lookJoystick.destroy();\n      this.lookJoystick = undefined;\n    }\n\n    this.lookData = undefined;\n\n    if (this.rightZone && this.rightZone.parentNode) {\n      this.rightZone.remove();\n      this.rightZone = undefined;\n    }\n  },\n});\n","/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: { default: true },\n    reverseEnabled: { default: true }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n    const canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart);\n    canvasEl.addEventListener('touchend', this.onTouchEnd);\n    const vrModeUI = sceneEl.getAttribute('vr-mode-ui');\n    if (vrModeUI && vrModeUI.cardboardModeEnabled) {\n      sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    }\n  },\n\n  removeEventListeners: function () {\n    const canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n    if (!canvasEl) { return; }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n    this.el.sceneEl.removeEventListener('enter-vr', this.onEnterVR)\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!this.direction;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    this.direction = -1;\n    if (this.data.reverseEnabled && e.touches && e.touches.length === 2) {\n      this.direction = 1;\n    }\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    this.direction = 0;\n    e.preventDefault();\n  },\n\n  onEnterVR: function () {\n    // This is to make the Cardboard button on Chrome Android working\n    const xrSession = this.el.sceneEl.xrSession;\n    if (!xrSession) { return; }\n    xrSession.addEventListener('selectstart', this.onTouchStart);\n    xrSession.addEventListener('selectend', this.onTouchEnd);\n  }\n});\n","/**\n * 3dof (Gear VR, Daydream) controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('trackpad-controls', {\n  schema: {\n    enabled: { default: true },\n    enableNegX: { default: true },\n    enablePosX: { default: true },\n    enableNegZ: { default: true },\n    enablePosZ: { default: true },\n    mode: { default: 'touch', oneOf: ['swipe', 'touch', 'press'] }\n\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.zVel      = 0;\n    this.xVel      = 0;\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const data = this.data;\n    const sceneEl = this.el.sceneEl;\n\n    sceneEl.addEventListener('axismove', this.onAxisMove);\n\n    switch (data.mode) {\n      case 'swipe':\n      case 'touch':\n        sceneEl.addEventListener('trackpadtouchstart', this.onTouchStart);\n        sceneEl.addEventListener('trackpadtouchend', this.onTouchEnd);\n        break;\n\n      case 'press':\n        sceneEl.addEventListener('trackpaddown', this.onTouchStart);\n        sceneEl.addEventListener('trackpadup', this.onTouchEnd);\n        break;\n    }\n\n  },\n\n  removeEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n\n    sceneEl.removeEventListener('axismove', this.onAxisMove);\n    sceneEl.removeEventListener('trackpadtouchstart', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadtouchend', this.onTouchEnd);\n    sceneEl.removeEventListener('trackpaddown', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadup', this.onTouchEnd);\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && this.isMoving;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.isMoving ? -this.zVel : 1;\n    this.dVelocity.x = this.isMoving ? this.xVel : 1;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onAxisMove = this.onAxisMove.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    switch(this.data.mode){\n      case 'swipe':\n        this.canRecordAxis = true;\n        this.startingAxisData = [];\n        break;\n      case 'touch':\n        this.isMoving = true;\n        break;\n      case 'press':\n        this.isMoving = true;\n        break;\n    }\n\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    if(this.data.mode == 'swipe') {\n        this.startingAxisData = [];\n    }\n\n    this.isMoving = false;\n    e.preventDefault();\n  },\n\n  onAxisMove: function(e){\n    switch (this.data.mode) {\n      case 'swipe':\n        return this.handleSwipeAxis(e);\n      case 'touch':\n      case 'press':\n        return this.handleTouchAxis(e);\n    }\n  },\n\n  handleSwipeAxis: function(e) {\n    const data = this.data;\n    const axisData = e.detail.axis;\n\n    if(this.startingAxisData.length === 0 && this.canRecordAxis){\n      this.canRecordAxis = false;\n      this.startingAxisData[0] = axisData[0];\n      this.startingAxisData[1] = axisData[1];\n    }\n\n    if(this.startingAxisData.length > 0){\n      let velX = 0;\n      let velZ = 0;\n\n      if (data.enableNegX && axisData[0] < this.startingAxisData[0]) {\n        velX = -1;\n      }\n\n      if (data.enablePosX && axisData[0] > this.startingAxisData[0]) {\n        velX = 1;\n      }\n\n      if (data.enablePosZ && axisData[1] > this.startingAxisData[1]) {\n        velZ = -1;\n      }\n\n      if (data.enableNegZ && axisData[1] < this.startingAxisData[1]) {\n        velZ = 1;\n      }\n\n      const absChangeZ  = Math.abs(this.startingAxisData[1] - axisData[1]);\n      const absChangeX  = Math.abs(this.startingAxisData[0] - axisData[0]);\n\n      if (absChangeX > absChangeZ) {\n        this.zVel = 0;\n        this.xVel = velX;\n        this.isMoving = true;\n      } else {\n        this.xVel = 0;\n        this.zVel = velZ;\n        this.isMoving = true;\n      }\n\n    }\n  },\n\n  handleTouchAxis: function(e) {\n    const data = this.data;\n    const axisData = e.detail.axis;\n\n    let velX = 0;\n    let velZ = 0;\n\n    if (data.enableNegX && axisData[0] < 0) {\n      velX = -1;\n    }\n\n    if (data.enablePosX && axisData[0] > 0) {\n      velX = 1;\n    }\n\n    if (data.enablePosZ && axisData[1] > 0) {\n      velZ = -1;\n    }\n\n    if (data.enableNegZ && axisData[1] < 0) {\n      velZ = 1;\n    }\n\n    if (Math.abs(axisData[0]) > Math.abs(axisData[1])) {\n      this.zVel = 0;\n      this.xVel = velX;\n    } else {\n      this.xVel = 0;\n      this.zVel = velZ;\n    }\n\n  }\n\n});\n\n","const LoopMode = {\n  once: THREE.LoopOnce,\n  repeat: THREE.LoopRepeat,\n  pingpong: THREE.LoopPingPong\n};\n\n/**\n * animation-mixer\n *\n * Player for animation clips. Intended to be compatible with any model format that supports\n * skeletal or morph animations through THREE.AnimationMixer.\n * See: https://threejs.org/docs/?q=animation#Reference/Animation/AnimationMixer\n */\nmodule.exports = AFRAME.registerComponent('animation-mixer', {\n  schema: {\n    clip: { default: '*' },\n    useRegExp: {default: false},\n    duration: { default: 0 },\n    clampWhenFinished: { default: false, type: 'boolean' },\n    crossFadeDuration: { default: 0 },\n    loop: { default: 'repeat', oneOf: Object.keys(LoopMode) },\n    repetitions: { default: Infinity, min: 0 },\n    timeScale: { default: 1 },\n    startAt: { default: 0 }\n  },\n\n  init: function () {\n    /** @type {THREE.Mesh} */\n    this.model = null;\n    /** @type {THREE.AnimationMixer} */\n    this.mixer = null;\n    /** @type {Array<THREE.AnimationAction>} */\n    this.activeActions = [];\n\n    const model = this.el.getObject3D('mesh');\n\n    if (model) {\n      this.load(model);\n    } else {\n      this.el.addEventListener('model-loaded', (e) => {\n        this.load(e.detail.model);\n      });\n    }\n  },\n\n  load: function (model) {\n    const el = this.el;\n    this.model = model;\n    this.mixer = new THREE.AnimationMixer(model);\n    this.mixer.addEventListener('loop', (e) => {\n      el.emit('animation-loop', { action: e.action, loopDelta: e.loopDelta });\n    });\n    this.mixer.addEventListener('finished', (e) => {\n      el.emit('animation-finished', { action: e.action, direction: e.direction });\n    });\n    if (this.data.clip) this.update({});\n  },\n\n  remove: function () {\n    if (this.mixer) this.mixer.stopAllAction();\n  },\n\n  update: function (prevData) {\n    if (!prevData) return;\n\n    const data = this.data;\n    const changes = AFRAME.utils.diff(data, prevData);\n\n    // If selected clips have changed, restart animation.\n    if ('clip' in changes) {\n      this.stopAction();\n      if (data.clip) this.playAction();\n      return;\n    }\n\n    // Otherwise, modify running actions.\n    this.activeActions.forEach((action) => {\n      if ('duration' in changes && data.duration) {\n        action.setDuration(data.duration);\n      }\n      if ('clampWhenFinished' in changes) {\n        action.clampWhenFinished = data.clampWhenFinished;\n      }\n      if ('loop' in changes || 'repetitions' in changes) {\n        action.setLoop(LoopMode[data.loop], data.repetitions);\n      }\n      if ('timeScale' in changes) {\n        action.setEffectiveTimeScale(data.timeScale);\n      }\n    });\n  },\n\n  stopAction: function () {\n    const data = this.data;\n    for (let i = 0; i < this.activeActions.length; i++) {\n      data.crossFadeDuration\n        ? this.activeActions[i].fadeOut(data.crossFadeDuration)\n        : this.activeActions[i].stop();\n    }\n    this.activeActions.length = 0;\n  },\n\n  playAction: function () {\n    if (!this.mixer) return;\n\n    const model = this.model,\n      data = this.data,\n      clips = model.animations || (model.geometry || {}).animations || [];\n\n    if (!clips.length) return;\n\n    const re = data.useRegExp ? data.clip : wildcardToRegExp(data.clip);\n\n    for (let clip, i = 0; (clip = clips[i]); i++) {\n      if (clip.name.match(re)) {\n        const action = this.mixer.clipAction(clip, model);\n\n        action.enabled = true;\n        action.clampWhenFinished = data.clampWhenFinished;\n        if (data.duration) action.setDuration(data.duration);\n        if (data.timeScale !== 1) action.setEffectiveTimeScale(data.timeScale);\n        // animation-mixer.startAt and AnimationAction.startAt have very different meanings.\n        // animation-mixer.startAt indicates which frame in the animation to start at, in msecs.\n        // AnimationAction.startAt indicates when to start the animation (from the 1st frame),\n        // measured in global mixer time, in seconds.\n        action.startAt(this.mixer.time - data.startAt / 1000);\n        action\n          .setLoop(LoopMode[data.loop], data.repetitions)\n          .fadeIn(data.crossFadeDuration)\n          .play();\n        this.activeActions.push(action);\n      }\n    }\n  },\n\n  tick: function (t, dt) {\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n  }\n});\n\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\nfunction wildcardToRegExp(s) {\n  return new RegExp('^' + s.split(/\\*+/).map(regExpEscape).join('.*') + '$');\n}\n\n/**\n * RegExp-escapes all characters in the given string.\n */\nfunction regExpEscape(s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n}\n","THREE.ColladaLoader = require('../../lib/ColladaLoader');\n\n/**\n * collada-model-legacy\n *\n * Loader for COLLADA (.dae) format.\n */\nmodule.exports.Component = AFRAME.registerComponent('collada-model-legacy', {\n  schema: {type: 'asset'},\n\n  init: function () {\n    this.model = null;\n    this.loader = new THREE.ColladaLoader();\n  },\n\n  update: function () {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loader.load(src, function (colladaModel) {\n      self.model = colladaModel.scene;\n      self.model.traverse(function (object) {\n        if (object.isMesh) {\n          var material = object.material;\n          if (material.color) rendererSystem.applyColorCorrection(material.color);\n          if (material.map) rendererSystem.applyColorCorrection(material.map);\n          if (material.emissive) rendererSystem.applyColorCorrection(material.emissive);\n          if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n        }\n      });\n      el.setObject3D('mesh', self.model);\n      el.emit('model-loaded', {format: 'collada', model: self.model});\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n","THREE.FBXLoader = require('../../lib/FBXLoader');\n\n/**\n * fbx-model\n *\n * Loader for FBX format. Supports ASCII, but *not* binary, models.\n */\nmodule.exports = AFRAME.registerComponent('fbx-model', {\n  schema: {\n    src:         { type: 'asset' },\n    crossorigin: { default: '' }\n  },\n\n  init: function () {\n    this.model = null;\n  },\n\n  update: function () {\n    const data = this.data;\n    if (!data.src) return;\n\n    this.remove();\n    const loader = new THREE.FBXLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, this.load.bind(this));\n  },\n\n  load: function (model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {format: 'fbx', model: model});\n  },\n\n  remove: function () {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});\n","const fetchScript = require('../../lib/fetch-script')();\n\nconst LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nconst loadLoader = (function () {\n  let promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}());\n\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {type: 'model'},\n\n  init: function () {\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(() => {\n      this.loader = new THREE.GLTFLoader();\n      this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n\n  update: function () {\n    const self = this;\n    const el = this.el;\n    const src = this.data;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loaderPromise.then(() => {\n      this.loader.load(src, function gltfLoaded (gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n","require('./animation-mixer');\nrequire('./collada-model-legacy');\nrequire('./fbx-model');\nrequire('./gltf-model-legacy');\nrequire('./object-model');\n","/**\n * object-model\n *\n * Loader for THREE.js JSON format. Somewhat confusingly, there are two different THREE.js formats,\n * both having the .json extension. This loader supports only THREE.ObjectLoader, which typically\n * includes multiple meshes or an entire scene.\n *\n * Check the console for errors, if in doubt. You may need to use `json-model` or\n * `blend-character-model` for some .js and .json files.\n *\n * See: https://clara.io/learn/user-guide/data_exchange/threejs_export\n */\nmodule.exports = AFRAME.registerComponent('object-model', {\n  schema: {\n    src:         { type: 'asset' },\n    crossorigin: { default: '' }\n  },\n\n  init: function () {\n    this.model = null;\n  },\n\n  update: function () {\n    let loader;\n    const data = this.data;\n    if (!data.src) return;\n\n    this.remove();\n    loader = new THREE.ObjectLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, (object) => {\n\n      // Enable skinning, if applicable.\n      object.traverse((o) => {\n        if (o instanceof THREE.SkinnedMesh && o.material) {\n          o.material.skinning = !!((o.geometry && o.geometry.bones) || []).length;\n        }\n      });\n\n      this.load(object);\n    });\n  },\n\n  load: function (model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {format: 'json', model: model});\n  },\n\n  remove: function () {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});\n","module.exports = AFRAME.registerComponent('checkpoint', {\n  schema: {\n    offset: {default: {x: 0, y: 0, z: 0}, type: 'vec3'}\n  },\n\n  init: function () {\n    this.active = false;\n    this.targetEl = null;\n    this.fire = this.fire.bind(this);\n    this.offset = new THREE.Vector3();\n  },\n\n  update: function () {\n    this.offset.copy(this.data.offset);\n  },\n\n  play: function () { this.el.addEventListener('click', this.fire); },\n  pause: function () { this.el.removeEventListener('click', this.fire); },\n  remove: function () { this.pause(); },\n\n  fire: function () {\n    const targetEl = this.el.sceneEl.querySelector('[checkpoint-controls]');\n    if (!targetEl) {\n      throw new Error('No `checkpoint-controls` component found.');\n    }\n    targetEl.components['checkpoint-controls'].setCheckpoint(this.el);\n  },\n\n  getOffset: function () {\n    return this.offset.copy(this.data.offset);\n  }\n});\n","/**\n * @param  {Array<THREE.Material>|THREE.Material} material\n * @return {Array<THREE.Material>}\n */\nfunction ensureMaterialArray (material) {\n  if (!material) {\n    return [];\n  } else if (Array.isArray(material)) {\n    return material;\n  } else if (material.materials) {\n    return material.materials;\n  } else {\n    return [material];\n  }\n}\n\n/**\n * @param  {THREE.Object3D} mesh\n * @param  {Array<string>} materialNames\n * @param  {THREE.Texture} envMap\n * @param  {number} reflectivity  [description]\n */\nfunction applyEnvMap (mesh, materialNames, envMap, reflectivity) {\n  if (!mesh) return;\n\n  materialNames = materialNames || [];\n\n  mesh.traverse((node) => {\n\n    if (!node.isMesh) return;\n\n    const meshMaterials = ensureMaterialArray(node.material);\n\n    meshMaterials.forEach((material) => {\n\n      if (material && !('envMap' in material)) return;\n      if (materialNames.length && materialNames.indexOf(material.name) === -1) return;\n\n      material.envMap = envMap;\n      material.reflectivity = reflectivity;\n      material.needsUpdate = true;\n\n    });\n\n  });\n}\n\n/**\n * Specifies an envMap on an entity, without replacing any existing material\n * properties.\n */\nmodule.exports = AFRAME.registerComponent('cube-env-map', {\n  multiple: true,\n\n  schema: {\n    path: {default: ''},\n    extension: {default: 'jpg', oneOf: ['jpg', 'png']},\n    enableBackground: {default: false},\n    reflectivity: {default: 1, min: 0, max: 1},\n    materials: {default: []}\n  },\n\n  init: function () {\n    const data = this.data;\n\n    this.texture = new THREE.CubeTextureLoader().load([\n      data.path + 'posx.' + data.extension, data.path + 'negx.' + data.extension,\n      data.path + 'posy.' + data.extension, data.path + 'negy.' + data.extension,\n      data.path + 'posz.' + data.extension, data.path + 'negz.' + data.extension\n    ]);\n    this.texture.format = THREE.RGBAFormat;\n\n    this.object3dsetHandler = () => {\n      const mesh = this.el.getObject3D('mesh');\n      const data = this.data;\n      applyEnvMap(mesh, data.materials, this.texture, data.reflectivity);\n    };\n\n    this.object3dsetHandler();\n    this.el.addEventListener('object3dset', this.object3dsetHandler);\n    \n  },\n\n  update: function (oldData) {\n    const data = this.data;\n    const mesh = this.el.getObject3D('mesh');\n\n    let addedMaterialNames = [];\n    let removedMaterialNames = [];\n\n    if (data.materials.length) {\n      if (oldData.materials) {\n        addedMaterialNames = data.materials.filter((name) => !oldData.materials.includes(name));\n        removedMaterialNames = oldData.materials.filter((name) => !data.materials.includes(name));\n      } else {\n        addedMaterialNames = data.materials;\n      }\n    }\n    if (addedMaterialNames.length) {\n      applyEnvMap(mesh, addedMaterialNames, this.texture, data.reflectivity);\n    }\n    if (removedMaterialNames.length) {\n      applyEnvMap(mesh, removedMaterialNames, null, 1);\n    }\n\n    if (oldData.materials && data.reflectivity !== oldData.reflectivity) {\n      const maintainedMaterialNames = data.materials\n        .filter((name) => oldData.materials.includes(name));\n      if (maintainedMaterialNames.length) {\n        applyEnvMap(mesh, maintainedMaterialNames, this.texture, data.reflectivity);\n      }\n    }\n\n    if (this.data.enableBackground && !oldData.enableBackground) {\n      this.setBackground(this.texture);\n    } else if (!this.data.enableBackground && oldData.enableBackground) {\n      this.setBackground(null);\n    }\n  },\n\n  remove: function () {\n    this.el.removeEventListener('object3dset', this.object3dsetHandler);\n    const mesh = this.el.getObject3D('mesh');\n    const data = this.data;\n\n    applyEnvMap(mesh, data.materials, null, 1);\n    if (data.enableBackground) this.setBackground(null);\n  },\n\n  setBackground: function (texture) {\n    this.el.sceneEl.object3D.background = texture;\n  }\n});","/* global CANNON */\n\n/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Handles events coming from the hand-controls.\n * Determines if the entity is grabbed or released.\n * Updates its position to move along the controller.\n */\nmodule.exports = AFRAME.registerComponent('grab', {\n  init: function () {\n    this.system = this.el.sceneEl.systems.physics;\n\n    this.GRABBED_STATE = 'grabbed';\n\n    this.grabbing = false;\n    this.hitEl =      /** @type {AFRAME.Element}    */ null;\n    this.physics =    /** @type {AFRAME.System}     */ this.el.sceneEl.systems.physics;\n    this.constraint = /** @type {CANNON.Constraint} */ null;\n\n    // Bind event handlers\n    this.onHit = this.onHit.bind(this);\n    this.onGripOpen = this.onGripOpen.bind(this);\n    this.onGripClose = this.onGripClose.bind(this);\n  },\n\n  play: function () {\n    const el = this.el;\n    el.addEventListener('hit', this.onHit);\n    el.addEventListener('gripdown', this.onGripClose);\n    el.addEventListener('gripup', this.onGripOpen);\n    el.addEventListener('trackpaddown', this.onGripClose);\n    el.addEventListener('trackpadup', this.onGripOpen);\n    el.addEventListener('triggerdown', this.onGripClose);\n    el.addEventListener('triggerup', this.onGripOpen);\n  },\n\n  pause: function () {\n    const el = this.el;\n    el.removeEventListener('hit', this.onHit);\n    el.removeEventListener('gripdown', this.onGripClose);\n    el.removeEventListener('gripup', this.onGripOpen);\n    el.removeEventListener('trackpaddown', this.onGripClose);\n    el.removeEventListener('trackpadup', this.onGripOpen);\n    el.removeEventListener('triggerdown', this.onGripClose);\n    el.removeEventListener('triggerup', this.onGripOpen);\n  },\n\n  onGripClose: function () {\n    this.grabbing = true;\n  },\n\n  onGripOpen: function () {\n    const hitEl = this.hitEl;\n    this.grabbing = false;\n    if (!hitEl) { return; }\n    hitEl.removeState(this.GRABBED_STATE);\n    this.hitEl = undefined;\n    this.system.removeConstraint(this.constraint);\n    this.constraint = null;\n  },\n\n  onHit: function (evt) {\n    const hitEl = evt.detail.el;\n    // If the element is already grabbed (it could be grabbed by another controller).\n    // If the hand is not grabbing the element does not stick.\n    // If we're already grabbing something you can't grab again.\n    if (hitEl.is(this.GRABBED_STATE) || !this.grabbing || this.hitEl) { return; }\n    hitEl.addState(this.GRABBED_STATE);\n    this.hitEl = hitEl;\n    this.constraint = new CANNON.LockConstraint(this.el.body, hitEl.body);\n    this.system.addConstraint(this.constraint);\n  }\n});\n","require('./checkpoint');\nrequire('./cube-env-map');\nrequire('./grab');\nrequire('./normal-material');\nrequire('./sphere-collider');\n","/**\n * Recursively applies a MeshNormalMaterial to the entity, such that\n * face colors are determined by their orientation. Helpful for\n * debugging geometry\n */\nmodule.exports = AFRAME.registerComponent('normal-material', {\n  init: function () {\n    this.material = new THREE.MeshNormalMaterial({flatShading: true});\n    this.applyMaterial = this.applyMaterial.bind(this);\n    this.el.addEventListener('object3dset', this.applyMaterial);\n    this.applyMaterial();\n  },\n\n  remove: function () {\n    this.el.removeEventListener('object3dset', this.applyMaterial);\n  },\n\n  applyMaterial: function () {\n    this.el.object3D.traverse((node) => {\n      if (node.isMesh) node.material = this.material;\n    });\n  }\n});\n","/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Implement bounding sphere collision detection for entities with a mesh.\n * Sets the specified state on the intersected entities.\n *\n * @property {string} objects - Selector of the entities to test for collision.\n * @property {string} state - State to set on collided entities.\n *\n */\nmodule.exports = AFRAME.registerComponent('sphere-collider', {\n  schema: {\n    enabled: {default: true},\n    interval: {default: 80},\n    objects: {default: ''},\n    state: {default: 'collided'},\n    radius: {default: 0.05},\n    watch: {default: true}\n  },\n\n  init: function () {\n    /** @type {MutationObserver} */\n    this.observer = null;\n    /** @type {Array<Element>} Elements to watch for collisions. */\n    this.els = [];\n    /** @type {Array<Element>} Elements currently in collision state. */\n    this.collisions = [];\n    this.prevCheckTime = undefined;\n\n    this.eventDetail = {};\n    this.handleHit = this.handleHit.bind(this);\n    this.handleHitEnd = this.handleHitEnd.bind(this);\n  },\n\n  play: function () {\n    const sceneEl = this.el.sceneEl;\n\n    if (this.data.watch) {\n      this.observer = new MutationObserver(this.update.bind(this, null));\n      this.observer.observe(sceneEl, {childList: true, subtree: true});\n    }\n  },\n\n  pause: function () {\n    if (this.observer) {\n      this.observer.disconnect();\n      this.observer = null;\n    }\n  },\n\n  /**\n   * Update list of entities to test for collision.\n   */\n  update: function () {\n    const data = this.data;\n    let objectEls;\n\n    // Push entities into list of els to intersect.\n    if (data.objects) {\n      objectEls = this.el.sceneEl.querySelectorAll(data.objects);\n    } else {\n      // If objects not defined, intersect with everything.\n      objectEls = this.el.sceneEl.children;\n    }\n    // Convert from NodeList to Array\n    this.els = Array.prototype.slice.call(objectEls);\n  },\n\n  tick: (function () {\n    const position = new THREE.Vector3(),\n        meshPosition = new THREE.Vector3(),\n        colliderScale = new THREE.Vector3(),\n        size = new THREE.Vector3(),\n        box = new THREE.Box3(),\n        collisions = [],\n        distanceMap = new Map();\n    return function (time) {\n      if (!this.data.enabled) { return; }\n\n      // Only check for intersection if interval time has passed.\n      const prevCheckTime = this.prevCheckTime;\n      if (prevCheckTime && (time - prevCheckTime < this.data.interval)) { return; }\n      // Update check time.\n      this.prevCheckTime = time;\n\n      const el = this.el,\n          data = this.data,\n          mesh = el.getObject3D('mesh');\n      let colliderRadius;\n\n      if (!mesh) { return; }\n\n      collisions.length = 0;\n      distanceMap.clear();\n      el.object3D.getWorldPosition(position);\n      el.object3D.getWorldScale(colliderScale);\n      colliderRadius = data.radius * scaleFactor(colliderScale);\n      // Update collision list.\n      this.els.forEach(intersect);\n\n      // Emit events and add collision states, in order of distance.\n      collisions\n        .sort((a, b) => distanceMap.get(a) > distanceMap.get(b) ? 1 : -1)\n        .forEach(this.handleHit);\n\n      // Remove collision state from other elements.\n      this.collisions\n        .filter((el) => !distanceMap.has(el))\n        .forEach(this.handleHitEnd);\n\n      // Store new collisions\n      copyArray(this.collisions, collisions);\n\n      // Bounding sphere collision detection\n      function intersect (el) {\n        let radius, mesh, distance, extent;\n\n        if (!el.isEntity) { return; }\n\n        mesh = el.getObject3D('mesh');\n\n        if (!mesh) { return; }\n\n        box.setFromObject(mesh).getSize(size);\n        extent = Math.max(size.x, size.y, size.z) / 2;\n        radius = Math.sqrt(2 * extent * extent);\n        box.getCenter(meshPosition);\n\n        if (!radius) { return; }\n\n        distance = position.distanceTo(meshPosition);\n        if (distance < radius + colliderRadius) {\n          collisions.push(el);\n          distanceMap.set(el, distance);\n        }\n      }\n      // use max of scale factors to maintain bounding sphere collision\n      function scaleFactor (scaleVec) {\n        return Math.max(scaleVec.x, scaleVec.y, scaleVec.z);\n      }\n    };\n  })(),\n\n  handleHit: function (targetEl) {\n    targetEl.emit('hit');\n    targetEl.addState(this.data.state);\n    this.eventDetail.el = targetEl;\n    this.el.emit('hit', this.eventDetail);\n  },\n  handleHitEnd: function (targetEl) {\n    targetEl.emit('hitend');\n    targetEl.removeState(this.data.state);\n    this.eventDetail.el = targetEl;\n    this.el.emit('hitend', this.eventDetail);\n  }\n});\n\nfunction copyArray (dest, source) {\n  dest.length = 0;\n  for (let i = 0; i < source.length; i++) { dest[i] = source[i]; }\n}\n","require('./nav-mesh');\nrequire('./nav-agent');\nrequire('./system');\n","module.exports = AFRAME.registerComponent('nav-agent', {\n  schema: {\n    destination: {type: 'vec3'},\n    active: {default: false},\n    speed: {default: 2}\n  },\n  init: function () {\n    this.system = this.el.sceneEl.systems.nav;\n    this.system.addAgent(this);\n    this.group = null;\n    this.path = [];\n    this.raycaster = new THREE.Raycaster();\n  },\n  remove: function () {\n    this.system.removeAgent(this);\n  },\n  update: function () {\n    this.path.length = 0;\n  },\n  updateNavLocation: function () {\n    this.group = null;\n    this.path = [];\n  },\n  tick: (function () {\n    const vDest = new THREE.Vector3();\n    const vDelta = new THREE.Vector3();\n    const vNext = new THREE.Vector3();\n\n    return function (t, dt) {\n      const el = this.el;\n      const data = this.data;\n      const raycaster = this.raycaster;\n      const speed = data.speed * dt / 1000;\n\n      if (!data.active) return;\n\n      // Use PatrolJS pathfinding system to get shortest path to target.\n      if (!this.path.length) {\n        const position = this.el.object3D.position;\n        this.group = this.group || this.system.getGroup(position);\n        this.path = this.system.getPath(position, vDest.copy(data.destination), this.group) || [];\n        el.emit('navigation-start');\n      }\n\n      // If no path is found, exit.\n      if (!this.path.length) {\n        console.warn('[nav] Unable to find path to %o.', data.destination);\n        this.el.setAttribute('nav-agent', {active: false});\n        el.emit('navigation-end');\n        return;\n      }\n\n      // Current segment is a vector from current position to next waypoint.\n      const vCurrent = el.object3D.position;\n      const vWaypoint = this.path[0];\n      vDelta.subVectors(vWaypoint, vCurrent);\n\n      const distance = vDelta.length();\n      let gazeTarget;\n\n      if (distance < speed) {\n        // If <1 step from current waypoint, discard it and move toward next.\n        this.path.shift();\n\n        // After discarding the last waypoint, exit pathfinding.\n        if (!this.path.length) {\n          this.el.setAttribute('nav-agent', {active: false});\n          el.emit('navigation-end');\n          return;\n        }\n\n        vNext.copy(vCurrent);\n        gazeTarget = this.path[0];\n      } else {\n        // If still far away from next waypoint, find next position for\n        // the current frame.\n        vNext.copy(vDelta.setLength(speed)).add(vCurrent);\n        gazeTarget = vWaypoint;\n      }\n\n      // Look at the next waypoint.\n      gazeTarget.y = vCurrent.y;\n      el.object3D.lookAt(gazeTarget);\n\n      // Raycast against the nav mesh, to keep the agent moving along the\n      // ground, not traveling in a straight line from higher to lower waypoints.\n      raycaster.ray.origin.copy(vNext);\n      raycaster.ray.origin.y += 1.5;\n      raycaster.ray.direction = {x:0, y:-1, z:0};\n      const intersections = raycaster.intersectObject(this.system.getNavMesh());\n\n      if (!intersections.length) {\n        // Raycasting failed. Step toward the waypoint and hope for the best.\n        vCurrent.copy(vNext);\n      } else {\n        // Re-project next position onto nav mesh.\n        vDelta.subVectors(intersections[0].point, vCurrent);\n        vCurrent.add(vDelta.setLength(speed));\n      }\n\n    };\n  }())\n});\n","/**\n * nav-mesh\n *\n * Waits for a mesh to be loaded on the current entity, then sets it as the\n * nav mesh in the pathfinding system.\n */\nmodule.exports = AFRAME.registerComponent('nav-mesh', {\n  schema: {\n    nodeName: {type: 'string'}\n  },\n\n  init: function () {\n    this.system = this.el.sceneEl.systems.nav;\n    this.hasLoadedNavMesh = false;\n    this.nodeName = this.data.nodeName;\n    this.el.addEventListener('object3dset', this.loadNavMesh.bind(this));\n  },\n\n  play: function () {\n    if (!this.hasLoadedNavMesh) this.loadNavMesh();\n  },\n\n  loadNavMesh: function () {\n    var self = this;\n    const object = this.el.getObject3D('mesh');\n    const scene = this.el.sceneEl.object3D;\n\n    if (!object) return;\n\n    let navMesh;\n    object.traverse((node) => {\n      if (node.isMesh &&\n          (!self.nodeName || node.name === self.nodeName)) navMesh = node;\n    });\n\n    if (!navMesh) return;\n\n    const navMeshGeometry = navMesh.geometry.clone();\n    navMesh.updateWorldMatrix(true, false);\n    navMeshGeometry.applyMatrix4(navMesh.matrixWorld);\n    this.system.setNavMeshGeometry(navMeshGeometry);\n    this.hasLoadedNavMesh = true;\n  }\n});\n","const { Pathfinding } = require('three-pathfinding');\n\nconst pathfinder = new Pathfinding();\nconst ZONE = 'level';\n\n/**\n * nav\n *\n * Pathfinding system, using PatrolJS.\n */\nmodule.exports = AFRAME.registerSystem('nav', {\n  init: function () {\n    this.navMesh = null;\n    this.agents = new Set();\n  },\n\n  /**\n   * @param {THREE.Geometry} geometry\n   */\n  setNavMeshGeometry: function (geometry) {\n    this.navMesh = new THREE.Mesh(geometry);\n    pathfinder.setZoneData(ZONE, Pathfinding.createZone(geometry));\n    Array.from(this.agents).forEach((agent) => agent.updateNavLocation());\n  },\n\n  /**\n   * @return {THREE.Mesh}\n   */\n  getNavMesh: function () {\n    return this.navMesh;\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  addAgent: function (ctrl) {\n    this.agents.add(ctrl);\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  removeAgent: function (ctrl) {\n    this.agents.delete(ctrl);\n  },\n\n  /**\n   * @param  {THREE.Vector3} start\n   * @param  {THREE.Vector3} end\n   * @param  {number} groupID\n   * @return {Array<THREE.Vector3>}\n   */\n  getPath: function (start, end, groupID) {\n    return this.navMesh\n      ? pathfinder.findPath(start, end, ZONE, groupID)\n      : null;\n  },\n\n  /**\n   * @param {THREE.Vector3} position\n   * @return {number}\n   */\n  getGroup: function (position) {\n    return this.navMesh\n      ? pathfinder.getGroup(ZONE, position)\n      : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} position\n   * @param  {number} groupID\n   * @return {Node}\n   */\n  getNode: function (position, groupID) {\n    return this.navMesh\n      ? pathfinder.getClosestNode(position, ZONE, groupID, true)\n      : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} start Starting position.\n   * @param  {THREE.Vector3} end Desired ending position.\n   * @param  {number} groupID\n   * @param  {Node} node\n   * @param  {THREE.Vector3} endTarget (Output) Adjusted step end position.\n   * @return {Node} Current node, after step is taken.\n   */\n  clampStep: function (start, end, groupID, node, endTarget) {\n    if (!this.navMesh) {\n      endTarget.copy(end);\n      return null;\n    } else if (!node) {\n      endTarget.copy(end);\n      return this.getNode(end, groupID);\n    }\n    return pathfinder.clampStep(start, end, node, ZONE, groupID, endTarget);\n  }\n});\n","/**\n * Flat grid.\n *\n * Defaults to 75x75.\n */\nmodule.exports = AFRAME.registerPrimitive('a-grid', {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane',\n      width: 75,\n      height: 75\n    },\n    rotation: {x: -90, y: 0, z: 0},\n    material: {\n      src: 'url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)',\n      repeat: '75 75'\n    }\n  },\n  mappings: {\n    width: 'geometry.width',\n    height: 'geometry.height',\n    src: 'material.src'\n  }\n});\n","/**\n * Flat-shaded ocean primitive.\n *\n * Based on a Codrops tutorial:\n * http://tympanus.net/codrops/2016/04/26/the-aviator-animating-basic-3d-scene-threejs/\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-ocean', {\n  defaultComponents: {\n    ocean: {},\n    rotation: {x: -90, y: 0, z: 0}\n  },\n  mappings: {\n    width: 'ocean.width',\n    depth: 'ocean.depth',\n    density: 'ocean.density',\n    amplitude: 'ocean.amplitude',\n    amplitudeVariance: 'ocean.amplitudeVariance',\n    speed: 'ocean.speed',\n    speedVariance: 'ocean.speedVariance',\n    color: 'ocean.color',\n    opacity: 'ocean.opacity'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('ocean', {\n  schema: {\n    // Dimensions of the ocean area.\n    width: {default: 10, min: 0},\n    depth: {default: 10, min: 0},\n\n    // Density of waves.\n    density: {default: 10},\n\n    // Wave amplitude and variance.\n    amplitude: {default: 0.1},\n    amplitudeVariance: {default: 0.3},\n\n    // Wave speed and variance.\n    speed: {default: 1},\n    speedVariance: {default: 2},\n\n    // Material.\n    color: {default: '#7AD2F7', type: 'color'},\n    opacity: {default: 0.8}\n  },\n\n  /**\n   * Use play() instead of init(), because component mappings – unavailable as dependencies – are\n   * not guaranteed to have parsed when this component is initialized.\n   */\n  play: function () {\n    const el = this.el;\n    const data = this.data;\n    let material = el.components.material;\n\n    const geometry = new THREE.PlaneGeometry(data.width, data.depth, data.density, data.density);\n    this.waves = [];\n    const posAttribute = geometry.getAttribute('position');\n    for (let i = 0; i < posAttribute.count; i++) {\n      this.waves.push({\n        z: posAttribute.getZ(i),\n        ang: Math.random() * Math.PI * 2,\n        amp: data.amplitude + Math.random() * data.amplitudeVariance,\n        speed: (data.speed + Math.random() * data.speedVariance) / 1000 // radians / frame\n      });\n    }\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial({\n        color: data.color,\n        transparent: data.opacity < 1,\n        opacity: data.opacity,\n        flatShading: true,\n      });\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    el.setObject3D('mesh', this.mesh);\n  },\n\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  },\n\n  tick: function (t, dt) {\n    if (!dt) return;\n\n    const posAttribute = this.mesh.geometry.getAttribute('position');\n    for (let i = 0; i < posAttribute.count; i++){\n      const vprops = this.waves[i];\n      const value = vprops.z + Math.sin(vprops.ang) * vprops.amp;\n      posAttribute.setZ(i, value);\n      vprops.ang += vprops.speed * dt;\n    }\n    posAttribute.needsUpdate = true;\n  }\n});\n","/**\n * Tube following a custom path.\n *\n * Usage:\n *\n * ```html\n * <a-tube path=\"5 0 5, 5 0 -5, -5 0 -5\" radius=\"0.5\"></a-tube>\n * ```\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-tube', {\n  defaultComponents: {\n    tube:           {},\n  },\n  mappings: {\n    path:           'tube.path',\n    segments:       'tube.segments',\n    radius:         'tube.radius',\n    'radial-segments': 'tube.radialSegments',\n    closed:         'tube.closed'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('tube', {\n  schema: {\n    path:           {default: []},\n    segments:       {default: 64},\n    radius:         {default: 1},\n    radialSegments: {default: 8},\n    closed:         {default: false}\n  },\n\n  init: function () {\n    const el = this.el,\n        data = this.data;\n    let material = el.components.material;\n\n    if (!data.path.length) {\n      console.error('[a-tube] `path` property expected but not found.');\n      return;\n    }\n\n    const curve = new THREE.CatmullRomCurve3(data.path.map(function (point) {\n      point = point.split(' ');\n      return new THREE.Vector3(Number(point[0]), Number(point[1]), Number(point[2]));\n    }));\n    const geometry = new THREE.TubeGeometry(\n      curve, data.segments, data.radius, data.radialSegments, data.closed\n    );\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial();\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    this.el.setObject3D('mesh', this.mesh);\n  },\n\n  update: function (prevData) {\n    if (!Object.keys(prevData).length) return;\n\n    this.remove();\n    this.init();\n  },\n\n  remove: function () {\n    if (this.mesh) this.el.removeObject3D('mesh');\n  }\n});\n","require('./a-grid');\nrequire('./a-ocean');\nrequire('./a-tube');\n","module.exports = __WEBPACK_EXTERNAL_MODULE__824__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","require('./src/controls');\nrequire('./src/loaders');\nrequire('./src/misc');\nrequire('./src/pathfinding');\nrequire('./src/primitives');\n"],"names":["root","factory","exports","module","require","define","amd","a","i","self","__WEBPACK_EXTERNAL_MODULE__824__","THREE","ColladaLoader","manager","this","undefined","DefaultLoadingManager","prototype","constructor","crossOrigin","load","url","onLoad","onProgress","onError","scope","path","LoaderUtils","extractUrlBase","loader","FileLoader","setPath","text","parse","value","setResourcePath","resourcePath","options","convertUpAxis","console","warn","setCrossOrigin","getElementsByTagName","xml","name","array","childNodes","l","length","child","nodeName","push","parseStrings","parts","trim","split","Array","parseFloats","parseFloat","parseInts","parseInt","parseId","substring","isEmpty","object","Object","keys","parseAssetUnit","hasAttribute","getAttribute","parseAssetUpAxis","textContent","parseLibrary","libraryName","parser","library","elements","buildLibrary","data","builder","build","getBuild","parseAnimationSampler","inputs","nodeType","id","semantic","parseAnimationChannel","shift","sid","arraySyntax","indexOf","memberSyntax","member","indices","replace","sampler","buildAnimation","tracks","channels","samplers","sources","target","hasOwnProperty","channel","inputId","INPUT","outputId","OUTPUT","createKeyframeTracks","buildAnimationChannel","getAnimation","animations","inputSource","outputSource","time","stride","il","j","jl","node","nodes","object3D","getNode","transform","transforms","defaultMatrix","matrix","clone","transpose","index","keyframes","sort","b","transformAnimationData","prepareAnimationData","uuid","position","Vector3","scale","quaternion","Quaternion","animation","times","positionData","quaternionData","scaleData","keyframe","fromArray","decompose","x","y","z","w","VectorKeyframeTrack","QuaternionKeyframeTrack","property","defaultValue","empty","prev","next","getPrev","getNext","interpolate","createMissingKeyframes","key","buildAnimationClip","duration","end","start","animationTracks","AnimationClip","getAnimationClip","clips","parseSkin","bindShapeMatrix","parseSource","joints","parseJoints","vertexWeights","parseVertexWeights","offset","vcount","v","buildController","geometry","geometries","skin","weights","jointOffset","JOINT","weightOffset","WEIGHT","jointSource","inverseSource","INV_BIND_MATRIX","jointCount","vertexSkinData","skinIndex","skinWeight","weight","descending","d","bindMatrix","Matrix4","identity","boneInverse","buildSkin","skinIndices","skinWeights","buildImage","init_from","getImage","images","parseEffectProfileCOMMON","surfaces","parseEffectNewparam","technique","parseEffectTechnique","extra","parseEffectExtra","parseEffectSurface","parseEffectSampler","source","type","parameters","parseEffectParameters","parseEffectParameter","opaque","parseEffectParameterTexture","parseEffectParameterTextureExtra","parseEffectParameterTextureExtraTechnique","toUpperCase","parseEffectExtraTechnique","buildEffect","buildMaterial","material","effect","effects","profile","MeshPhongMaterial","MeshLambertMaterial","MeshBasicMaterial","getTexture","textureObject","image","extension","slice","lastIndexOf","toLowerCase","tgaLoader","textureLoader","getTextureLoader","texture","wrapS","wrapU","RepeatWrapping","ClampToEdgeWrapping","wrapT","wrapV","set","offsetU","offsetV","repeat","repeatU","repeatV","parameter","color","map","specular","specularMap","normalMap","lightMap","float","shininess","emissive","emissiveMap","transparent","transparency","opacity","double_sided","side","DoubleSide","getMaterial","materials","parseCameraOptics","parseCameraTechnique","parseCameraParameters","buildCamera","camera","optics","PerspectiveCamera","yfov","aspect_ratio","znear","zfar","ymag","xmag","aspectRatio","OrthographicCamera","getCamera","cameras","parseLightTechnique","parseLightParameters","Color","falloffAngle","f","distance","Math","sqrt","buildLight","light","DirectionalLight","PointLight","SpotLight","AmbientLight","copy","getLight","lights","accessor","parseGeometryVertices","parseGeometryPrimitive","primitive","count","hasUV","inputname","max","p","checkUVCoordinates","primitives","uvsNeedsFix","buildGeometry","vertices","groupedPrimitives","groupPrimitives","primitiveType","buildGeometryType","normal","uv","uv2","BufferGeometry","materialKeys","g","vc","addGroup","input","prevLength","buildGeometryData","addAttribute","Float32BufferAttribute","pushVector","sourceStride","sourceArray","c","k","kl","getGeometry","buildKinematicsModel","parseKinematicsTechniqueCommon","parseKinematicsJoint","links","parseKinematicsLink","parseKinematicsJointParameter","axis","limits","min","static","zeroPosition","middlePosition","attachments","parseKinematicsAttachment","parseKinematicsTransform","joint","pop","obj","angle","MathUtils","degToRad","parsePhysicsRigidBody","parsePhysicsTechniqueCommon","inertia","mass","parseKinematicsBindJointAxis","param","tmpJointIndex","jointIndex","substr","buildKinematicsScene","buildTransformList","collada","querySelector","vector","parseNode","instanceCameras","instanceControllers","instanceLights","instanceGeometries","instanceNodes","parseNodeInstance","multiply","makeTranslation","makeRotationAxis","log","hasNode","skeletons","instances","instance","symbol","buildSkeleton","boneData","sortedBoneData","skeleton","buildBoneHierarchy","visualScenes","children","error","bone","processed","bones","boneInverses","Skeleton","traverse","isBone","buildNode","objects","instanceCamera","controller","controllers","newObjects","buildObjects","isSkinnedMesh","bind","normalizeSkinWeights","instanceLight","Bone","Group","add","fallbackMaterial","resolveMaterialBinding","instanceMaterials","LineBasicMaterial","skinning","attributes","LineSegments","Line","SkinnedMesh","Mesh","buildVisualScene","group","getVisualScene","scene","Scene","DOMParser","parseFromString","version","asset","unit","upAxis","TextureLoader","TGALoader","kinematics","kinematicsModels","physicsModels","kinematicsScenes","mesh","element","setAttribute","prepareNodes","rigidBodies","bindJointAxis","setupAnimations","kinematicsModelId","kinematicsSceneId","visualSceneId","kinematicsModel","kinematicsScene","getKinematicsScene","visualScene","jointMap","targetElement","parentVisualElement","parentElement","connect","m0","getJointValue","jointData","setJointValue","visualElement","visualElementName","setupKinematics","parseScene","setFromEuler","Euler","PI","multiplyScalar","FBXLoader","fbxTree","connections","sceneGraph","FBXTreeParser","GeometryParser","AnimationParser","TextParser","BinaryParser","BinaryReader","buffer","littleEndian","dv","DataView","FBXTree","getFbxVersion","match","Error","convertFBXTimeToSeconds","resourceDirectory","setResponseType","setTimeout","itemError","FBXBuffer","CORRECT","byteLength","convertArrayBufferToString","FBXText","result","cursor","isFbxFormatASCII","parseConnections","parseImages","textures","parseTextures","parseMaterials","deformers","parseDeformers","geometryMap","connectionMap","Map","Connections","forEach","rawConnection","fromID","toID","relationship","has","parents","parentRelationship","ID","get","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","base64Content","parseImage","filename","content","fileName","Loader","Handlers","Uint8Array","window","URL","createObjectURL","Blob","textureMap","textureNodes","Texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","values","Scaling","currentPath","FileName","materialMap","materialNodes","Material","parseMaterial","materialNode","ShadingModel","parseParameters","setValues","BumpFactor","bumpScale","Diffuse","DiffuseColor","DisplacementFactor","displacementScale","Emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","Opacity","ReflectionFactor","reflectivity","Shininess","Specular","SpecularColor","bumpMap","displacementMap","envMap","mapping","EquirectangularReflectionMapping","alphaMap","LayeredTexture","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","Transform","transformLink","TransformLink","linkMode","Mode","Indexes","Weights","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","modelMap","parseModels","modelNodes","Model","model","modelNode","setLookAtProperties","connection","parent","bindSkeleton","createAmbientLight","setupMorphMaterials","isGroup","createCamera","createLight","createMesh","createCurve","PropertyBinding","sanitizeNodeName","setModelTransforms","subBone","matrixWorld","cameraAttribute","attr","NodeAttribute","Object3D","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","width","innerWidth","height","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","setFocalLength","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","FarAttenuationEnd","EnableFarAttenuation","InnerAngle","penumbra","OuterAngle","CastShadows","castShadow","vertexColors","VertexColors","FBX_Deformer","reduce","geo","linewidth","transformData","eulerOrder","RotationOrder","translation","Lcl_Translation","rotationOffset","RotationOffset","rotation","Lcl_Rotation","preRotation","PreRotation","postRotation","PostRotation","Lcl_Scaling","generateTransform","applyMatrix","lookAtTarget","pos","lookAt","bindMatrices","parsePoseNodes","geoConnParent","BindPoseNode","Pose","poseNodes","PoseNode","isArray","poseNode","Node","Matrix","GlobalSettings","ambientColor","AmbientColor","r","isMesh","morphAttributes","matUuid","sharedMat","geoNodes","Geometry","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","vertex","applyToBufferAttribute","colors","Uint16BufferAttribute","weightsIndices","normalAttribute","Matrix3","getNormalMatrix","uvs","uvBuffer","toString","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","groups","lastGroup","lastIndex","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","parseUVs","weightTable","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","rawTarget","morphGeoNode","genMorphGeometry","morphGeo","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UV","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","NURBSCurve","order","Order","isNaN","startKnot","endKnot","degree","knots","KnotVector","controlPoints","pointsValues","Points","Vector4","Form","getPoints","positions","Float32Array","toArray","BufferAttribute","animationClips","rawClips","parseClips","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","curves","rawCurves","animationCurve","KeyTime","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","getModelAnimTransform","preRotations","postRotations","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","rawTracks","concat","generateTracks","setFromQuaternion","T","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","S","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","interpolateRotations","inverse","euler","quaternionValues","premultiply","val","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","filter","elem","prevValue","xIndex","yIndex","zIndex","xValue","yValue","zValue","curve","valuesSpan","absoluteSpan","abs","numSubIntervals","step","nextValue","initialTime","interval","nextTime","interpolatedTimes","interpolatedValues","inject","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","connProps","from","to","rest","append","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","reader","skip","getUint32","endOfContent","size","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","encoding","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","Zlib","reader2","Inflate","decompress","low","high","nullByte","decodeText","dataArray","infoObject","tempMat","tempEuler","tempVec","getEulerOrder","makeRotationFromEuler","getInverse","setPosition","enums","a1","a2","assign","FACE_1","FACE_2","FACE_3","FACE_4","L_SHOULDER_1","R_SHOULDER_1","L_SHOULDER_2","R_SHOULDER_2","SELECT","START","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT","VENDOR","details","pressed","removeScript","script","document","getElementById","parentNode","removeChild","e","settings","Promise","resolve","reject","timeout","scriptId","Date","now","ceil","random","createElement","async","src","createScript","timeoutId","disableTimeout","clearTimeout","addEventListener","ok","firstScript","insertBefore","appendScript","fetchScriptInternal","global","nativeKeyboardEvent","KeyboardEvent","TypeError","DOM_KEY_LOCATION_STANDARD","DOM_KEY_LOCATION_LEFT","DOM_KEY_LOCATION_RIGHT","DOM_KEY_LOCATION_NUMPAD","STANDARD","LEFT","RIGHT","NUMPAD","contains","s","ss","String","os","navigator","platform","userAgent","browser","vendor","browser_os","mergeIf","baseTable","select","table","keyCode","keyCodeToInfoTable","code","keyCap","location","keyIdentifierTable","locationTable","codeToKeyTable","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","OSLeft","OSRight","NumpadEnter","Space","Digit0","shiftKey","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd","NumpadComma","NumpadSubtract","NumpadDecimal","NumpadDivide","Semicolon","Equal","Comma","Minus","Period","Slash","Backquote","BracketLeft","Backslash","BracketRight","Quote","IntlBackslash","o","keyFixTable","Esc","Nonconvert","Left","Up","Right","Down","Del","Menu","MediaNextTrack","MediaPreviousTrack","SelectMedia","HalfWidth","FullWidth","RomanCharacters","Crsel","Exsel","Zoom","codeTable","item","nativeLocation","_","keyInfoForEvent","event","which","keyInfo","keyLocation","keyIdentifier","entry","defineProperty","desc","getOwnPropertyDescriptor","call","queryKeyCap","locale","identifyKey","t","n","m","enumerable","Symbol","toStringTag","__esModule","create","default","attachEvent","removeEventListener","detachEvent","preventDefault","changedTouches","h","pageXOffset","documentElement","body","scrollLeft","pageYOffset","scrollTop","u","top","right","bottom","left","style","charAt","PointerEvent","MSPointerEvent","O","move","on","_handlers_","off","splice","trigger","config","defaults","bindEvt","_domHandlers_","apply","arguments","unbindEvt","identifier","frontPosition","collection","threshold","fadeTime","dataOnly","restJoystick","restOpacity","mode","zone","lockX","lockY","shape","buildEl","stylize","el","ui","show","hide","addToDom","remove","removeFromDom","destroy","resetDirection","computeDirection","back","front","className","appendChild","display","marginLeft","marginTop","background","applyStyles","removeTimeout","showTimeout","restTimeout","restCallback","direction","radian","force","P","E","nipples","idles","actives","ids","pressureIntervals","multitouch","maxNumberOfNipples","catchDistance","dynamicPage","follow","getComputedStyle","parentIsFlex","updateBox","prepareNipples","bindings","begin","processOnMove","processOnEnd","touchAction","msTouchAction","createNipple","getIdentifier","scroll","box","getBoundingClientRect","bindNipple","onDestroyed","pressureFn","clearInterval","setInterval","pressure","webkitForce","onstart","processOnStart","touches","findIndex","bindDocument","pageX","pageY","getOrCreate","removeIdentifier","test","buttons","atan2","cos","sin","I","D","raw","unbindDocument","collections","prepareCollections","every","createCollection","bindCollection","binded","pointerId","latest","onmove","onAny","onend","oncancel","_found_","roundNumber","pow","round","sample","floor","distanceToSquared","isPointInPoly","isVectorInPolygon","vertexIds","triarea2","vequal","mergeVertices","Number","EPSILON","getIndex","log10","getX","getY","getZ","itemSize","normalized","setIndex","scoreFunction","sinkDown","bubbleUp","rescoreElement","portals","stringPull","zones","createZone","buildZone","_buildNavigationMesh","_buildPolygonGroups","neighbours","_getSharedVerticesInOrder","divideScalar","centroid","_buildPolygonsFromGeometry","_spreadGroupId","Set","polygons","_buildPolygonNeighbours","includes","fromBufferAttribute","setZoneData","getRandomNode","getClosestNode","Infinity","findPath","init","cost","visited","closed","cleanUp","heap","search","reverse","heuristic","getGroup","setFromCoplanarPoints","distanceToPoint","clampStep","projectPoint","closestPointToPoint","PLAYER","convertSRGBToLinear","getHex","TARGET","PATH","WAYPOINT","CLAMPED_STEP","CLOSEST_NODE","super","_playerMarker","_targetMarker","_nodeMarker","_stepMarker","_pathMarker","_pathLineMaterial","_pathPointMaterial","_pathPointGeometry","_markers","visible","setXYZ","setPlayerPosition","setTargetPosition","setNodePosition","setStepPosition","reset","AFRAME","registerComponent","schema","enabled","oneOf","animateSpeed","active","checkpoint","isNavMeshConstrained","targetPosition","play","pause","setCheckpoint","emit","sync","distanceTo","components","updateNavLocation","isVelocityActive","getVelocity","setLength","getWorldPosition","sub","GamepadButton","GamepadButtonEvent","JOYSTICK_EPS","Hand","rotationSensitivity","sceneEl","system","systems","prevTime","performance","pitch","yaw","_lookVector","Vector2","_moveVector","_dpadVector","addBehavior","update","tick","dt","updateButtonState","updateRotation","isConnected","dpad","joystick","getDpad","getJoystick","inputX","inputY","getVelocityDelta","dVelocity","isRotationActive","lookVector","gamepad","getGamepad","_xrGamepads","_empty","handPreference","proxyControls","proxyGamepad","xrController","xrGamepad","handedness","navGamepads","getGamepads","navGamepad","hand","getButton","getAxis","axes","connected","getID","debug","localKeys","listeners","keydown","onKeyDown","keyup","onKeyUp","blur","onBlur","onContextMenu","getKeys","ArrowUp","ArrowLeft","ArrowDown","ArrowRight","attachEventListeners","removeEventListeners","utils","shouldCaptureKeyEvent","isPressed","isProxied","getKeyboard","COMPONENT_SUFFIX","dependencies","controls","speed","fly","constrainToNavMesh","velocityCtrl","velocity","heading","navGroup","navNode","hasLoaded","injectControls","prevData","nav","addAgent","removeAgent","clampedEnd","updateVelocityCtrl","updateVelocity","lengthSq","control","vector2","getPositionDelta","cameraEl","applyQuaternion","factor","moveJoystickEnabled","lookJoystickEnabled","sideMargin","bottomMargin","moveJoystickPosition","lookJoystickPosition","lookControls","pitchObject","yawObject","rigRotation","moveData","lookData","moving","rotating","oldData","removeMoveJoystick","removeLookJoystick","createMoveJoystick","createLookJoystick","initLeftZone","leftZone","initRightZone","rightZone","moveJoystick","evt","lookJoystick","reverseEnabled","bindMethods","addEventListeners","canvasEl","canvas","onTouchStart","onTouchEnd","vrModeUI","cardboardModeEnabled","onEnterVR","xrSession","enableNegX","enablePosX","enableNegZ","enablePosZ","zVel","xVel","onAxisMove","isMoving","canRecordAxis","startingAxisData","handleSwipeAxis","handleTouchAxis","axisData","detail","velX","velZ","absChangeZ","LoopMode","once","LoopOnce","LoopRepeat","pingpong","LoopPingPong","regExpEscape","useRegExp","clampWhenFinished","crossFadeDuration","loop","repetitions","timeScale","startAt","mixer","activeActions","getObject3D","AnimationMixer","action","loopDelta","stopAllAction","changes","diff","stopAction","playAction","setDuration","setLoop","setEffectiveTimeScale","fadeOut","stop","re","RegExp","join","clipAction","fadeIn","Component","rendererSystem","renderer","colladaModel","applyColorCorrection","setObject3D","format","removeObject3D","crossorigin","fetchScript","loadLoader","promise","loaderPromise","then","GLTFLoader","gltfModel","ObjectLoader","targetEl","fire","applyEnvMap","materialNames","needsUpdate","multiple","enableBackground","CubeTextureLoader","RGBAFormat","object3dsetHandler","addedMaterialNames","removedMaterialNames","maintainedMaterialNames","setBackground","physics","GRABBED_STATE","grabbing","hitEl","constraint","onHit","onGripOpen","onGripClose","removeState","removeConstraint","is","addState","CANNON","LockConstraint","addConstraint","MeshNormalMaterial","flatShading","applyMaterial","state","radius","watch","observer","els","collisions","prevCheckTime","eventDetail","handleHit","handleHitEnd","MutationObserver","observe","childList","subtree","disconnect","objectEls","querySelectorAll","meshPosition","colliderScale","Box3","distanceMap","colliderRadius","scaleVec","clear","getWorldScale","extent","isEntity","setFromObject","getSize","getCenter","dest","copyArray","destination","raycaster","Raycaster","vDest","vDelta","vNext","getPath","vCurrent","vWaypoint","gazeTarget","subVectors","ray","origin","intersections","intersectObject","getNavMesh","point","hasLoadedNavMesh","loadNavMesh","navMesh","navMeshGeometry","updateWorldMatrix","applyMatrix4","setNavMeshGeometry","Pathfinding","pathfinder","ZONE","registerSystem","agents","agent","ctrl","delete","groupID","endTarget","registerPrimitive","defaultComponents","mappings","Primitive","ocean","depth","density","amplitude","amplitudeVariance","speedVariance","PlaneGeometry","waves","posAttribute","ang","amp","vprops","setZ","tube","segments","radialSegments","CatmullRomCurve3","TubeGeometry","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition"],"sourceRoot":""}